"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// ../../node_modules/tsup/assets/cjs_shims.js
var getImportMetaUrl, importMetaUrl;
var init_cjs_shims = __esm({
  "../../node_modules/tsup/assets/cjs_shims.js"() {
    getImportMetaUrl = () => typeof document === "undefined" ? new URL("file:" + __filename).href : document.currentScript && document.currentScript.src || new URL("main.js", document.baseURI).href;
    importMetaUrl = /* @__PURE__ */ getImportMetaUrl();
  }
});

// lib/httpClient/config.ts
var import_axios, isRetriableError, getDelay, baseURL, getAPIBaseUrl, setAPIBaseUrl;
var init_config = __esm({
  "lib/httpClient/config.ts"() {
    "use strict";
    init_cjs_shims();
    import_axios = require("axios");
    isRetriableError = (err) => {
      if (!(0, import_axios.isAxiosError)(err)) {
        return false;
      }
      if (err.code === "ECONNREFUSED") {
        return true;
      }
      return !!(err?.response?.status && 500 <= err.response.status && err.response.status < 600);
    };
    getDelay = (i) => [15 * 1e3, 30 * 1e3, 60 * 1e3][i - 1];
    baseURL = "https://cy.currents.dev";
    getAPIBaseUrl = () => baseURL ?? "https://cy.currents.dev";
    setAPIBaseUrl = (url) => baseURL = url ?? "https://cy.currents.dev";
  }
});

// lib/errors.ts
var ValidationError;
var init_errors = __esm({
  "lib/errors.ts"() {
    "use strict";
    init_cjs_shims();
    ValidationError = class extends Error {
      constructor(message) {
        super(message);
        this.name = "";
      }
    };
  }
});

// lib/log.ts
var import_chalk, import_util, log, info, withError, withWarning, warn, error, title, divider, spacer, cyan, blue, red, green, gray, white, magenta, bold;
var init_log = __esm({
  "lib/log.ts"() {
    "use strict";
    init_cjs_shims();
    import_chalk = __toESM(require("chalk"));
    import_util = __toESM(require("util"));
    log = (...args) => console.log(import_util.default.format(...args));
    info = log;
    withError = (msg) => import_chalk.default.bgRed.white(" ERROR ") + " " + msg;
    withWarning = (msg) => import_chalk.default.bgYellow.black(" WARNING ") + " " + msg;
    warn = (...args) => log(withWarning(import_util.default.format(...args)));
    error = (...args) => log(withError(import_util.default.format(...args)) + "\n");
    title = (color, ...args) => info("\n  " + import_chalk.default[color].bold(import_util.default.format(...args)) + "  \n");
    divider = () => console.log("\n" + import_chalk.default.gray(Array(100).fill("=").join("")) + "\n");
    spacer = (n = 0) => console.log(Array(n).fill("").join("\n"));
    cyan = import_chalk.default.cyan;
    blue = import_chalk.default.blueBright;
    red = import_chalk.default.red;
    green = import_chalk.default.greenBright;
    gray = import_chalk.default.gray;
    white = import_chalk.default.white;
    magenta = import_chalk.default.magenta;
    bold = import_chalk.default.bold;
  }
});

// lib/httpClient/printErrors.ts
function maybePrintErrors(err) {
  if (!err.response?.data || !err.response?.status) {
    return;
  }
  const { message, errors } = err.response.data;
  switch (err.response.status) {
    case 401:
      warn("Received 401 Unauthorized");
      break;
    case 422:
      spacer(1);
      warn(...formatGenericError(message, errors));
      spacer(1);
      break;
    default:
      break;
  }
}
function formatGenericError(message, errors) {
  if (!import_lodash.default.isString(message)) {
    return ["Unexpected error from the cloud service"];
  }
  if (errors?.length === 0) {
    return [message];
  }
  return [
    message,
    `
${(errors ?? []).map((e) => `  - ${e}`).join("\n")}
`
  ];
}
var import_lodash;
var init_printErrors = __esm({
  "lib/httpClient/printErrors.ts"() {
    "use strict";
    init_cjs_shims();
    import_lodash = __toESM(require("lodash"));
    init_log();
  }
});

// lib/httpClient/httpClient.ts
function getClient() {
  if (_client) {
    return _client;
  }
  _client = import_axios2.default.create({
    baseURL: getAPIBaseUrl()
  });
  _client.interceptors.request.use((config) => {
    const req = {
      ...config,
      headers: {
        "Content-Type": "application/json",
        ...config.headers,
        // @ts-ignore
        "x-cypress-request-attempt": config["axios-retry"]?.retryCount ?? 0,
        "x-cypress-run-id": _runId,
        "x-cypress-version": _cypressVersion,
        "x-ccy-version": _currentsVersion ?? "0.0.0"
      }
    };
    debug("network request: %o", req);
    return req;
  });
  (0, import_axios_retry.default)(_client, {
    retries: MAX_RETRIES,
    retryCondition: isRetriableError,
    retryDelay: getDelay,
    // @ts-ignore
    onRetry
  });
  return _client;
}
function onRetry(retryCount, err, _config2) {
  warn(
    "Network request failed: '%s'. Next attempt is in %s (%d/%d).",
    err.message,
    (0, import_pretty_ms.default)(getDelay(retryCount)),
    retryCount,
    MAX_RETRIES
  );
}
var import_axios2, import_axios_retry, import_debug, import_lodash2, import_pretty_ms, debug, MAX_RETRIES, _client, _runId, setRunId, _cypressVersion, setCypressVersion, _currentsVersion, setCurrentsVersion, makeRequest;
var init_httpClient = __esm({
  "lib/httpClient/httpClient.ts"() {
    "use strict";
    init_cjs_shims();
    import_axios2 = __toESM(require("axios"));
    import_axios_retry = __toESM(require("axios-retry"));
    import_debug = __toESM(require("debug"));
    import_lodash2 = __toESM(require("lodash"));
    import_pretty_ms = __toESM(require("pretty-ms"));
    init_errors();
    init_log();
    init_config();
    init_printErrors();
    debug = (0, import_debug.default)("currents:api");
    MAX_RETRIES = 3;
    _client = null;
    _runId = void 0;
    setRunId = (runId) => {
      _runId = runId;
    };
    _cypressVersion = void 0;
    setCypressVersion = (cypressVersion) => {
      _cypressVersion = cypressVersion;
    };
    _currentsVersion = void 0;
    setCurrentsVersion = (v) => {
      _currentsVersion = v;
    };
    makeRequest = (config) => {
      return getClient()(config).then((res) => {
        debug("network request response: %o", import_lodash2.default.omit(res, "request", "config"));
        return res;
      }).catch((error2) => {
        maybePrintErrors(error2);
        throw new ValidationError(error2.message);
      });
    };
  }
});

// lib/httpClient/index.ts
var init_httpClient2 = __esm({
  "lib/httpClient/index.ts"() {
    "use strict";
    init_cjs_shims();
    init_config();
    init_httpClient();
  }
});

// lib/capture.ts
var import_debug2, debug2, _write, _log, restore, stdout, initialOutput, capturedOutput, initCapture, cutInitialOutput, resetCapture, getCapturedOutput, getInitialOutput;
var init_capture = __esm({
  "lib/capture.ts"() {
    "use strict";
    init_cjs_shims();
    import_debug2 = __toESM(require("debug"));
    debug2 = (0, import_debug2.default)("currents:capture");
    _write = process.stdout.write;
    _log = process.log;
    restore = function() {
      process.stdout.write = _write;
      process.log = _log;
    };
    stdout = function() {
      debug2("capturing stdout");
      let logs = [];
      const { write } = process.stdout;
      const { log: log2 } = process;
      if (log2) {
        process.log = function(str) {
          logs.push(str);
          return log2.apply(this, arguments);
        };
      }
      process.stdout.write = function(str) {
        logs.push(str);
        return write.apply(this, arguments);
      };
      return {
        toString() {
          return logs.join("");
        },
        data: logs,
        restore,
        reset: () => {
          debug2("resetting captured stdout");
          logs = [];
        }
      };
    };
    initialOutput = "";
    capturedOutput = null;
    initCapture = () => capturedOutput = stdout();
    cutInitialOutput = () => {
      if (!capturedOutput)
        throw new Error("capturedOutput is null");
      initialOutput = capturedOutput.toString();
      capturedOutput.reset();
    };
    resetCapture = () => {
      if (!capturedOutput)
        throw new Error("capturedOutput is null");
      capturedOutput.reset();
    };
    getCapturedOutput = () => {
      if (!capturedOutput)
        throw new Error("capturedOutput is null");
      return capturedOutput.toString();
    };
    getInitialOutput = () => initialOutput;
  }
});

// lib/require.ts
var import_module, require2;
var init_require = __esm({
  "lib/require.ts"() {
    "use strict";
    init_cjs_shims();
    import_module = require("module");
    require2 = (0, import_module.createRequire)(importMetaUrl);
  }
});

// lib/stdout.ts
var import_child_process, orginal;
var init_stdout = __esm({
  "lib/stdout.ts"() {
    "use strict";
    init_cjs_shims();
    import_child_process = __toESM(require("child_process"));
    orginal = import_child_process.default.spawn;
    import_child_process.default.spawn = function(command, args, options) {
      if (command.match(/Cypress/)) {
        const process2 = orginal(command, args, {
          ...options,
          // using pipe enables capturing stdout and stderr
          stdio: ["pipe", "pipe", "pipe"]
        });
        return process2;
      }
      return orginal(command, args, options);
    };
  }
});

// lib/ws.ts
var init_ws = __esm({
  "lib/ws.ts"() {
    "use strict";
    init_cjs_shims();
  }
});

// lib/init.ts
var init_exports = {};
var cypressPkg, pkg;
var init_init = __esm({
  "lib/init.ts"() {
    "use strict";
    init_cjs_shims();
    init_require();
    init_stdout();
    init_ws();
    init_capture();
    init_httpClient2();
    cypressPkg = require2("cypress/package.json");
    pkg = require2("cypress-cloud/package.json");
    initCapture();
    setCypressVersion(cypressPkg.version);
    setCurrentsVersion(pkg.version);
  }
});

// index.ts
var cypress_cloud_exports = {};
__export(cypress_cloud_exports, {
  run: () => run2
});
module.exports = __toCommonJS(cypress_cloud_exports);
init_cjs_shims();
var import_register = require("source-map-support/register.js");

// lib/run.ts
init_cjs_shims();
var import_debug17 = __toESM(require("debug"));

// lib/api/index.ts
init_cjs_shims();

// lib/api/api.ts
init_cjs_shims();
init_httpClient2();

// lib/api/warnings.ts
init_cjs_shims();
var import_lodash3 = __toESM(require("lodash"));
init_log();
init_log();
function printWarnings(warnings) {
  warn("Notice from cloud service:");
  warnings.map((w) => {
    spacer(1);
    info(magenta.bold(w.message));
    Object.entries(import_lodash3.default.omit(w, "message")).map(([key, value]) => {
      info("- %s: %s", key, value);
    });
    spacer(1);
  });
}

// lib/api/api.ts
var createRun = async (payload) => {
  const response = await makeRequest({
    method: "POST",
    url: "/runs",
    data: payload
  });
  if ((response.data.warnings?.length ?? 0) > 0) {
    printWarnings(response.data.warnings);
  }
  return response.data;
};
var createInstance = async ({
  runId,
  groupId,
  machineId,
  platform: platform2
}) => {
  const response = await makeRequest({
    method: "POST",
    url: `runs/${runId}/instances`,
    data: {
      runId,
      groupId,
      machineId,
      platform: platform2
    }
  });
  return response.data;
};
var createBatchedInstances = async (data) => {
  const respone = await makeRequest({
    method: "POST",
    url: `runs/${data.runId}/cy/instances`,
    data
  });
  return respone.data;
};
var setInstanceTests = (instanceId, payload) => makeRequest({
  method: "POST",
  url: `instances/${instanceId}/tests`,
  data: payload
}).then((result) => result.data);
var updateInstanceResults = (instanceId, payload) => makeRequest({
  method: "POST",
  url: `instances/${instanceId}/results`,
  data: payload
}).then((result) => result.data);
var reportInstanceResultsMerged = (instanceId, payload) => makeRequest({
  method: "POST",
  url: `instances/${instanceId}/cy/results`,
  data: payload
}).then((result) => result.data);
var updateInstanceStdout = (instanceId, stdout2) => makeRequest({
  method: "PUT",
  url: `instances/${instanceId}/stdout`,
  data: {
    stdout: stdout2
  }
});

// lib/api/types/index.ts
init_cjs_shims();

// lib/api/types/instance.ts
init_cjs_shims();

// lib/api/types/run.ts
init_cjs_shims();

// lib/api/types/test.ts
init_cjs_shims();

// lib/run.ts
init_capture();

// lib/ciProvider.ts
init_cjs_shims();
var import_debug3 = __toESM(require("debug"));
var import_lodash4 = __toESM(require("lodash"));
init_errors();
var debug3 = (0, import_debug3.default)("currents:ci");
var join = (char, ...pieces) => {
  return import_lodash4.default.chain(pieces).compact().join(char).value();
};
var toCamelObject = (obj, key) => {
  return import_lodash4.default.set(obj, import_lodash4.default.camelCase(key), process.env[key]);
};
var extract = (envKeys) => {
  return import_lodash4.default.transform(envKeys, toCamelObject, {});
};
var isTeamFoundation = () => {
  return process.env.TF_BUILD && process.env.TF_BUILD_BUILDNUMBER;
};
var isAzureCi = () => {
  return process.env.TF_BUILD && process.env.AZURE_HTTP_USER_AGENT;
};
var isAWSCodeBuild = () => {
  return import_lodash4.default.some(process.env, (val, key) => {
    return /^CODEBUILD_/.test(key);
  });
};
var isBamboo = () => {
  return process.env.bamboo_buildNumber;
};
var isCodeshipBasic = () => {
  return process.env.CI_NAME && process.env.CI_NAME === "codeship" && process.env.CODESHIP;
};
var isCodeshipPro = () => {
  return process.env.CI_NAME && process.env.CI_NAME === "codeship" && !process.env.CODESHIP;
};
var isConcourse = () => {
  return import_lodash4.default.some(process.env, (val, key) => {
    return /^CONCOURSE_/.test(key);
  });
};
var isGitlab = () => {
  return process.env.GITLAB_CI || process.env.CI_SERVER_NAME && /^GitLab/.test(process.env.CI_SERVER_NAME);
};
var isGoogleCloud = () => {
  return process.env.GCP_PROJECT || process.env.GCLOUD_PROJECT || process.env.GOOGLE_CLOUD_PROJECT;
};
var isJenkins = () => {
  return process.env.JENKINS_URL || process.env.JENKINS_HOME || process.env.JENKINS_VERSION || process.env.HUDSON_URL || process.env.HUDSON_HOME;
};
var isWercker = () => {
  return process.env.WERCKER || process.env.WERCKER_MAIN_PIPELINE_STARTED;
};
var CI_PROVIDERS = {
  appveyor: "APPVEYOR",
  azure: isAzureCi,
  awsCodeBuild: isAWSCodeBuild,
  bamboo: isBamboo,
  bitbucket: "BITBUCKET_BUILD_NUMBER",
  buildkite: "BUILDKITE",
  circle: "CIRCLECI",
  codeshipBasic: isCodeshipBasic,
  codeshipPro: isCodeshipPro,
  concourse: isConcourse,
  codeFresh: "CF_BUILD_ID",
  drone: "DRONE",
  githubActions: "GITHUB_ACTIONS",
  gitlab: isGitlab,
  goCD: "GO_JOB_NAME",
  googleCloud: isGoogleCloud,
  jenkins: isJenkins,
  semaphore: "SEMAPHORE",
  shippable: "SHIPPABLE",
  teamcity: "TEAMCITY_VERSION",
  teamfoundation: isTeamFoundation,
  travis: "TRAVIS",
  wercker: isWercker,
  netlify: "NETLIFY",
  layerci: "LAYERCI"
};
function _detectProviderName() {
  const { env } = process;
  return import_lodash4.default.findKey(CI_PROVIDERS, (value) => {
    if (import_lodash4.default.isString(value)) {
      return env[value];
    }
    if (import_lodash4.default.isFunction(value)) {
      return value();
    }
  });
}
var _providerCiParams = () => {
  return {
    appveyor: extract([
      "APPVEYOR_JOB_ID",
      "APPVEYOR_ACCOUNT_NAME",
      "APPVEYOR_PROJECT_SLUG",
      "APPVEYOR_BUILD_NUMBER",
      "APPVEYOR_BUILD_VERSION",
      "APPVEYOR_PULL_REQUEST_NUMBER",
      "APPVEYOR_PULL_REQUEST_HEAD_REPO_BRANCH"
    ]),
    azure: extract([
      "BUILD_BUILDID",
      "BUILD_BUILDNUMBER",
      "BUILD_CONTAINERID",
      "BUILD_REPOSITORY_URI"
    ]),
    awsCodeBuild: extract([
      "CODEBUILD_BUILD_ID",
      "CODEBUILD_BUILD_NUMBER",
      "CODEBUILD_RESOLVED_SOURCE_VERSION",
      "CODEBUILD_SOURCE_REPO_URL",
      "CODEBUILD_SOURCE_VERSION"
    ]),
    bamboo: extract([
      "bamboo_buildNumber",
      "bamboo_buildResultsUrl",
      "bamboo_planRepository_repositoryUrl",
      "bamboo_buildKey"
    ]),
    bitbucket: extract([
      "BITBUCKET_REPO_SLUG",
      "BITBUCKET_REPO_OWNER",
      "BITBUCKET_BUILD_NUMBER",
      "BITBUCKET_PARALLEL_STEP",
      "BITBUCKET_STEP_RUN_NUMBER",
      // the PR variables are only set on pull request builds
      "BITBUCKET_PR_ID",
      "BITBUCKET_PR_DESTINATION_BRANCH",
      "BITBUCKET_PR_DESTINATION_COMMIT"
    ]),
    buildkite: extract([
      "BUILDKITE_REPO",
      "BUILDKITE_SOURCE",
      "BUILDKITE_JOB_ID",
      "BUILDKITE_BUILD_ID",
      "BUILDKITE_BUILD_URL",
      "BUILDKITE_BUILD_NUMBER",
      "BUILDKITE_PULL_REQUEST",
      "BUILDKITE_PULL_REQUEST_REPO",
      "BUILDKITE_PULL_REQUEST_BASE_BRANCH"
    ]),
    circle: extract([
      "CIRCLE_JOB",
      "CIRCLE_BUILD_NUM",
      "CIRCLE_BUILD_URL",
      "CIRCLE_PR_NUMBER",
      "CIRCLE_PR_REPONAME",
      "CIRCLE_PR_USERNAME",
      "CIRCLE_COMPARE_URL",
      "CIRCLE_WORKFLOW_ID",
      "CIRCLE_PULL_REQUEST",
      "CIRCLE_REPOSITORY_URL",
      "CI_PULL_REQUEST"
    ]),
    codeshipBasic: extract([
      "CI_BUILD_ID",
      "CI_REPO_NAME",
      "CI_BUILD_URL",
      "CI_PROJECT_ID",
      "CI_BUILD_NUMBER",
      "CI_PULL_REQUEST"
    ]),
    // CodeshipPro provides very few CI variables
    // https://documentation.codeship.com/pro/builds-and-configuration/environment-variables/
    codeshipPro: extract(["CI_BUILD_ID", "CI_REPO_NAME", "CI_PROJECT_ID"]),
    // https://concourse-ci.org/implementing-resource-types.html#resource-metadata
    concourse: extract([
      "BUILD_ID",
      "BUILD_NAME",
      "BUILD_JOB_NAME",
      "BUILD_PIPELINE_NAME",
      "BUILD_TEAM_NAME",
      "ATC_EXTERNAL_URL"
    ]),
    // https://codefresh.io/docs/docs/codefresh-yaml/variables/
    codeFresh: extract([
      "CF_BUILD_ID",
      "CF_BUILD_URL",
      "CF_CURRENT_ATTEMPT",
      "CF_STEP_NAME",
      "CF_PIPELINE_NAME",
      "CF_PIPELINE_TRIGGER_ID",
      // variables added for pull requests
      "CF_PULL_REQUEST_ID",
      "CF_PULL_REQUEST_IS_FORK",
      "CF_PULL_REQUEST_NUMBER",
      "CF_PULL_REQUEST_TARGET"
    ]),
    drone: extract([
      "DRONE_JOB_NUMBER",
      "DRONE_BUILD_LINK",
      "DRONE_BUILD_NUMBER",
      "DRONE_PULL_REQUEST"
    ]),
    // https://help.github.com/en/actions/automating-your-workflow-with-github-actions/using-environment-variables#default-environment-variables
    githubActions: extract([
      "GITHUB_WORKFLOW",
      "GITHUB_ACTION",
      "GITHUB_EVENT_NAME",
      "GITHUB_RUN_ID",
      "GITHUB_RUN_ATTEMPT",
      "GITHUB_REPOSITORY"
    ]),
    // see https://docs.gitlab.com/ee/ci/variables/
    gitlab: extract([
      // pipeline is common among all jobs
      "CI_PIPELINE_ID",
      "CI_PIPELINE_URL",
      // individual jobs
      "CI_BUILD_ID",
      // build id and job id are aliases
      "CI_JOB_ID",
      "CI_JOB_URL",
      "CI_JOB_NAME",
      // other information
      "GITLAB_HOST",
      "CI_PROJECT_ID",
      "CI_PROJECT_URL",
      "CI_REPOSITORY_URL",
      "CI_ENVIRONMENT_URL",
      "CI_DEFAULT_BRANCH"
      // for PRs: https://gitlab.com/gitlab-org/gitlab-ce/issues/23902
    ]),
    // https://docs.gocd.org/current/faq/dev_use_current_revision_in_build.html#standard-gocd-environment-variables
    goCD: extract([
      "GO_SERVER_URL",
      "GO_ENVIRONMENT_NAME",
      "GO_PIPELINE_NAME",
      "GO_PIPELINE_COUNTER",
      "GO_PIPELINE_LABEL",
      "GO_STAGE_NAME",
      "GO_STAGE_COUNTER",
      "GO_JOB_NAME",
      "GO_TRIGGER_USER",
      "GO_REVISION",
      "GO_TO_REVISION",
      "GO_FROM_REVISION",
      "GO_MATERIAL_HAS_CHANGED"
    ]),
    googleCloud: extract([
      // individual jobs
      "BUILD_ID",
      "PROJECT_ID",
      // other information
      "REPO_NAME",
      "BRANCH_NAME",
      "TAG_NAME",
      "COMMIT_SHA",
      "SHORT_SHA"
      // https://cloud.google.com/cloud-build/docs/api/reference/rest/Shared.Types/Build
    ]),
    jenkins: extract(["BUILD_ID", "BUILD_URL", "BUILD_NUMBER", "ghprbPullId"]),
    // https://semaphoreci.com/docs/available-environment-variables.html
    // some come from v1, some from v2 of semaphore
    semaphore: extract([
      "SEMAPHORE_BRANCH_ID",
      "SEMAPHORE_BUILD_NUMBER",
      "SEMAPHORE_CURRENT_JOB",
      "SEMAPHORE_CURRENT_THREAD",
      "SEMAPHORE_EXECUTABLE_UUID",
      "SEMAPHORE_GIT_BRANCH",
      "SEMAPHORE_GIT_DIR",
      "SEMAPHORE_GIT_REF",
      "SEMAPHORE_GIT_REF_TYPE",
      "SEMAPHORE_GIT_REPO_SLUG",
      "SEMAPHORE_GIT_SHA",
      "SEMAPHORE_GIT_URL",
      "SEMAPHORE_JOB_COUNT",
      "SEMAPHORE_JOB_ID",
      // v2
      "SEMAPHORE_JOB_NAME",
      "SEMAPHORE_JOB_UUID",
      // v1
      "SEMAPHORE_PIPELINE_ID",
      "SEMAPHORE_PLATFORM",
      "SEMAPHORE_PROJECT_DIR",
      "SEMAPHORE_PROJECT_HASH_ID",
      "SEMAPHORE_PROJECT_ID",
      // v2
      "SEMAPHORE_PROJECT_NAME",
      "SEMAPHORE_PROJECT_UUID",
      // v1
      "SEMAPHORE_REPO_SLUG",
      "SEMAPHORE_TRIGGER_SOURCE",
      "SEMAPHORE_WORKFLOW_ID",
      "PULL_REQUEST_NUMBER"
      // pull requests from forks ONLY
    ]),
    // see http://docs.shippable.com/ci/env-vars/
    shippable: extract([
      // build variables
      "SHIPPABLE_BUILD_ID",
      // "5b93354cabfabb07007f01fd"
      "SHIPPABLE_BUILD_NUMBER",
      // "4"
      "SHIPPABLE_COMMIT_RANGE",
      // "sha1...sha2"
      "SHIPPABLE_CONTAINER_NAME",
      // "c.exec.cypress-example-kitchensink.4.1"
      "SHIPPABLE_JOB_ID",
      // "1"
      "SHIPPABLE_JOB_NUMBER",
      // "1"
      "SHIPPABLE_REPO_SLUG",
      // "<username>/<repo>"
      // additional information that Shippable provides
      "IS_FORK",
      // "true"
      "IS_GIT_TAG",
      // "false"
      "IS_PRERELEASE",
      // "false"
      "IS_RELEASE",
      // "false"
      "REPOSITORY_URL",
      // "https://github.com/....git"
      "REPO_FULL_NAME",
      // "<username>/<repo>"
      "REPO_NAME",
      // "cypress-example-kitchensink"
      "BUILD_URL",
      // "https://app.shippable.com/github/<username>/<repo>/runs/1"
      // Pull request information
      "BASE_BRANCH",
      // Name of the target branch into which the pull request changes will be merged.
      "HEAD_BRANCH",
      // This is only set for pull requests and is the name of the branch the pull request was opened from.
      "IS_PULL_REQUEST",
      // "false" or "true"
      "PULL_REQUEST",
      // Pull request number if the job is a pull request. If not, this will be set to false.
      "PULL_REQUEST_BASE_BRANCH",
      // Name of the branch that the pull request will be merged into. It should be the same as BASE_BRANCH.
      "PULL_REQUEST_REPO_FULL_NAME"
      // Full name of the repository from where the pull request originated.
    ]),
    teamcity: null,
    teamfoundation: extract([
      "BUILD_BUILDID",
      "BUILD_BUILDNUMBER",
      "BUILD_CONTAINERID"
    ]),
    travis: extract([
      "TRAVIS_JOB_ID",
      "TRAVIS_BUILD_ID",
      "TRAVIS_BUILD_WEB_URL",
      "TRAVIS_REPO_SLUG",
      "TRAVIS_JOB_NUMBER",
      "TRAVIS_EVENT_TYPE",
      "TRAVIS_COMMIT_RANGE",
      "TRAVIS_BUILD_NUMBER",
      "TRAVIS_PULL_REQUEST",
      "TRAVIS_PULL_REQUEST_BRANCH",
      "TRAVIS_PULL_REQUEST_SHA"
    ]),
    wercker: null,
    // https://docs.netlify.com/configure-builds/environment-variables/#deploy-urls-and-metadata
    netlify: extract([
      "BUILD_ID",
      "CONTEXT",
      "URL",
      "DEPLOY_URL",
      "DEPLOY_PRIME_URL",
      "DEPLOY_ID"
    ]),
    // https://layerci.com/docs/layerfile-reference/build-env
    layerci: extract([
      "LAYERCI_JOB_ID",
      "LAYERCI_RUNNER_ID",
      "RETRY_INDEX",
      "LAYERCI_PULL_REQUEST",
      "LAYERCI_REPO_NAME",
      "LAYERCI_REPO_OWNER",
      "LAYERCI_BRANCH",
      "GIT_TAG"
      // short hex for commits
    ])
  };
};
var _providerCommitParams = () => {
  const { env } = process;
  return {
    appveyor: {
      sha: env.APPVEYOR_REPO_COMMIT,
      // since APPVEYOR_REPO_BRANCH will be the target branch on a PR
      // we need to use PULL_REQUEST_HEAD_REPO_BRANCH if it exists.
      // e.g. if you have a PR: develop <- my-feature-branch
      // my-feature-branch is APPVEYOR_PULL_REQUEST_HEAD_REPO_BRANCH
      // develop           is APPVEYOR_REPO_BRANCH
      branch: env.APPVEYOR_PULL_REQUEST_HEAD_REPO_BRANCH || env.APPVEYOR_REPO_BRANCH,
      message: join(
        "\n",
        env.APPVEYOR_REPO_COMMIT_MESSAGE,
        env.APPVEYOR_REPO_COMMIT_MESSAGE_EXTENDED
      ),
      authorName: env.APPVEYOR_REPO_COMMIT_AUTHOR,
      authorEmail: env.APPVEYOR_REPO_COMMIT_AUTHOR_EMAIL
      // remoteOrigin: ???
      // defaultBranch: ???
    },
    awsCodeBuild: {
      sha: env.CODEBUILD_RESOLVED_SOURCE_VERSION,
      // branch: ???,
      // message: ???
      // authorName: ???
      // authorEmail: ???
      remoteOrigin: env.CODEBUILD_SOURCE_REPO_URL
      // defaultBranch: ???
    },
    azure: {
      sha: env.BUILD_SOURCEVERSION,
      branch: env.BUILD_SOURCEBRANCHNAME,
      message: env.BUILD_SOURCEVERSIONMESSAGE,
      authorName: env.BUILD_SOURCEVERSIONAUTHOR,
      authorEmail: env.BUILD_REQUESTEDFOREMAIL
    },
    bamboo: {
      sha: env.bamboo_planRepository_revision,
      branch: env.bamboo_planRepository_branch,
      // message: ???
      authorName: env.bamboo_planRepository_username,
      // authorEmail: ???
      remoteOrigin: env.bamboo_planRepository_repositoryURL
      // defaultBranch: ???
    },
    bitbucket: {
      sha: env.BITBUCKET_COMMIT,
      branch: env.BITBUCKET_BRANCH
      // message: ???
      // authorName: ???
      // authorEmail: ???
      // remoteOrigin: ???
      // defaultBranch: ???
    },
    buildkite: {
      sha: env.BUILDKITE_COMMIT,
      branch: env.BUILDKITE_BRANCH,
      message: env.BUILDKITE_MESSAGE,
      authorName: env.BUILDKITE_BUILD_CREATOR,
      authorEmail: env.BUILDKITE_BUILD_CREATOR_EMAIL,
      remoteOrigin: env.BUILDKITE_REPO,
      defaultBranch: env.BUILDKITE_PIPELINE_DEFAULT_BRANCH
    },
    circle: {
      sha: env.CIRCLE_SHA1,
      branch: env.CIRCLE_BRANCH,
      // message: ???
      authorName: env.CIRCLE_USERNAME,
      // authorEmail: ???
      remoteOrigin: env.CIRCLE_REPOSITORY_URL
      // defaultBranch: ???
    },
    codeshipBasic: {
      sha: env.CI_COMMIT_ID,
      branch: env.CI_BRANCH,
      message: env.CI_COMMIT_MESSAGE,
      authorName: env.CI_COMMITTER_NAME,
      authorEmail: env.CI_COMMITTER_EMAIL
      // remoteOrigin: ???
      // defaultBranch: ???
    },
    codeshipPro: {
      sha: env.CI_COMMIT_ID,
      branch: env.CI_BRANCH,
      message: env.CI_COMMIT_MESSAGE,
      authorName: env.CI_COMMITTER_NAME,
      authorEmail: env.CI_COMMITTER_EMAIL
      // remoteOrigin: ???
      // defaultBranch: ???
    },
    codeFresh: {
      sha: env.CF_REVISION,
      branch: env.CF_BRANCH,
      message: env.CF_COMMIT_MESSAGE,
      authorName: env.CF_COMMIT_AUTHOR
    },
    drone: {
      sha: env.DRONE_COMMIT_SHA,
      // https://docs.drone.io/pipeline/environment/reference/drone-source-branch/
      branch: env.DRONE_SOURCE_BRANCH,
      message: env.DRONE_COMMIT_MESSAGE,
      authorName: env.DRONE_COMMIT_AUTHOR,
      authorEmail: env.DRONE_COMMIT_AUTHOR_EMAIL,
      remoteOrigin: env.DRONE_GIT_HTTP_URL,
      defaultBranch: env.DRONE_REPO_BRANCH
    },
    githubActions: {
      sha: env.GITHUB_SHA,
      branch: env.GH_BRANCH || env.GITHUB_REF,
      defaultBranch: env.GITHUB_BASE_REF,
      remoteBranch: env.GITHUB_HEAD_REF,
      runAttempt: env.GITHUB_RUN_ATTEMPT
    },
    gitlab: {
      sha: env.CI_COMMIT_SHA,
      branch: env.CI_COMMIT_REF_NAME,
      message: env.CI_COMMIT_MESSAGE,
      authorName: env.GITLAB_USER_NAME,
      authorEmail: env.GITLAB_USER_EMAIL,
      remoteOrigin: env.CI_REPOSITORY_URL,
      defaultBranch: env.CI_DEFAULT_BRANCH
    },
    googleCloud: {
      sha: env.COMMIT_SHA,
      branch: env.BRANCH_NAME
      // message: ??
      // authorName: ??
      // authorEmail: ??
      // remoteOrigin: ???
      // defaultBranch: ??
    },
    jenkins: {
      sha: env.GIT_COMMIT,
      branch: env.GIT_BRANCH
      // message: ???
      // authorName: ???
      // authorEmail: ???
      // remoteOrigin: ???
      // defaultBranch: ???
    },
    // Only from forks? https://semaphoreci.com/docs/available-environment-variables.html
    semaphore: {
      sha: env.SEMAPHORE_GIT_SHA,
      branch: env.SEMAPHORE_GIT_BRANCH,
      // message: ???
      // authorName: ???
      // authorEmail: ???
      remoteOrigin: env.SEMAPHORE_GIT_REPO_SLUG
      // defaultBranch: ???
    },
    shippable: {
      sha: env.COMMIT,
      branch: env.BRANCH,
      message: env.COMMIT_MESSAGE,
      authorName: env.COMMITTER
      // authorEmail: ???
      // remoteOrigin: ???
      // defaultBranch: ???
    },
    snap: null,
    teamcity: null,
    teamfoundation: {
      sha: env.BUILD_SOURCEVERSION,
      branch: env.BUILD_SOURCEBRANCHNAME,
      message: env.BUILD_SOURCEVERSIONMESSAGE,
      authorName: env.BUILD_SOURCEVERSIONAUTHOR
    },
    travis: {
      sha: env.TRAVIS_PULL_REQUEST_SHA || env.TRAVIS_COMMIT,
      // for PRs, TRAVIS_BRANCH is the base branch being merged into
      branch: env.TRAVIS_PULL_REQUEST_BRANCH || env.TRAVIS_BRANCH,
      // authorName: ???
      // authorEmail: ???
      message: env.TRAVIS_COMMIT_MESSAGE
      // remoteOrigin: ???
      // defaultBranch: ???
    },
    wercker: null,
    netlify: {
      sha: env.COMMIT_REF,
      branch: env.BRANCH,
      remoteOrigin: env.REPOSITORY_URL
    },
    layerci: {
      sha: env.GIT_COMMIT,
      branch: env.LAYERCI_BRANCH,
      message: env.GIT_COMMIT_TITLE
    }
  };
};
var _get = (fn) => {
  const providerName = getCiProvider();
  if (!providerName)
    return {};
  return import_lodash4.default.chain(fn()).get(providerName).value();
};
function checkForCiBuildFromCi(ciProvider) {
  if (ciProvider && detectableCiBuildIdProviders().includes(ciProvider))
    return true;
  throw new ValidationError(
    `Could not determine CI build ID from the environment. Please provide a unique CI build ID using the --ci-build-id CLI flag or 'ciBuildId' parameter for 'run' method.`
  );
}
function detectableCiBuildIdProviders() {
  return import_lodash4.default.chain(_providerCiParams()).omitBy(import_lodash4.default.isNull).keys().value();
}
function getCiProvider() {
  return _detectProviderName() || null;
}
function getCiParams() {
  return _get(_providerCiParams);
}
function getCommitParams() {
  return _get(_providerCommitParams);
}
function getCI(ciBuildId) {
  const params = getCiParams();
  const provider = getCiProvider();
  if (!ciBuildId)
    checkForCiBuildFromCi(provider);
  debug3("detected CI provider: %s", provider);
  debug3("detected CI params: %O", params);
  return {
    params,
    provider
  };
}
function getCommitDefaults(existingInfo) {
  debug3("git commit existing info");
  debug3(existingInfo);
  const commitParamsObj = getCommitParams();
  debug3("commit info from provider environment variables: %O", commitParamsObj);
  const combined = import_lodash4.default.transform(
    existingInfo,
    (memo, value, key) => {
      return memo[key] = import_lodash4.default.defaultTo(value || commitParamsObj[key], null);
    }
  );
  debug3("combined git and environment variables from provider");
  debug3(combined);
  return combined;
}

// lib/config/index.ts
init_cjs_shims();

// lib/config/config.ts
init_cjs_shims();
var import_debug6 = __toESM(require("debug"));
var import_path2 = __toESM(require("path"));

// lib/bootstrap/bootstrap.ts
init_cjs_shims();
var import_cy2 = require("cy2");
var import_debug5 = __toESM(require("debug"));
var import_execa = __toESM(require("execa"));
var import_fs = __toESM(require("fs"));
init_errors();

// lib/fs.ts
init_cjs_shims();
var import_tmp_promise = require("tmp-promise");
var createTempFile = async () => {
  const { path: path4 } = await (0, import_tmp_promise.file)();
  return path4;
};

// lib/bootstrap/bootstrap.ts
init_log();
init_require();

// lib/bootstrap/serializer.ts
init_cjs_shims();
var import_debug4 = __toESM(require("debug"));
var import_lodash5 = __toESM(require("lodash"));
var import_nanoid = require("nanoid");
var debug4 = (0, import_debug4.default)("currents:boot");
var getDummySpec = (0, import_nanoid.customAlphabet)("abcdefghijklmnopqrstuvwxyz", 10);
function getBootstrapArgs({
  params,
  port,
  tempFilePath
}) {
  return import_lodash5.default.chain(getCypressCLIParams(params)).thru((opts) => ({
    ...opts,
    // merge the env with the currents specific env variables
    env: {
      ...opts.env ?? {},
      currents_temp_file: tempFilePath,
      currents_port: port,
      currents_debug_enabled: process.env.DEBUG?.includes("currents:") ? true : false
    }
  })).tap((opts) => {
    debug4("cypress bootstrap params: %o", opts);
  }).thru(serializeOptions).tap((opts) => {
    debug4("cypress bootstrap serialized params: %o", opts);
  }).filter(Boolean).thru((args) => {
    return [
      ...args,
      "--spec",
      getDummySpec(),
      params.testingType === "component" ? "--component" : "--e2e"
    ];
  }).value();
}
function getCypressCLIParams(params) {
  const result = getStrippedCypressOptions(params);
  const testingType = result.testingType === "component" ? {
    component: true
  } : {};
  return {
    ...import_lodash5.default.omit(result, "testingType"),
    ...testingType
  };
}
function serializeOptions(options) {
  return Object.entries(options).flatMap(([key, value]) => {
    const _key = dashed(key);
    if (typeof value === "boolean") {
      return value === true ? [`--${_key}`] : [];
    }
    if (import_lodash5.default.isObject(value)) {
      return [`--${_key}`, serializeComplexParam(value)];
    }
    return [`--${_key}`, value.toString()];
  }).filter(Boolean);
}
function serializeComplexParam(param) {
  return JSON.stringify(param);
}
var dashed = (v) => v.replace(/[A-Z]/g, (m) => "-" + m.toLowerCase());

// lib/bootstrap/bootstrap.ts
var debug5 = (0, import_debug5.default)("currents:boot");
var bootCypress = async (port, params) => {
  debug5("booting cypress...");
  const tempFilePath = await createTempFile();
  const cypressBin = await (0, import_cy2.getBinPath)(require2.resolve("cypress"));
  debug5("cypress executable location: %s", cypressBin);
  const args = getBootstrapArgs({ port, tempFilePath, params });
  debug5("booting cypress with args: %o", args);
  const { stdout: stdout2, stderr } = await execCypress(cypressBin, args);
  if (!import_fs.default.existsSync(tempFilePath)) {
    throw new Error(
      `Cannot resolve cypress configuration from ${tempFilePath}. Please report the issue.`
    );
  }
  try {
    const f = import_fs.default.readFileSync(tempFilePath, "utf-8");
    if (!f) {
      throw new Error("Is cypress-cloud/plugin installed?");
    }
    debug5("cypress config '%s': '%s'", tempFilePath, f);
    return JSON.parse(f);
  } catch (err) {
    debug5("read config temp file failed: %o", err);
    info(bold("Cypress stdout:\n"), stdout2);
    info(bold("Cypress stderr:\n"), stderr);
    throw new ValidationError(`Unable to resolve cypress configuration
- make sure that 'cypress-cloud/plugin' is installed
- report the issue together with cypress stdout and stderr
`);
  }
};
async function execCypress(cypressBin, args) {
  let stdout2 = "";
  let stderr = "";
  try {
    await (0, import_execa.default)(cypressBin, ["run", ...args], {
      stdio: "pipe",
      env: {
        ...process.env,
        // prevent warnings about recording mode
        CYPRESS_RECORD_KEY: void 0,
        CYPRESS_PROJECT_ID: void 0
      }
    });
  } catch (err) {
    debug5("exec cypress failed (certain failures are expected): %o", err);
    stdout2 = err.stdout;
    stderr = err.stderr;
  }
  return { stdout: stdout2, stderr };
}

// lib/config/config.ts
init_log();
init_require();

// lib/utils.ts
init_cjs_shims();
var import_path = __toESM(require("path"));
function toArray(val) {
  return val ? typeof val === "string" ? [val] : val : [];
}
function toPosix(file2, sep = import_path.default.sep) {
  return file2.split(sep).join(import_path.default.posix.sep);
}
var getRandomPort = () => {
  const min = 1024;
  const max = 65535;
  return Math.floor(Math.random() * (max - min + 1)) + min;
};

// lib/config/config.ts
var debug6 = (0, import_debug6.default)("currents:config");
var _config = null;
function getCurrentsConfig() {
  if (_config) {
    return _config;
  }
  const configFilePath = getConfigFilePath();
  debug6("loading currents config file from '%s'", configFilePath);
  const defaultConfig = {
    e2e: {
      batchSize: 3
    },
    component: {
      batchSize: 5
    },
    cloudServiceUrl: "https://cy.currents.dev"
  };
  try {
    const fsConfig = require2(configFilePath);
    _config = {
      ...defaultConfig,
      ...fsConfig
    };
    return _config;
  } catch (e) {
    warn("failed to load config file: %s", configFilePath);
    debug6("failure details: %s", e);
    _config = defaultConfig;
    return _config;
  }
}
async function getMergedConfig(params) {
  debug6("resolving cypress config ");
  const cypressResolvedConfig = await bootCypress(getRandomPort(), params);
  debug6("cypress resolvedConfig: %O", cypressResolvedConfig);
  const rawE2EPattern = cypressResolvedConfig.rawJson?.e2e?.specPattern;
  let additionalIgnorePattern = [];
  if (params.testingType === "component" && rawE2EPattern) {
    additionalIgnorePattern = rawE2EPattern;
  }
  const result = {
    projectRoot: cypressResolvedConfig?.projectRoot || process.cwd(),
    projectId: params.projectId,
    specPattern: cypressResolvedConfig?.specPattern || "**/*.*",
    excludeSpecPattern: (
      // @ts-ignore
      cypressResolvedConfig?.resolved.excludeSpecPattern.value ?? []
    ),
    additionalIgnorePattern,
    resolved: cypressResolvedConfig
  };
  debug6("merged config: %O", result);
  return result;
}
function getConfigFilePath(explicitLocation = null) {
  return import_path2.default.resolve(explicitLocation ?? process.cwd(), "currents.config.js");
}

// lib/config/params.ts
init_cjs_shims();
var import_debug7 = __toESM(require("debug"));
var import_lodash6 = __toESM(require("lodash"));
init_errors();
init_log();
var debug7 = (0, import_debug7.default)("currents:validateParams");
function resolveCurrentsParams(params) {
  const configFromFile = getCurrentsConfig();
  const cloudServiceUrl = params.cloudServiceUrl ?? process.env.CURRENTS_API_URL ?? configFromFile.cloudServiceUrl;
  const recordKey = params.recordKey ?? process.env.CURRENTS_RECORD_KEY ?? configFromFile.recordKey;
  const projectId = params.projectId ?? process.env.CURRENTS_PROJECT_ID ?? configFromFile.projectId;
  const testingType = params.testingType ?? "e2e";
  const batchSize = testingType === "e2e" ? configFromFile.e2e.batchSize : configFromFile.component.batchSize;
  return {
    ...params,
    cloudServiceUrl,
    recordKey,
    projectId,
    batchSize,
    testingType
  };
}
var projectIdError = `Cannot resolve projectId. Please use one of the following:
- set CURRENTS_PROJECT_ID environment variable
- set "projectId" in "currents.config.js" file
- provide it as a "projectId" property for "run" API method`;
var cloudServiceUrlError = `Cannot resolve cloud service URL. Please use one of the following:
- set CURRENTS_API_URL environment variable
- set "cloudServiceUrl" in "currents.config.js" file
- provide it as a "cloudServiceUrl" property for "run" API method`;
var cloudServiceInvalidUrlError = `Invalid cloud service URL provided`;
var recordKeyError = `Cannot resolve record key. Please use one of the following:
- set CURRENTS_RECORD_KEY environment variable
- pass it as a cli flag '-k, --key <record-key>'
- set "recordKey" in "currents.config.js" file
- provide it as a "recordKey" property for "run" API method`;
function validateParams(_params) {
  const params = resolveCurrentsParams(_params);
  if (!params.cloudServiceUrl) {
    throw new ValidationError(cloudServiceUrlError);
  }
  if (!params.projectId) {
    throw new ValidationError(projectIdError);
  }
  if (!params.recordKey) {
    throw new ValidationError(recordKeyError);
  }
  try {
    new URL(params.cloudServiceUrl);
  } catch (err) {
    throw new ValidationError(
      `${cloudServiceInvalidUrlError}: "${params.cloudServiceUrl}"`
    );
  }
  const requiredParameters = [
    "testingType",
    "batchSize"
  ];
  requiredParameters.forEach((key) => {
    if (typeof params[key] === "undefined") {
      error(
        'Missing required parameter "%s". Please provide at least the following parameters: %s',
        key,
        requiredParameters.join(", ")
      );
      throw new Error("Missing required parameter");
    }
  });
  debug7("validated currents parametes: %o", params);
  return params;
}
function getStrippedCypressOptions(params) {
  return import_lodash6.default.pickBy(
    import_lodash6.default.omit(params, [
      "cloudServiceUrl",
      "batchSize",
      "projectId",
      "record",
      "key",
      "recordKey",
      "group",
      "parallel",
      "tag",
      "ciBuildId",
      "spec",
      "exit",
      "headed",
      "headless"
    ]),
    Boolean
  );
}

// lib/git.ts
init_cjs_shims();
var import_commit_info = __toESM(require("@cypress/commit-info"));
var getGitInfo = async (projectRoot) => {
  const commitInfo = await import_commit_info.default.commitInfo(projectRoot);
  return getCommitDefaults({
    branch: commitInfo.branch,
    remoteOrigin: commitInfo.remote,
    authorEmail: commitInfo.email,
    authorName: commitInfo.author,
    message: commitInfo.message,
    sha: commitInfo.sha
  });
};

// lib/run.ts
init_httpClient2();
init_log();

// lib/platform/index.ts
init_cjs_shims();

// lib/platform/browser.ts
init_cjs_shims();
var import_debug8 = __toESM(require("debug"));
init_log();
var debug8 = (0, import_debug8.default)("currents:browser");
function guessBrowser(browser, availableBrowsers = []) {
  debug8(
    "guessing browser from '%s', available browsers: %o",
    browser,
    availableBrowsers
  );
  let result = availableBrowsers.find((b) => b.name === browser);
  if (result) {
    debug8("identified browser by name: %o", result);
    return {
      browserName: result.displayName,
      browserVersion: result.version
    };
  }
  result = availableBrowsers.find((b) => b.path === browser);
  if (result) {
    debug8("identified browser by path: %o", result);
    return {
      browserName: result.displayName ?? result.name,
      browserVersion: result.version
    };
  }
  warn("Unable to identify browser name and version");
  return {
    browserName: "unknown",
    browserVersion: "unknown"
  };
}

// lib/platform/platform.ts
init_cjs_shims();
var import_debug9 = __toESM(require("debug"));
var import_getos = __toESM(require("getos"));
var import_os = require("os");
var import_util2 = require("util");
var debug9 = (0, import_debug9.default)("currents:platform");
var getOsVersion = async () => {
  if ((0, import_os.platform)() === "linux") {
    try {
      const linuxOs = await (0, import_util2.promisify)(import_getos.default)();
      if ("dist" in linuxOs && "release" in linuxOs) {
        return [linuxOs.dist, linuxOs.release].join(" - ");
      } else {
        return (0, import_os.release)();
      }
    } catch {
      return (0, import_os.release)();
    }
  }
  return (0, import_os.release)();
};
var getPlatformInfo = async () => {
  const osVersion = await getOsVersion();
  const result = {
    osName: (0, import_os.platform)(),
    osVersion,
    osCpus: (0, import_os.cpus)(),
    osMemory: {
      free: (0, import_os.freemem)(),
      total: (0, import_os.totalmem)()
    }
  };
  debug9("platform info: %o", result);
  return result;
};

// lib/platform/index.ts
async function getPlatform({
  browser,
  config
}) {
  return {
    ...await getPlatformInfo(),
    ...guessBrowser(browser ?? "electron", config.resolved?.browsers)
  };
}

// lib/results/index.ts
init_cjs_shims();

// lib/results/results.ts
init_cjs_shims();
var import_debug10 = __toESM(require("debug"));
var import_lodash7 = __toESM(require("lodash"));
var import_nanoid2 = require("nanoid");
var debug10 = (0, import_debug10.default)("currents:results");
var isSuccessResult = (result) => {
  return result.status === "finished";
};
var getScreenshotsSummary = (tests = []) => {
  return tests.flatMap(
    (test, i) => test.attempts.flatMap(
      (a, ai) => a.screenshots.flatMap((s) => ({
        ...s,
        testId: `r${i}`,
        testAttemptIndex: ai,
        screenshotId: (0, import_nanoid2.nanoid)()
      }))
    )
  );
};
var getStats = (stats) => {
  return {
    ...stats,
    wallClockDuration: stats.duration,
    wallClockStartedAt: stats.startedAt,
    wallClockEndedAt: stats.endedAt
  };
};
var getTestAttempt = (attempt) => {
  return {
    ...attempt,
    state: attempt.state,
    wallClockDuration: attempt.duration,
    wallClockStartedAt: attempt.startedAt
  };
};
var getInstanceResultPayload = (runResult) => {
  const altTests = [];
  if (runResult.error && !runResult.tests?.length) {
    altTests.push(getFakeTestFromException(runResult.error, runResult.stats));
  }
  return {
    stats: getStats(runResult.stats),
    reporterStats: runResult.reporterStats,
    exception: runResult.error ?? null,
    video: !!runResult.video,
    // Did the instance generate a video?
    screenshots: getScreenshotsSummary(runResult.tests ?? []),
    tests: runResult.tests?.map((test, i) => ({
      displayError: test.displayError,
      state: test.state,
      hooks: runResult.hooks,
      attempts: test.attempts?.map(getTestAttempt) ?? [],
      clientId: `r${i}`
    })) ?? altTests
  };
};
function getFakeTestFromException(error2, stats) {
  return {
    title: ["Unknown"],
    body: "",
    displayError: error2.split("\n")[0],
    state: "failed",
    hooks: [],
    attempts: [
      getTestAttempt({
        state: "failed",
        duration: 0,
        error: {
          name: "Error",
          message: error2.split("\n")[0],
          stack: error2
        },
        screenshots: [],
        startedAt: stats.startedAt,
        videoTimestamp: 0
      })
    ],
    clientId: "r0"
  };
}
var getInstanceTestsPayload = (runResult, config) => {
  const altTests = [];
  if (runResult.error && !runResult.tests?.length) {
    altTests.push(getFakeTestFromException(runResult.error, runResult.stats));
  }
  return {
    config,
    tests: runResult.tests?.map((test, i) => ({
      title: test.title,
      config: null,
      body: test.body,
      clientId: `r${i}`,
      hookIds: []
    })) ?? altTests,
    hooks: runResult.hooks
  };
};
var summarizeTestResults = (input, config) => {
  if (!input.length) {
    return getEmptyCypressResults(config);
  }
  const overall = input.reduce(
    (acc, {
      totalDuration,
      totalFailed,
      totalPassed,
      totalPending,
      totalSkipped,
      totalTests,
      totalSuites
    }) => ({
      totalDuration: acc.totalDuration + totalDuration,
      totalSuites: acc.totalSuites + totalSuites,
      totalPending: acc.totalPending + totalPending,
      totalFailed: acc.totalFailed + totalFailed,
      totalSkipped: acc.totalSkipped + totalSkipped,
      totalPassed: acc.totalPassed + totalPassed,
      totalTests: acc.totalTests + totalTests
    }),
    emptyStats
  );
  const firstResult = input[0];
  const startItems = input.map((i) => i.startedTestsAt).sort();
  const endItems = input.map((i) => i.endedTestsAt).sort();
  const runs = input.map((i) => i.runs).flat();
  return {
    ...overall,
    runs,
    startedTestsAt: import_lodash7.default.first(startItems),
    endedTestsAt: import_lodash7.default.last(endItems),
    ...import_lodash7.default.pick(
      firstResult,
      "browserName",
      "browserVersion",
      "browserPath",
      "osName",
      "osVersion",
      "cypressVersion",
      "config"
    ),
    status: "finished"
  };
};
function getEmptyCypressResults(config) {
  return {
    ...emptyStats,
    status: "finished",
    startedTestsAt: (/* @__PURE__ */ new Date()).toISOString(),
    endedTestsAt: (/* @__PURE__ */ new Date()).toISOString(),
    runs: [],
    // @ts-ignore
    config
  };
}
var emptyStats = {
  totalDuration: 0,
  totalSuites: 0,
  totalPending: 0,
  totalFailed: 0,
  totalSkipped: 0,
  totalPassed: 0,
  totalTests: 0
};
function getFailedDummyResult({
  specs,
  error: error2,
  config
}) {
  const start = (/* @__PURE__ */ new Date()).toISOString();
  const end = (/* @__PURE__ */ new Date()).toISOString();
  return {
    config,
    status: "finished",
    startedTestsAt: (/* @__PURE__ */ new Date()).toISOString(),
    endedTestsAt: (/* @__PURE__ */ new Date()).toISOString(),
    totalDuration: 0,
    totalSuites: 1,
    totalFailed: 1,
    totalPassed: 0,
    totalPending: 0,
    totalSkipped: 0,
    totalTests: 1,
    browserName: "unknown",
    browserVersion: "unknown",
    browserPath: "unknown",
    osName: "unknown",
    osVersion: "unknown",
    cypressVersion: "unknown",
    runs: specs.map((s) => ({
      stats: {
        suites: 1,
        tests: 1,
        passes: 0,
        pending: 0,
        skipped: 0,
        failures: 1,
        startedAt: start,
        endedAt: end,
        duration: 0
      },
      reporter: "spec",
      reporterStats: {},
      hooks: [],
      error: error2,
      video: null,
      spec: {
        name: s,
        relative: "",
        absolute: "",
        relativeToCommonRoot: ""
      },
      tests: [
        {
          title: ["Unknown"],
          state: "failed",
          body: "// This test is automatically generated due to execution failure",
          displayError: error2,
          attempts: [
            {
              state: "failed",
              startedAt: start,
              duration: 0,
              videoTimestamp: 0,
              screenshots: [],
              error: {
                name: "CloudExecutionError",
                message: error2,
                stack: ""
              }
            }
          ]
        }
      ],
      shouldUploadVideo: false,
      skippedSpec: false
    }))
  };
}
function normalizeRawResult(rawResult, specs, config) {
  if (!isSuccessResult(rawResult)) {
    return getFailedDummyResult({
      specs,
      error: rawResult.message,
      config
    });
  }
  return rawResult;
}
function getSummaryForSpec(spec, runResult) {
  const run3 = runResult.runs.find((r) => r.spec.relative === spec);
  if (!run3) {
    return;
  }
  const stats = getStats(run3.stats);
  return {
    ...runResult,
    runs: [run3],
    totalSuites: 1,
    totalDuration: stats.wallClockDuration,
    totalTests: stats.tests,
    totalFailed: stats.failures,
    totalPassed: stats.passes,
    totalPending: stats.pending,
    totalSkipped: stats.skipped,
    startedTestsAt: stats.wallClockStartedAt,
    endedTestsAt: stats.wallClockEndedAt
  };
}

// lib/results/table.ts
init_cjs_shims();
var import_lodash8 = __toESM(require("lodash"));
var import_pretty_ms2 = __toESM(require("pretty-ms"));
var import_table = require("table");
init_log();
var failureIcon = red("\u2716");
var successIcon = green("\u2714");
var summaryTable = (r) => {
  const overallSpecCount = r.runs.length;
  const failedSpecsCount = import_lodash8.default.sum(
    r.runs.filter((v) => v.stats.failures + v.stats.skipped > 0).map(() => 1)
  );
  const hasFailed = failedSpecsCount > 0;
  const verdict = hasFailed ? red(`${failedSpecsCount} of ${overallSpecCount} failed`) : overallSpecCount > 0 ? "All specs passed!" : "No specs executed";
  const data = r.runs.map((r2) => [
    r2.stats.failures + r2.stats.skipped > 0 ? failureIcon : successIcon,
    r2.spec.relativeToCommonRoot,
    gray((0, import_pretty_ms2.default)(r2.stats.duration)),
    white(r2.stats.tests ?? 0),
    r2.stats.passes ? green(r2.stats.passes) : gray("-"),
    r2.stats.failures ? red(r2.stats.failures) : gray("-"),
    r2.stats.pending ? cyan(r2.stats.pending) : gray("-"),
    r2.stats.skipped ? red(r2.stats.skipped) : gray("-")
  ]);
  return (0, import_table.table)(
    [
      [
        "",
        // marker
        gray("Spec"),
        "",
        gray("Tests"),
        gray("Passing"),
        gray("Failing"),
        gray("Pending"),
        gray("Skipped")
      ],
      ...data,
      [
        hasFailed ? failureIcon : successIcon,
        // marker
        verdict,
        gray((0, import_pretty_ms2.default)(r.totalDuration ?? 0)),
        overallSpecCount > 0 ? white(r.totalTests ?? 0) : gray("-"),
        r.totalPassed ? green(r.totalPassed) : gray("-"),
        r.totalFailed ? red(r.totalFailed) : gray("-"),
        r.totalPending ? cyan(r.totalPending) : gray("-"),
        r.totalSkipped ? red(r.totalSkipped) : gray("-")
      ]
    ],
    {
      border,
      columnDefault: {
        width: 8
      },
      columns: [
        { alignment: "left", width: 2 },
        { alignment: "left", width: 30 },
        { alignment: "right" },
        { alignment: "right" },
        { alignment: "right" },
        { alignment: "right" },
        { alignment: "right" },
        { alignment: "right" }
      ],
      // singleLine: true,
      drawHorizontalLine: (lineIndex, rowCount) => {
        return lineIndex === 1 || lineIndex === 0 || lineIndex === rowCount - 1 || lineIndex === rowCount;
      },
      drawVerticalLine: (lineIndex, rowCount) => {
        return lineIndex === 0 || rowCount === lineIndex;
      }
    }
  );
};
var border = import_lodash8.default.mapValues(
  {
    topBody: `\u2500`,
    topJoin: `\u252C`,
    topLeft: `  \u250C`,
    topRight: `\u2510`,
    bottomBody: `\u2500`,
    bottomJoin: `\u2534`,
    bottomLeft: `  \u2514`,
    bottomRight: `\u2518`,
    bodyLeft: `  \u2502`,
    bodyRight: `\u2502`,
    bodyJoin: `\u2502`,
    joinBody: `\u2500`,
    joinLeft: `  \u251C`,
    joinRight: `\u2524`,
    joinJoin: `\u253C`
  },
  (v) => gray(v)
);

// lib/results/uploadResults.ts
init_cjs_shims();
var import_debug13 = __toESM(require("debug"));

// lib/artifacts.ts
init_cjs_shims();
var import_debug12 = __toESM(require("debug"));

// lib/lang.ts
init_cjs_shims();
var safe = (fn, ifFaled, ifSucceed) => async (...args) => {
  try {
    const r = await fn(...args);
    ifSucceed();
    return r;
  } catch (e) {
    ifFaled(e);
  }
};

// lib/artifacts.ts
init_log();

// lib/upload.ts
init_cjs_shims();
var import_debug11 = __toESM(require("debug"));
var import_fs3 = __toESM(require("fs"));
init_httpClient2();
var readFile = import_fs3.default.promises.readFile;
var debug11 = (0, import_debug11.default)("currents:upload");
function uploadVideo(file2, url) {
  return uploadFile(file2, url, "video/mp4");
}
function uploadImage(file2, url) {
  return uploadFile(file2, url, "image/png");
}
async function uploadFile(file2, url, type) {
  debug11('uploading file "%s" to "%s"', file2, url);
  const f = await readFile(file2);
  await makeRequest({
    url,
    method: "PUT",
    data: f,
    headers: {
      "Content-Type": type
    }
  });
}

// lib/artifacts.ts
var debug12 = (0, import_debug12.default)("currents:artifacts");
async function uploadArtifacts({
  videoPath,
  videoUploadUrl,
  screenshots,
  screenshotUploadUrls
}) {
  debug12("uploading artifacts: %o", {
    videoPath,
    videoUploadUrl,
    screenshots,
    screenshotUploadUrls
  });
  const totalUploads = (videoPath ? 1 : 0) + screenshots.length;
  if (totalUploads === 0) {
    return;
  }
  if (videoUploadUrl && videoPath) {
    await safe(
      uploadVideo,
      (e) => debug12("failed uploading video %s. Error: %o", videoPath, e),
      () => debug12("success uploading", videoPath)
    )(videoPath, videoUploadUrl);
  }
  if (screenshotUploadUrls.length) {
    await Promise.all(
      screenshots.map((screenshot) => {
        const url = screenshotUploadUrls.find(
          (urls) => urls.screenshotId === screenshot.screenshotId
        )?.uploadUrl;
        if (!url) {
          debug12(
            "No upload url for screenshot %o, screenshotUploadUrls: %o",
            screenshot,
            screenshotUploadUrls
          );
          warn("Cannot find upload url for screenshot: %s", screenshot.path);
          return Promise.resolve();
        }
        return safe(
          uploadImage,
          (e) => debug12(
            "failed uploading screenshot %s. Error: %o",
            screenshot.path,
            e
          ),
          () => debug12("success uploading", screenshot.path)
        )(screenshot.path, url);
      })
    );
  }
}
var uploadStdoutSafe = safe(
  updateInstanceStdout,
  () => {
  },
  () => {
  }
);

// lib/results/uploadResults.ts
init_capture();

// lib/env.ts
init_cjs_shims();
init_config();
var isCurrents = () => !!process.env.CURRENTS_ENFORCE_IS_CURRENTS || getAPIBaseUrl() === "https://cy.currents.dev";

// lib/results/uploadResults.ts
init_log();
var debug13 = (0, import_debug13.default)("currents:results");
async function getUploadResultsTask({
  instanceId,
  spec,
  runResult,
  output
}) {
  const run3 = runResult.runs.find((r) => r.spec.relative === spec);
  if (!run3) {
    warn('Cannot determine run result for spec "%s"', spec);
    return;
  }
  return processCypressResults(
    instanceId,
    {
      // replace the runs with the run for the specified spec
      ...runResult,
      runs: [run3]
    },
    output
  );
}
async function processCypressResults(instanceId, results, stdout2) {
  const run3 = results.runs[0];
  if (!run3) {
    throw new Error("No run found in Cypress results");
  }
  const instanceResults = getInstanceResultPayload(run3);
  const instanceTests = getInstanceTestsPayload(run3, results.config);
  const { videoUploadUrl, screenshotUploadUrls } = await reportResults(
    instanceId,
    instanceTests,
    instanceResults
  );
  debug13("instance %s artifact upload instructions %o", instanceId, {
    videoUploadUrl,
    screenshotUploadUrls
  });
  return Promise.all([
    uploadArtifacts({
      videoUploadUrl,
      videoPath: run3.video,
      screenshotUploadUrls,
      screenshots: instanceResults.screenshots
    }),
    uploadStdoutSafe(instanceId, getInitialOutput() + stdout2)
  ]);
}
async function reportResults(instanceId, instanceTests, instanceResults) {
  debug13("reporting instance %s results...", instanceId);
  if (isCurrents()) {
    return reportInstanceResultsMerged(instanceId, {
      tests: instanceTests,
      results: instanceResults
    });
  }
  await setInstanceTests(instanceId, instanceTests);
  return updateInstanceResults(instanceId, instanceResults);
}

// lib/runner.ts
init_cjs_shims();
init_capture();
var import_debug15 = __toESM(require("debug"));

// lib/cypress.ts
init_cjs_shims();
var import_cypress = __toESM(require("cypress"));
var import_debug14 = __toESM(require("debug"));
var debug14 = (0, import_debug14.default)("currents:cypress");
async function runSpecFile({ spec }, cypressRunOptions) {
  const runAPIOptions = getStrippedCypressOptions(cypressRunOptions);
  const options = {
    ...runAPIOptions,
    config: {
      ...runAPIOptions.config,
      trashAssetsBeforeRuns: false
    },
    env: {
      ...runAPIOptions.env,
      currents_ws: true
    },
    spec
  };
  debug14("running cypress with options %o", options);
  const result = await import_cypress.default.run(options);
  debug14("cypress run result %o", result);
  return result;
}
var runSpecFileSafe = async ({ spec }, cypressRunOptions) => {
  try {
    return await runSpecFile({ spec }, cypressRunOptions);
  } catch (error2) {
    debug14("cypress run exception %o", error2);
    return {
      status: "failed",
      failures: 1,
      message: `Cypress process crashed with an error:
${error2.message}
${error2.stack}}`
    };
  }
};

// lib/runner.ts
init_log();
Promise.resolve().then(() => init_init());
var debug15 = (0, import_debug15.default)("currents:runner");
async function runTillDone({
  runId,
  groupId,
  machineId,
  platform: platform2,
  config
}, params) {
  const summary = {};
  const uploadTasks = [];
  let hasMore = true;
  while (hasMore) {
    const newTasks = await runBatch({
      runMeta: {
        runId,
        groupId,
        machineId,
        platform: platform2
      },
      params,
      config
    });
    if (!newTasks.length) {
      debug15("No more tasks to run. Uploads queue: %d", uploadTasks.length);
      hasMore = false;
      break;
    }
    newTasks.forEach((task) => {
      if (task.summary.specSummary) {
        summary[task.summary.spec] = task.summary.specSummary;
      }
      uploadTasks.push(task.uploadTasks);
    });
  }
  await Promise.allSettled(uploadTasks);
  return summary;
}
async function runBatch({
  runMeta,
  config,
  params
}) {
  let batch = {
    specs: [],
    claimedInstances: 0,
    totalInstances: 0
  };
  if (isCurrents()) {
    debug15("Getting batched tasks: %d", params.batchSize);
    batch = await createBatchedInstances({
      ...runMeta,
      batchSize: params.batchSize
    });
  } else {
    const response = await createInstance(runMeta);
    if (response.spec !== null && response.instanceId !== null) {
      batch.specs.push({
        spec: response.spec,
        instanceId: response.instanceId
      });
    }
    batch.claimedInstances = response.claimedInstances;
    batch.totalInstances = response.totalInstances;
  }
  if (batch.specs.length === 0) {
    return [];
  }
  divider();
  info(
    "Running: %s (%d/%d)",
    batch.specs.map((s) => s.spec).join(", "),
    batch.claimedInstances,
    batch.totalInstances
  );
  const rawResult = await runSpecFileSafe(
    { spec: batch.specs.map((s) => s.spec).join(",") },
    params
  );
  const normalizedResult = normalizeRawResult(
    rawResult,
    batch.specs.map((s) => s.spec),
    config
  );
  title("blue", "Reporting results and artifacts in background...");
  const output = getCapturedOutput();
  resetCapture();
  const batchResult = batch.specs.map((spec) => {
    const specSummary = getSummaryForSpec(spec.spec, normalizedResult);
    if (!specSummary) {
      warn('Cannot find run result for spec "%s"', spec.spec);
    }
    return {
      summary: {
        spec: spec.spec,
        specSummary
      },
      uploadTasks: getUploadResultsTask({
        ...spec,
        runResult: normalizedResult,
        output
      }).catch(error)
    };
  });
  return batchResult;
}

// lib/specMatcher/index.ts
init_cjs_shims();

// lib/specMatcher/getSpecFiles.ts
init_cjs_shims();
init_log();

// lib/specMatcher/specMatcher.ts
init_cjs_shims();
var import_debug16 = __toESM(require("debug"));
var import_path3 = __toESM(require("path"));
var import_common_path_prefix = __toESM(require("common-path-prefix"));
var import_globby = __toESM(require("globby"));
var import_lodash9 = __toESM(require("lodash"));
var import_os2 = __toESM(require("os"));
var debug16 = (0, import_debug16.default)("currents:specs");
async function findSpecs({
  projectRoot,
  testingType,
  specPattern,
  configSpecPattern,
  excludeSpecPattern,
  additionalIgnorePattern
}) {
  configSpecPattern = toArray(configSpecPattern);
  specPattern = toArray(specPattern);
  excludeSpecPattern = toArray(excludeSpecPattern) || [];
  additionalIgnorePattern = toArray(additionalIgnorePattern) || [];
  debug16("exploring spec files for execution %O", {
    testingType,
    projectRoot,
    specPattern,
    configSpecPattern,
    excludeSpecPattern,
    additionalIgnorePattern
  });
  if (!specPattern || !configSpecPattern) {
    throw Error("Could not find glob patterns for exploring specs");
  }
  let specAbsolutePaths = await getFilesByGlob(projectRoot, specPattern, {
    absolute: true,
    ignore: [...excludeSpecPattern, ...additionalIgnorePattern]
  });
  if (!import_lodash9.default.isEqual(specPattern, configSpecPattern)) {
    const defaultSpecAbsolutePaths = await getFilesByGlob(
      projectRoot,
      configSpecPattern,
      {
        absolute: true,
        ignore: [...excludeSpecPattern, ...additionalIgnorePattern]
      }
    );
    specAbsolutePaths = import_lodash9.default.intersection(
      specAbsolutePaths,
      defaultSpecAbsolutePaths
    );
  }
  return matchedSpecs({
    projectRoot,
    testingType,
    specAbsolutePaths,
    specPattern
  });
}
async function getFilesByGlob(cwd, glob, globOptions) {
  const globs = [].concat(glob).map((globPattern) => {
    const workingDirectoryPrefix = import_path3.default.join(cwd, import_path3.default.sep);
    if (globPattern.startsWith(workingDirectoryPrefix)) {
      return globPattern.replace(workingDirectoryPrefix, "");
    }
    return globPattern;
  });
  const ignoreGlob = (globOptions?.ignore ?? []).concat("**/node_modules/**");
  if (import_os2.default.platform() === "win32") {
    debug16("updating glob patterns to POSIX");
    for (const i in globs) {
      const cur = globs[i];
      if (!cur)
        throw new Error("undefined glob received");
      globs[i] = toPosix(cur);
    }
  }
  try {
    debug16("globbing pattern(s): %o", globs);
    debug16("within directory: %s", cwd);
    const files = await matchGlobs(globs, {
      onlyFiles: true,
      absolute: true,
      cwd,
      ...globOptions,
      ignore: ignoreGlob
    });
    return files;
  } catch (e) {
    debug16("error in getFilesByGlob %o", e);
    return [];
  }
}
var matchGlobs = async (globs, globbyOptions) => {
  return await (0, import_globby.default)(globs, globbyOptions);
};
function matchedSpecs({
  projectRoot,
  testingType,
  specAbsolutePaths
}) {
  debug16("found specs %o", specAbsolutePaths);
  let commonRoot = "";
  if (specAbsolutePaths.length === 1) {
    commonRoot = import_path3.default.dirname(specAbsolutePaths[0]);
  } else {
    commonRoot = (0, import_common_path_prefix.default)(specAbsolutePaths);
  }
  const specs = specAbsolutePaths.map((absolute) => {
    return transformSpec({
      projectRoot,
      absolute,
      testingType,
      commonRoot,
      platform: import_os2.default.platform(),
      sep: import_path3.default.sep
    });
  });
  return specs;
}
function transformSpec({
  projectRoot,
  absolute,
  testingType,
  commonRoot,
  platform: platform2,
  sep
}) {
  if (platform2 === "win32") {
    absolute = toPosix(absolute, sep);
    projectRoot = toPosix(projectRoot, sep);
  }
  const relative = import_path3.default.relative(projectRoot, absolute);
  const parsedFile = import_path3.default.parse(absolute);
  const fileExtension = import_path3.default.extname(absolute);
  const specFileExtension = [".spec", ".test", "-spec", "-test", ".cy"].map((ext) => ext + fileExtension).find((ext) => absolute.endsWith(ext)) || fileExtension;
  const parts = absolute.split(projectRoot);
  let name = parts[parts.length - 1] || "";
  if (name.startsWith("/")) {
    name = name.slice(1);
  }
  const LEADING_SLASH = /^\/|/g;
  const relativeToCommonRoot = absolute.replace(commonRoot, "").replace(LEADING_SLASH, "");
  return {
    fileExtension,
    baseName: parsedFile.base,
    fileName: parsedFile.base.replace(specFileExtension, ""),
    specFileExtension,
    relativeToCommonRoot,
    specType: testingType === "component" ? "component" : "integration",
    name,
    relative,
    absolute
  };
}

// lib/specMatcher/getSpecFiles.ts
var getSpecPattern = (configPattern, explicit) => explicit || configPattern;
var getSpecFiles = async ({
  config,
  params
}) => {
  const specPattern = getSpecPattern(config.specPattern, params.spec);
  const specs = await findSpecs({
    projectRoot: config.projectRoot,
    testingType: params.testingType,
    specPattern,
    configSpecPattern: config.specPattern,
    excludeSpecPattern: config.excludeSpecPattern,
    additionalIgnorePattern: config.additionalIgnorePattern
  });
  if (specs.length === 0) {
    warn("No spec files found to execute. Configuration: %O", {
      specPattern,
      configSpecPattern: config.specPattern,
      excludeSpecPattern: [
        config.excludeSpecPattern,
        config.additionalIgnorePattern
      ].flat(2),
      testingType: params.testingType
    });
    return { specs: [], specPattern };
  }
  return { specs, specPattern };
};

// lib/run.ts
var debug17 = (0, import_debug17.default)("currents:run");
async function run(params) {
  debug17("run params %o", params);
  const validatedParams = validateParams(params);
  setAPIBaseUrl(validatedParams.cloudServiceUrl);
  const {
    recordKey,
    projectId,
    group,
    parallel,
    ciBuildId,
    tag,
    testingType,
    batchSize
  } = validatedParams;
  const config = await getMergedConfig(validatedParams);
  const { specs, specPattern } = await getSpecFiles({
    config,
    params: validatedParams
  });
  if (specs.length === 0) {
    return;
  }
  const platform2 = await getPlatform({
    config,
    browser: validatedParams.browser
  });
  divider();
  info("Discovered %d spec files", specs.length);
  info(
    `Tags: ${tag?.join(",") ?? false}; Group: ${group ?? false}; Parallel: ${parallel ?? false}; Batch Size: ${batchSize}`
  );
  info("Connecting to cloud orchestration service...");
  const run3 = await createRun({
    ci: getCI(ciBuildId),
    specs: specs.map((spec) => spec.relative),
    commit: await getGitInfo(config.projectRoot),
    group,
    platform: platform2,
    parallel: parallel ?? false,
    ciBuildId,
    projectId,
    recordKey,
    specPattern: [specPattern].flat(2),
    tags: tag,
    testingType,
    batchSize
  });
  info("\u{1F3A5} Run URL:", bold(run3.runUrl));
  setRunId(run3.runId);
  cutInitialOutput();
  const results = await runTillDone(
    {
      runId: run3.runId,
      groupId: run3.groupId,
      machineId: run3.machineId,
      platform: platform2,
      config
    },
    validatedParams
  );
  divider();
  const summary = summarizeTestResults(Object.values(results), config);
  title("white", "Cloud Run Finished");
  console.log(summaryTable(summary));
  info("\u{1F3C1} Recorded Run:", bold(run3.runUrl));
  spacer();
  return summary;
}

// index.ts
function run2(params) {
  return run(params);
}
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {
  run
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RzdXAvYXNzZXRzL2Nqc19zaGltcy5qcyIsICIuLi9saWIvaHR0cENsaWVudC9jb25maWcudHMiLCAiLi4vbGliL2Vycm9ycy50cyIsICIuLi9saWIvbG9nLnRzIiwgIi4uL2xpYi9odHRwQ2xpZW50L3ByaW50RXJyb3JzLnRzIiwgIi4uL2xpYi9odHRwQ2xpZW50L2h0dHBDbGllbnQudHMiLCAiLi4vbGliL2h0dHBDbGllbnQvaW5kZXgudHMiLCAiLi4vbGliL2NhcHR1cmUudHMiLCAiLi4vbGliL3JlcXVpcmUudHMiLCAiLi4vbGliL3N0ZG91dC50cyIsICIuLi9saWIvd3MudHMiLCAiLi4vbGliL2luaXQudHMiLCAiLi4vaW5kZXgudHMiLCAiLi4vbGliL3J1bi50cyIsICIuLi9saWIvYXBpL2luZGV4LnRzIiwgIi4uL2xpYi9hcGkvYXBpLnRzIiwgIi4uL2xpYi9hcGkvd2FybmluZ3MudHMiLCAiLi4vbGliL2FwaS90eXBlcy9pbmRleC50cyIsICIuLi9saWIvYXBpL3R5cGVzL2luc3RhbmNlLnRzIiwgIi4uL2xpYi9hcGkvdHlwZXMvcnVuLnRzIiwgIi4uL2xpYi9hcGkvdHlwZXMvdGVzdC50cyIsICIuLi9saWIvY2lQcm92aWRlci50cyIsICIuLi9saWIvY29uZmlnL2luZGV4LnRzIiwgIi4uL2xpYi9jb25maWcvY29uZmlnLnRzIiwgIi4uL2xpYi9ib290c3RyYXAvYm9vdHN0cmFwLnRzIiwgIi4uL2xpYi9mcy50cyIsICIuLi9saWIvYm9vdHN0cmFwL3NlcmlhbGl6ZXIudHMiLCAiLi4vbGliL3V0aWxzLnRzIiwgIi4uL2xpYi9jb25maWcvcGFyYW1zLnRzIiwgIi4uL2xpYi9naXQudHMiLCAiLi4vbGliL3BsYXRmb3JtL2luZGV4LnRzIiwgIi4uL2xpYi9wbGF0Zm9ybS9icm93c2VyLnRzIiwgIi4uL2xpYi9wbGF0Zm9ybS9wbGF0Zm9ybS50cyIsICIuLi9saWIvcmVzdWx0cy9pbmRleC50cyIsICIuLi9saWIvcmVzdWx0cy9yZXN1bHRzLnRzIiwgIi4uL2xpYi9yZXN1bHRzL3RhYmxlLnRzIiwgIi4uL2xpYi9yZXN1bHRzL3VwbG9hZFJlc3VsdHMudHMiLCAiLi4vbGliL2FydGlmYWN0cy50cyIsICIuLi9saWIvbGFuZy50cyIsICIuLi9saWIvdXBsb2FkLnRzIiwgIi4uL2xpYi9lbnYudHMiLCAiLi4vbGliL3J1bm5lci50cyIsICIuLi9saWIvY3lwcmVzcy50cyIsICIuLi9saWIvc3BlY01hdGNoZXIvaW5kZXgudHMiLCAiLi4vbGliL3NwZWNNYXRjaGVyL2dldFNwZWNGaWxlcy50cyIsICIuLi9saWIvc3BlY01hdGNoZXIvc3BlY01hdGNoZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8vIFNoaW0gZ2xvYmFscyBpbiBjanMgYnVuZGxlXG4vLyBUaGVyZSdzIGEgd2VpcmQgYnVnIHRoYXQgZXNidWlsZCB3aWxsIGFsd2F5cyBpbmplY3QgaW1wb3J0TWV0YVVybFxuLy8gaWYgd2UgZXhwb3J0IGl0IGFzIGBjb25zdCBpbXBvcnRNZXRhVXJsID0gLi4uIF9fZmlsZW5hbWUgLi4uYFxuLy8gQnV0IHVzaW5nIGEgZnVuY3Rpb24gd2lsbCBub3QgY2F1c2UgdGhpcyBpc3N1ZVxuXG5jb25zdCBnZXRJbXBvcnRNZXRhVXJsID0gKCkgPT5cbiAgdHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJ1xuICAgID8gbmV3IFVSTCgnZmlsZTonICsgX19maWxlbmFtZSkuaHJlZlxuICAgIDogKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQgJiYgZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmMpIHx8XG4gICAgICBuZXcgVVJMKCdtYWluLmpzJywgZG9jdW1lbnQuYmFzZVVSSSkuaHJlZlxuXG5leHBvcnQgY29uc3QgaW1wb3J0TWV0YVVybCA9IC8qIEBfX1BVUkVfXyAqLyBnZXRJbXBvcnRNZXRhVXJsKClcbiIsICJpbXBvcnQgeyBBeGlvc0Vycm9yLCBpc0F4aW9zRXJyb3IgfSBmcm9tIFwiYXhpb3NcIjtcblxuZXhwb3J0IGNvbnN0IGlzUmV0cmlhYmxlRXJyb3IgPSAoZXJyOiBBeGlvc0Vycm9yKTogYm9vbGVhbiA9PiB7XG4gIGlmICghaXNBeGlvc0Vycm9yKGVycikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGVyci5jb2RlID09PSBcIkVDT05OUkVGVVNFRFwiKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuICEhKFxuICAgIGVycj8ucmVzcG9uc2U/LnN0YXR1cyAmJlxuICAgIDUwMCA8PSBlcnIucmVzcG9uc2Uuc3RhdHVzICYmXG4gICAgZXJyLnJlc3BvbnNlLnN0YXR1cyA8IDYwMFxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldERlbGF5ID0gKGk6IG51bWJlcikgPT4gWzE1ICogMTAwMCwgMzAgKiAxMDAwLCA2MCAqIDEwMDBdW2kgLSAxXTtcblxubGV0IGJhc2VVUkwgPSBcImh0dHBzOi8vY3kuY3VycmVudHMuZGV2XCI7XG5leHBvcnQgY29uc3QgZ2V0QVBJQmFzZVVybCA9ICgpID0+IGJhc2VVUkwgPz8gXCJodHRwczovL2N5LmN1cnJlbnRzLmRldlwiO1xuZXhwb3J0IGNvbnN0IHNldEFQSUJhc2VVcmwgPSAodXJsPzogc3RyaW5nKSA9PlxuICAoYmFzZVVSTCA9IHVybCA/PyBcImh0dHBzOi8vY3kuY3VycmVudHMuZGV2XCIpO1xuIiwgImV4cG9ydCBjbGFzcyBWYWxpZGF0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9IFwiXCI7XG4gIH1cbn1cbiIsICJpbXBvcnQgY2hhbGsgZnJvbSBcImNoYWxrXCI7XG5pbXBvcnQgdXRpbCBmcm9tIFwidXRpbFwiO1xuXG5jb25zdCBsb2cgPSAoLi4uYXJnczogdW5rbm93bltdKSA9PiBjb25zb2xlLmxvZyh1dGlsLmZvcm1hdCguLi5hcmdzKSk7XG5cbmV4cG9ydCBjb25zdCBpbmZvID0gbG9nO1xuXG5leHBvcnQgY29uc3Qgd2l0aEVycm9yID0gKG1zZzogc3RyaW5nKSA9PlxuICBjaGFsay5iZ1JlZC53aGl0ZShcIiBFUlJPUiBcIikgKyBcIiBcIiArIG1zZztcbmV4cG9ydCBjb25zdCB3aXRoV2FybmluZyA9IChtc2c6IHN0cmluZykgPT5cbiAgY2hhbGsuYmdZZWxsb3cuYmxhY2soXCIgV0FSTklORyBcIikgKyBcIiBcIiArIG1zZztcblxuZXhwb3J0IGNvbnN0IHdhcm4gPSAoLi4uYXJnczogdW5rbm93bltdKSA9PlxuICBsb2cod2l0aFdhcm5pbmcodXRpbC5mb3JtYXQoLi4uYXJncykpKTtcblxuZXhwb3J0IGNvbnN0IHN1Y2Nlc3MgPSAoLi4uYXJnczogdW5rbm93bltdKSA9PlxuICBsb2coY2hhbGsuZ3JlZW4odXRpbC5mb3JtYXQoLi4uYXJncykpKTtcblxuZXhwb3J0IGNvbnN0IGVycm9yID0gKC4uLmFyZ3M6IHVua25vd25bXSkgPT5cbiAgbG9nKHdpdGhFcnJvcih1dGlsLmZvcm1hdCguLi5hcmdzKSkgKyBcIlxcblwiKTtcblxudHlwZSBDb2xvciA9IFwicmVkXCIgfCBcImdyZWVuXCIgfCBcInllbGxvd1wiIHwgXCJibHVlXCIgfCBcIm1hZ2VudGFcIiB8IFwiY3lhblwiIHwgXCJ3aGl0ZVwiO1xuZXhwb3J0IGNvbnN0IHRpdGxlID0gKGNvbG9yOiBDb2xvciwgLi4uYXJnczogdW5rbm93bltdKSA9PlxuICBpbmZvKFwiXFxuXCIgKyBcIiAgXCIgKyBjaGFsa1tjb2xvcl0uYm9sZCh1dGlsLmZvcm1hdCguLi5hcmdzKSkgKyBcIiAgXCIgKyBcIlxcblwiKTtcblxuZXhwb3J0IGNvbnN0IGRpdmlkZXIgPSAoKSA9PlxuICBjb25zb2xlLmxvZyhcIlxcblwiICsgY2hhbGsuZ3JheShBcnJheSgxMDApLmZpbGwoXCI9XCIpLmpvaW4oXCJcIikpICsgXCJcXG5cIik7XG5cbmV4cG9ydCBjb25zdCBzcGFjZXIgPSAobjogbnVtYmVyID0gMCkgPT5cbiAgY29uc29sZS5sb2coQXJyYXkobikuZmlsbChcIlwiKS5qb2luKFwiXFxuXCIpKTtcblxuZXhwb3J0IGNvbnN0IGN5YW4gPSBjaGFsay5jeWFuO1xuZXhwb3J0IGNvbnN0IGJsdWUgPSBjaGFsay5ibHVlQnJpZ2h0O1xuZXhwb3J0IGNvbnN0IHJlZCA9IGNoYWxrLnJlZDtcbmV4cG9ydCBjb25zdCBncmVlbiA9IGNoYWxrLmdyZWVuQnJpZ2h0O1xuZXhwb3J0IGNvbnN0IGdyYXkgPSBjaGFsay5ncmF5O1xuZXhwb3J0IGNvbnN0IHdoaXRlID0gY2hhbGsud2hpdGU7XG5leHBvcnQgY29uc3QgbWFnZW50YSA9IGNoYWxrLm1hZ2VudGE7XG5leHBvcnQgY29uc3QgYm9sZCA9IGNoYWxrLmJvbGQ7XG4iLCAiaW1wb3J0IHsgQXhpb3NFcnJvciB9IGZyb20gXCJheGlvc1wiO1xuaW1wb3J0IF8gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IHsgc3BhY2VyLCB3YXJuIH0gZnJvbSBcIi4uL2xvZ1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gbWF5YmVQcmludEVycm9ycyhcbiAgZXJyOiBBeGlvc0Vycm9yPHsgbWVzc2FnZTogc3RyaW5nOyBlcnJvcnM/OiBzdHJpbmdbXSB9PlxuKSB7XG4gIGlmICghZXJyLnJlc3BvbnNlPy5kYXRhIHx8ICFlcnIucmVzcG9uc2U/LnN0YXR1cykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHsgbWVzc2FnZSwgZXJyb3JzIH0gPSBlcnIucmVzcG9uc2UuZGF0YTtcblxuICBzd2l0Y2ggKGVyci5yZXNwb25zZS5zdGF0dXMpIHtcbiAgICBjYXNlIDQwMTpcbiAgICAgIHdhcm4oXCJSZWNlaXZlZCA0MDEgVW5hdXRob3JpemVkXCIpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA0MjI6XG4gICAgICBzcGFjZXIoMSk7XG4gICAgICB3YXJuKC4uLmZvcm1hdEdlbmVyaWNFcnJvcihtZXNzYWdlLCBlcnJvcnMpKTtcbiAgICAgIHNwYWNlcigxKTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBicmVhaztcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0R2VuZXJpY0Vycm9yKFxuICBtZXNzYWdlPzogc3RyaW5nLFxuICBlcnJvcnM/OiBzdHJpbmdbXVxuKTogc3RyaW5nW10ge1xuICBpZiAoIV8uaXNTdHJpbmcobWVzc2FnZSkpIHtcbiAgICByZXR1cm4gW1wiVW5leHBlY3RlZCBlcnJvciBmcm9tIHRoZSBjbG91ZCBzZXJ2aWNlXCJdO1xuICB9XG5cbiAgaWYgKGVycm9ycz8ubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFttZXNzYWdlIGFzIHN0cmluZ107XG4gIH1cbiAgcmV0dXJuIFtcbiAgICBtZXNzYWdlIGFzIHN0cmluZyxcbiAgICBgXG4keyhlcnJvcnMgPz8gW10pLm1hcCgoZSkgPT4gYCAgLSAke2V9YCkuam9pbihcIlxcblwiKX1cbmAsXG4gIF07XG59XG4iLCAiaW1wb3J0IGF4aW9zLCB7XG4gIEF4aW9zRXJyb3IsXG4gIEF4aW9zSW5zdGFuY2UsXG4gIEF4aW9zUmVxdWVzdENvbmZpZyxcbiAgQXhpb3NSZXNwb25zZSxcbn0gZnJvbSBcImF4aW9zXCI7XG5pbXBvcnQgYXhpb3NSZXRyeSBmcm9tIFwiYXhpb3MtcmV0cnlcIjtcbmltcG9ydCBEZWJ1ZyBmcm9tIFwiZGVidWdcIjtcbmltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCBwcmV0dHlNaWxsaXNlY29uZHMgZnJvbSBcInByZXR0eS1tc1wiO1xuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSBcIi4uL2Vycm9yc1wiO1xuaW1wb3J0IHsgd2FybiB9IGZyb20gXCIuLi9sb2dcIjtcbmltcG9ydCB7IGdldEFQSUJhc2VVcmwsIGdldERlbGF5LCBpc1JldHJpYWJsZUVycm9yIH0gZnJvbSBcIi4vY29uZmlnXCI7XG5pbXBvcnQgeyBtYXliZVByaW50RXJyb3JzIH0gZnJvbSBcIi4vcHJpbnRFcnJvcnNcIjtcblxuY29uc3QgZGVidWcgPSBEZWJ1ZyhcImN1cnJlbnRzOmFwaVwiKTtcblxuY29uc3QgTUFYX1JFVFJJRVMgPSAzO1xuXG5sZXQgX2NsaWVudDogQXhpb3NJbnN0YW5jZSB8IG51bGwgPSBudWxsO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2xpZW50KCkge1xuICBpZiAoX2NsaWVudCkge1xuICAgIHJldHVybiBfY2xpZW50O1xuICB9XG4gIF9jbGllbnQgPSBheGlvcy5jcmVhdGUoe1xuICAgIGJhc2VVUkw6IGdldEFQSUJhc2VVcmwoKSxcbiAgfSk7XG5cbiAgX2NsaWVudC5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoKGNvbmZpZykgPT4ge1xuICAgIGNvbnN0IHJlcSA9IHtcbiAgICAgIC4uLmNvbmZpZyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIC4uLmNvbmZpZy5oZWFkZXJzLFxuXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgXCJ4LWN5cHJlc3MtcmVxdWVzdC1hdHRlbXB0XCI6IGNvbmZpZ1tcImF4aW9zLXJldHJ5XCJdPy5yZXRyeUNvdW50ID8/IDAsXG4gICAgICAgIFwieC1jeXByZXNzLXJ1bi1pZFwiOiBfcnVuSWQsXG4gICAgICAgIFwieC1jeXByZXNzLXZlcnNpb25cIjogX2N5cHJlc3NWZXJzaW9uLFxuICAgICAgICBcIngtY2N5LXZlcnNpb25cIjogX2N1cnJlbnRzVmVyc2lvbiA/PyBcIjAuMC4wXCIsXG4gICAgICB9LFxuICAgIH07XG4gICAgZGVidWcoXCJuZXR3b3JrIHJlcXVlc3Q6ICVvXCIsIHJlcSk7XG4gICAgcmV0dXJuIHJlcTtcbiAgfSk7XG5cbiAgYXhpb3NSZXRyeShfY2xpZW50LCB7XG4gICAgcmV0cmllczogTUFYX1JFVFJJRVMsXG4gICAgcmV0cnlDb25kaXRpb246IGlzUmV0cmlhYmxlRXJyb3IsXG4gICAgcmV0cnlEZWxheTogZ2V0RGVsYXksXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIG9uUmV0cnksXG4gIH0pO1xuICByZXR1cm4gX2NsaWVudDtcbn1cblxubGV0IF9ydW5JZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGNvbnN0IHNldFJ1bklkID0gKHJ1bklkOiBzdHJpbmcpID0+IHtcbiAgX3J1bklkID0gcnVuSWQ7XG59O1xuXG5sZXQgX2N5cHJlc3NWZXJzaW9uOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgY29uc3Qgc2V0Q3lwcmVzc1ZlcnNpb24gPSAoY3lwcmVzc1ZlcnNpb246IHN0cmluZykgPT4ge1xuICBfY3lwcmVzc1ZlcnNpb24gPSBjeXByZXNzVmVyc2lvbjtcbn07XG5cbmxldCBfY3VycmVudHNWZXJzaW9uOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgY29uc3Qgc2V0Q3VycmVudHNWZXJzaW9uID0gKHY6IHN0cmluZykgPT4ge1xuICBfY3VycmVudHNWZXJzaW9uID0gdjtcbn07XG5cbmZ1bmN0aW9uIG9uUmV0cnkoXG4gIHJldHJ5Q291bnQ6IG51bWJlcixcbiAgZXJyOiBBeGlvc0Vycm9yPHsgbWVzc2FnZTogc3RyaW5nOyBlcnJvcnM/OiBzdHJpbmdbXSB9PixcbiAgX2NvbmZpZzogQXhpb3NSZXF1ZXN0Q29uZmlnXG4pIHtcbiAgd2FybihcbiAgICBcIk5ldHdvcmsgcmVxdWVzdCBmYWlsZWQ6ICclcycuIE5leHQgYXR0ZW1wdCBpcyBpbiAlcyAoJWQvJWQpLlwiLFxuICAgIGVyci5tZXNzYWdlLFxuICAgIHByZXR0eU1pbGxpc2Vjb25kcyhnZXREZWxheShyZXRyeUNvdW50KSksXG4gICAgcmV0cnlDb3VudCxcbiAgICBNQVhfUkVUUklFU1xuICApO1xufVxuXG5leHBvcnQgY29uc3QgbWFrZVJlcXVlc3QgPSA8VCA9IGFueSwgRCA9IGFueT4oXG4gIGNvbmZpZzogQXhpb3NSZXF1ZXN0Q29uZmlnPEQ+XG4pID0+IHtcbiAgcmV0dXJuIGdldENsaWVudCgpPEQsIEF4aW9zUmVzcG9uc2U8VD4+KGNvbmZpZylcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBkZWJ1ZyhcIm5ldHdvcmsgcmVxdWVzdCByZXNwb25zZTogJW9cIiwgXy5vbWl0KHJlcywgXCJyZXF1ZXN0XCIsIFwiY29uZmlnXCIpKTtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICBtYXliZVByaW50RXJyb3JzKGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gICAgfSk7XG59O1xuIiwgImV4cG9ydCAqIGZyb20gXCIuL2NvbmZpZ1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vaHR0cENsaWVudFwiO1xuIiwgImltcG9ydCBEZWJ1ZyBmcm9tIFwiZGVidWdcIjtcbmNvbnN0IGRlYnVnID0gRGVidWcoXCJjdXJyZW50czpjYXB0dXJlXCIpO1xuXG5jb25zdCBfd3JpdGUgPSBwcm9jZXNzLnN0ZG91dC53cml0ZTtcbmNvbnN0IF9sb2cgPSBwcm9jZXNzLmxvZztcblxuZXhwb3J0IGNvbnN0IHJlc3RvcmUgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIHJlc3RvcmUgdG8gdGhlIG9yaWdpbmFsc1xuICBwcm9jZXNzLnN0ZG91dC53cml0ZSA9IF93cml0ZTtcbiAgcHJvY2Vzcy5sb2cgPSBfbG9nO1xufTtcblxuY29uc3QgbG9nczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge307XG5cbmNvbnN0IHN0ZG91dCA9IGZ1bmN0aW9uICgpIHtcbiAgZGVidWcoXCJjYXB0dXJpbmcgc3Rkb3V0XCIpO1xuICBsZXQgbG9nczogc3RyaW5nW10gPSBbXTtcblxuICAvLyBsYXppbHkgYmFja3VwIHdyaXRlIHRvIGVuYWJsZSBpbmplY3Rpb25cbiAgY29uc3QgeyB3cml0ZSB9ID0gcHJvY2Vzcy5zdGRvdXQ7XG4gIGNvbnN0IHsgbG9nIH0gPSBwcm9jZXNzO1xuXG4gIC8vIGVsZWN0cm9uIGFkZHMgYSBuZXcgcHJvY2Vzcy5sb2dcbiAgLy8gbWV0aG9kIGZvciB3aW5kb3dzIGluc3RlYWQgb2YgcHJvY2Vzcy5zdGRvdXQud3JpdGVcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2N5cHJlc3MtaW8vY3lwcmVzcy9pc3N1ZXMvOTc3XG4gIGlmIChsb2cpIHtcbiAgICBwcm9jZXNzLmxvZyA9IGZ1bmN0aW9uIChzdHI6IHN0cmluZykge1xuICAgICAgbG9ncy5wdXNoKHN0cik7XG5cbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItcmVzdC1wYXJhbXNcbiAgICAgIHJldHVybiBsb2cuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG5cbiAgcHJvY2Vzcy5zdGRvdXQud3JpdGUgPSBmdW5jdGlvbiAoc3RyOiBzdHJpbmcpIHtcbiAgICBsb2dzLnB1c2goc3RyKTtcblxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLXJlc3QtcGFyYW1zXG4gICAgcmV0dXJuIHdyaXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICB0b1N0cmluZygpIHtcbiAgICAgIHJldHVybiBsb2dzLmpvaW4oXCJcIik7XG4gICAgfSxcbiAgICBkYXRhOiBsb2dzLFxuICAgIHJlc3RvcmUsXG4gICAgcmVzZXQ6ICgpID0+IHtcbiAgICAgIGRlYnVnKFwicmVzZXR0aW5nIGNhcHR1cmVkIHN0ZG91dFwiKTtcbiAgICAgIGxvZ3MgPSBbXTtcbiAgICB9LFxuICB9O1xufTtcblxubGV0IGluaXRpYWxPdXRwdXQ6IHN0cmluZyA9IFwiXCI7XG5sZXQgY2FwdHVyZWRPdXRwdXQ6IG51bGwgfCBSZXR1cm5UeXBlPHR5cGVvZiBzdGRvdXQ+ID0gbnVsbDtcblxuZXhwb3J0IGNvbnN0IGluaXRDYXB0dXJlID0gKCkgPT4gKGNhcHR1cmVkT3V0cHV0ID0gc3Rkb3V0KCkpO1xuXG5leHBvcnQgY29uc3QgY3V0SW5pdGlhbE91dHB1dCA9ICgpID0+IHtcbiAgaWYgKCFjYXB0dXJlZE91dHB1dCkgdGhyb3cgbmV3IEVycm9yKFwiY2FwdHVyZWRPdXRwdXQgaXMgbnVsbFwiKTtcbiAgaW5pdGlhbE91dHB1dCA9IGNhcHR1cmVkT3V0cHV0LnRvU3RyaW5nKCk7XG4gIGNhcHR1cmVkT3V0cHV0LnJlc2V0KCk7XG59O1xuZXhwb3J0IGNvbnN0IHJlc2V0Q2FwdHVyZSA9ICgpID0+IHtcbiAgaWYgKCFjYXB0dXJlZE91dHB1dCkgdGhyb3cgbmV3IEVycm9yKFwiY2FwdHVyZWRPdXRwdXQgaXMgbnVsbFwiKTtcbiAgY2FwdHVyZWRPdXRwdXQucmVzZXQoKTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRDYXB0dXJlZE91dHB1dCA9ICgpID0+IHtcbiAgaWYgKCFjYXB0dXJlZE91dHB1dCkgdGhyb3cgbmV3IEVycm9yKFwiY2FwdHVyZWRPdXRwdXQgaXMgbnVsbFwiKTtcbiAgcmV0dXJuIGNhcHR1cmVkT3V0cHV0LnRvU3RyaW5nKCk7XG59O1xuZXhwb3J0IGNvbnN0IGdldEluaXRpYWxPdXRwdXQgPSAoKSA9PiBpbml0aWFsT3V0cHV0O1xuIiwgImltcG9ydCB7IGNyZWF0ZVJlcXVpcmUgfSBmcm9tIFwibW9kdWxlXCI7XG4vLyByZXF1aXJlcyBzaGltPXRydWUgaW4gcGFja2FnZS5qc29uXG5leHBvcnQgY29uc3QgcmVxdWlyZSA9IGNyZWF0ZVJlcXVpcmUoaW1wb3J0Lm1ldGEudXJsKTtcbiIsICJpbXBvcnQgY3AgZnJvbSBcImNoaWxkX3Byb2Nlc3NcIjtcbmNvbnN0IG9yZ2luYWwgPSBjcC5zcGF3bjtcblxuLy8gQHRzLWlnbm9yZVxuY3Auc3Bhd24gPSBmdW5jdGlvbiAoY29tbWFuZCwgYXJncywgb3B0aW9ucykge1xuICAvLyBAdHMtaWdub3JlXG4gIGlmIChjb21tYW5kLm1hdGNoKC9DeXByZXNzLykpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgcHJvY2VzcyA9IG9yZ2luYWwoY29tbWFuZCwgYXJncywge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIC8vIHVzaW5nIHBpcGUgZW5hYmxlcyBjYXB0dXJpbmcgc3Rkb3V0IGFuZCBzdGRlcnJcbiAgICAgIHN0ZGlvOiBbXCJwaXBlXCIsIFwicGlwZVwiLCBcInBpcGVcIl0sXG4gICAgfSk7XG4gICAgcmV0dXJuIHByb2Nlc3M7XG4gIH1cblxuICAvLyBAdHMtaWdub3JlXG4gIHJldHVybiBvcmdpbmFsKGNvbW1hbmQsIGFyZ3MsIG9wdGlvbnMpO1xufTtcbiIsICIvLyBwbHVnIGZvciBmdXR1cmUgd2Vic29ja2V0IHNlcnZlclxuIiwgImltcG9ydCB7IHJlcXVpcmUgfSBmcm9tIFwiLi4vbGliL3JlcXVpcmVcIjtcbmltcG9ydCBcIi4vc3Rkb3V0XCI7XG5pbXBvcnQgXCIuL3dzXCI7XG5cbmNvbnN0IGN5cHJlc3NQa2cgPSByZXF1aXJlKFwiY3lwcmVzcy9wYWNrYWdlLmpzb25cIik7XG5jb25zdCBwa2cgPSByZXF1aXJlKFwiY3lwcmVzcy1jbG91ZC9wYWNrYWdlLmpzb25cIik7XG5cbmltcG9ydCB7IGluaXRDYXB0dXJlIH0gZnJvbSBcIi4vY2FwdHVyZVwiO1xuaW1wb3J0IHsgc2V0Q3VycmVudHNWZXJzaW9uLCBzZXRDeXByZXNzVmVyc2lvbiB9IGZyb20gXCIuL2h0dHBDbGllbnRcIjtcblxuaW5pdENhcHR1cmUoKTtcbnNldEN5cHJlc3NWZXJzaW9uKGN5cHJlc3NQa2cudmVyc2lvbik7XG5zZXRDdXJyZW50c1ZlcnNpb24ocGtnLnZlcnNpb24pO1xuIiwgImltcG9ydCBcInNvdXJjZS1tYXAtc3VwcG9ydC9yZWdpc3Rlci5qc1wiO1xuXG5pbXBvcnQgeyBydW4gYXMgaW50ZXJuYWxSdW4gfSBmcm9tIFwiLi9saWIvcnVuXCI7XG5pbXBvcnQgeyBDdXJyZW50c1J1bkFQSSB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbi8qKlxuICogUnVuIEN5cHJlc3MgdGVzdHMgd2l0aCBhIGNsb3VkIHNlcnZpY2Ugb2YgeW91ciBjaG9pY2UgYW5kIHJldHVybiB0aGUgcmVzdWx0c1xuICpcbiAqIEBhdWdtZW50cyBDdXJyZW50c1J1bkFQSVxuICogQHJldHVybnMge0N5cHJlc3NDb21tYW5kTGluZS5DeXByZXNzUnVuUmVzdWx0fSBUaGUgdGVzdCByZXN1bHRzLCBvciB1bmRlZmluZWQgaWYgbm8gdGVzdHMgd2VyZSBydW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJ1bihwYXJhbXM6IEN1cnJlbnRzUnVuQVBJKSB7XG4gIHJldHVybiBpbnRlcm5hbFJ1bihwYXJhbXMpO1xufVxuIiwgImltcG9ydCBEZWJ1ZyBmcm9tIFwiZGVidWdcIjtcbmltcG9ydCB7IEN1cnJlbnRzUnVuUGFyYW1ldGVycyB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgY3JlYXRlUnVuIH0gZnJvbSBcIi4vYXBpXCI7XG5pbXBvcnQgeyBjdXRJbml0aWFsT3V0cHV0IH0gZnJvbSBcIi4vY2FwdHVyZVwiO1xuaW1wb3J0IHsgZ2V0Q0kgfSBmcm9tIFwiLi9jaVByb3ZpZGVyXCI7XG5pbXBvcnQgeyBnZXRNZXJnZWRDb25maWcsIHZhbGlkYXRlUGFyYW1zIH0gZnJvbSBcIi4vY29uZmlnXCI7XG5pbXBvcnQgeyBnZXRHaXRJbmZvIH0gZnJvbSBcIi4vZ2l0XCI7XG5pbXBvcnQgeyBzZXRBUElCYXNlVXJsLCBzZXRSdW5JZCB9IGZyb20gXCIuL2h0dHBDbGllbnRcIjtcbmltcG9ydCB7IGJvbGQsIGRpdmlkZXIsIGluZm8sIHNwYWNlciwgdGl0bGUgfSBmcm9tIFwiLi9sb2dcIjtcbmltcG9ydCB7IGdldFBsYXRmb3JtIH0gZnJvbSBcIi4vcGxhdGZvcm1cIjtcbmltcG9ydCB7IHN1bW1hcml6ZVRlc3RSZXN1bHRzLCBzdW1tYXJ5VGFibGUgfSBmcm9tIFwiLi9yZXN1bHRzXCI7XG5pbXBvcnQgeyBydW5UaWxsRG9uZSB9IGZyb20gXCIuL3J1bm5lclwiO1xuaW1wb3J0IHsgZ2V0U3BlY0ZpbGVzIH0gZnJvbSBcIi4vc3BlY01hdGNoZXJcIjtcblxuY29uc3QgZGVidWcgPSBEZWJ1ZyhcImN1cnJlbnRzOnJ1blwiKTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJ1bihwYXJhbXM6IEN1cnJlbnRzUnVuUGFyYW1ldGVycykge1xuICBkZWJ1ZyhcInJ1biBwYXJhbXMgJW9cIiwgcGFyYW1zKTtcblxuICBjb25zdCB2YWxpZGF0ZWRQYXJhbXMgPSB2YWxpZGF0ZVBhcmFtcyhwYXJhbXMpO1xuICBzZXRBUElCYXNlVXJsKHZhbGlkYXRlZFBhcmFtcy5jbG91ZFNlcnZpY2VVcmwpO1xuXG4gIGNvbnN0IHtcbiAgICByZWNvcmRLZXksXG4gICAgcHJvamVjdElkLFxuICAgIGdyb3VwLFxuICAgIHBhcmFsbGVsLFxuICAgIGNpQnVpbGRJZCxcbiAgICB0YWcsXG4gICAgdGVzdGluZ1R5cGUsXG4gICAgYmF0Y2hTaXplLFxuICB9ID0gdmFsaWRhdGVkUGFyYW1zO1xuXG4gIGNvbnN0IGNvbmZpZyA9IGF3YWl0IGdldE1lcmdlZENvbmZpZyh2YWxpZGF0ZWRQYXJhbXMpO1xuICBjb25zdCB7IHNwZWNzLCBzcGVjUGF0dGVybiB9ID0gYXdhaXQgZ2V0U3BlY0ZpbGVzKHtcbiAgICBjb25maWcsXG4gICAgcGFyYW1zOiB2YWxpZGF0ZWRQYXJhbXMsXG4gIH0pO1xuICBpZiAoc3BlY3MubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgcGxhdGZvcm0gPSBhd2FpdCBnZXRQbGF0Zm9ybSh7XG4gICAgY29uZmlnLFxuICAgIGJyb3dzZXI6IHZhbGlkYXRlZFBhcmFtcy5icm93c2VyLFxuICB9KTtcblxuICBkaXZpZGVyKCk7XG5cbiAgaW5mbyhcIkRpc2NvdmVyZWQgJWQgc3BlYyBmaWxlc1wiLCBzcGVjcy5sZW5ndGgpO1xuICBpbmZvKFxuICAgIGBUYWdzOiAke3RhZz8uam9pbihcIixcIikgPz8gZmFsc2V9OyBHcm91cDogJHtncm91cCA/PyBmYWxzZX07IFBhcmFsbGVsOiAke1xuICAgICAgcGFyYWxsZWwgPz8gZmFsc2VcbiAgICB9OyBCYXRjaCBTaXplOiAke2JhdGNoU2l6ZX1gXG4gICk7XG4gIGluZm8oXCJDb25uZWN0aW5nIHRvIGNsb3VkIG9yY2hlc3RyYXRpb24gc2VydmljZS4uLlwiKTtcblxuICBjb25zdCBydW4gPSBhd2FpdCBjcmVhdGVSdW4oe1xuICAgIGNpOiBnZXRDSShjaUJ1aWxkSWQpLFxuICAgIHNwZWNzOiBzcGVjcy5tYXAoKHNwZWMpID0+IHNwZWMucmVsYXRpdmUpLFxuICAgIGNvbW1pdDogYXdhaXQgZ2V0R2l0SW5mbyhjb25maWcucHJvamVjdFJvb3QpLFxuICAgIGdyb3VwLFxuICAgIHBsYXRmb3JtLFxuICAgIHBhcmFsbGVsOiBwYXJhbGxlbCA/PyBmYWxzZSxcbiAgICBjaUJ1aWxkSWQsXG4gICAgcHJvamVjdElkLFxuICAgIHJlY29yZEtleSxcbiAgICBzcGVjUGF0dGVybjogW3NwZWNQYXR0ZXJuXS5mbGF0KDIpLFxuICAgIHRhZ3M6IHRhZyxcbiAgICB0ZXN0aW5nVHlwZSxcbiAgICBiYXRjaFNpemUsXG4gIH0pO1xuXG4gIGluZm8oXCJcdUQ4M0NcdURGQTUgUnVuIFVSTDpcIiwgYm9sZChydW4ucnVuVXJsKSk7XG5cbiAgc2V0UnVuSWQocnVuLnJ1bklkKTtcblxuICBjdXRJbml0aWFsT3V0cHV0KCk7XG5cbiAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHJ1blRpbGxEb25lKFxuICAgIHtcbiAgICAgIHJ1bklkOiBydW4ucnVuSWQsXG4gICAgICBncm91cElkOiBydW4uZ3JvdXBJZCxcbiAgICAgIG1hY2hpbmVJZDogcnVuLm1hY2hpbmVJZCxcbiAgICAgIHBsYXRmb3JtLFxuICAgICAgY29uZmlnLFxuICAgIH0sXG4gICAgdmFsaWRhdGVkUGFyYW1zXG4gICk7XG5cbiAgZGl2aWRlcigpO1xuXG4gIGNvbnN0IHN1bW1hcnkgPSBzdW1tYXJpemVUZXN0UmVzdWx0cyhPYmplY3QudmFsdWVzKHJlc3VsdHMpLCBjb25maWcpO1xuXG4gIHRpdGxlKFwid2hpdGVcIiwgXCJDbG91ZCBSdW4gRmluaXNoZWRcIik7XG4gIGNvbnNvbGUubG9nKHN1bW1hcnlUYWJsZShzdW1tYXJ5KSk7XG4gIGluZm8oXCJcdUQ4M0NcdURGQzEgUmVjb3JkZWQgUnVuOlwiLCBib2xkKHJ1bi5ydW5VcmwpKTtcblxuICBzcGFjZXIoKTtcbiAgcmV0dXJuIHN1bW1hcnk7XG59XG4iLCAiZXhwb3J0ICogZnJvbSBcIi4vYXBpXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90eXBlc1wiO1xuIiwgImltcG9ydCB7IG1ha2VSZXF1ZXN0IH0gZnJvbSBcIi4uL2h0dHBDbGllbnRcIjtcbmltcG9ydCB7XG4gIENyZWF0ZUluc3RhbmNlQ3lQYXlsb2FkLFxuICBDcmVhdGVJbnN0YW5jZVBheWxvYWQsXG4gIENyZWF0ZUluc3RhbmNlUmVzcG9uc2UsXG4gIENyZWF0ZUluc3RhbmNlc1Jlc3BvbnNlLFxuICBDcmVhdGVSdW5QYXlsb2FkLFxuICBDcmVhdGVSdW5SZXNwb25zZSxcbiAgU2V0SW5zdGFuY2VUZXN0c1BheWxvYWQsXG4gIFVwZGF0ZUluc3RhbmNlUmVzdWx0c01lcmdlZFBheWxvYWQsXG4gIFVwZGF0ZUluc3RhbmNlUmVzdWx0c1BheWxvYWQsXG4gIFVwZGF0ZUluc3RhbmNlUmVzdWx0c1Jlc3BvbnNlLFxufSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgcHJpbnRXYXJuaW5ncyB9IGZyb20gXCIuL3dhcm5pbmdzXCI7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVSdW4gPSBhc3luYyAocGF5bG9hZDogQ3JlYXRlUnVuUGF5bG9hZCkgPT4ge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG1ha2VSZXF1ZXN0PENyZWF0ZVJ1blJlc3BvbnNlLCBDcmVhdGVSdW5QYXlsb2FkPih7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICB1cmw6IFwiL3J1bnNcIixcbiAgICBkYXRhOiBwYXlsb2FkLFxuICB9KTtcblxuICBpZiAoKHJlc3BvbnNlLmRhdGEud2FybmluZ3M/Lmxlbmd0aCA/PyAwKSA+IDApIHtcbiAgICBwcmludFdhcm5pbmdzKHJlc3BvbnNlLmRhdGEud2FybmluZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlSW5zdGFuY2UgPSBhc3luYyAoe1xuICBydW5JZCxcbiAgZ3JvdXBJZCxcbiAgbWFjaGluZUlkLFxuICBwbGF0Zm9ybSxcbn06IENyZWF0ZUluc3RhbmNlUGF5bG9hZCkgPT4ge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG1ha2VSZXF1ZXN0PFxuICAgIENyZWF0ZUluc3RhbmNlUmVzcG9uc2UsXG4gICAgQ3JlYXRlSW5zdGFuY2VQYXlsb2FkXG4gID4oe1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgdXJsOiBgcnVucy8ke3J1bklkfS9pbnN0YW5jZXNgLFxuICAgIGRhdGE6IHtcbiAgICAgIHJ1bklkLFxuICAgICAgZ3JvdXBJZCxcbiAgICAgIG1hY2hpbmVJZCxcbiAgICAgIHBsYXRmb3JtLFxuICAgIH0sXG4gIH0pO1xuXG4gIHJldHVybiByZXNwb25zZS5kYXRhO1xufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUJhdGNoZWRJbnN0YW5jZXMgPSBhc3luYyAoZGF0YTogQ3JlYXRlSW5zdGFuY2VDeVBheWxvYWQpID0+IHtcbiAgY29uc3QgcmVzcG9uZSA9IGF3YWl0IG1ha2VSZXF1ZXN0PFxuICAgIENyZWF0ZUluc3RhbmNlc1Jlc3BvbnNlLFxuICAgIENyZWF0ZUluc3RhbmNlQ3lQYXlsb2FkXG4gID4oe1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgdXJsOiBgcnVucy8ke2RhdGEucnVuSWR9L2N5L2luc3RhbmNlc2AsXG4gICAgZGF0YSxcbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3BvbmUuZGF0YTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXRJbnN0YW5jZVRlc3RzID0gKFxuICBpbnN0YW5jZUlkOiBzdHJpbmcsXG4gIHBheWxvYWQ6IFNldEluc3RhbmNlVGVzdHNQYXlsb2FkXG4pID0+XG4gIG1ha2VSZXF1ZXN0PHt9LCBTZXRJbnN0YW5jZVRlc3RzUGF5bG9hZD4oe1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgdXJsOiBgaW5zdGFuY2VzLyR7aW5zdGFuY2VJZH0vdGVzdHNgLFxuICAgIGRhdGE6IHBheWxvYWQsXG4gIH0pLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0LmRhdGEpO1xuXG5leHBvcnQgY29uc3QgdXBkYXRlSW5zdGFuY2VSZXN1bHRzID0gKFxuICBpbnN0YW5jZUlkOiBzdHJpbmcsXG4gIHBheWxvYWQ6IFVwZGF0ZUluc3RhbmNlUmVzdWx0c1BheWxvYWRcbikgPT5cbiAgbWFrZVJlcXVlc3Q8VXBkYXRlSW5zdGFuY2VSZXN1bHRzUmVzcG9uc2UsIFVwZGF0ZUluc3RhbmNlUmVzdWx0c1BheWxvYWQ+KHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIHVybDogYGluc3RhbmNlcy8ke2luc3RhbmNlSWR9L3Jlc3VsdHNgLFxuICAgIGRhdGE6IHBheWxvYWQsXG4gIH0pLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0LmRhdGEpO1xuXG5leHBvcnQgY29uc3QgcmVwb3J0SW5zdGFuY2VSZXN1bHRzTWVyZ2VkID0gKFxuICBpbnN0YW5jZUlkOiBzdHJpbmcsXG4gIHBheWxvYWQ6IFVwZGF0ZUluc3RhbmNlUmVzdWx0c01lcmdlZFBheWxvYWRcbikgPT5cbiAgbWFrZVJlcXVlc3Q8XG4gICAgVXBkYXRlSW5zdGFuY2VSZXN1bHRzUmVzcG9uc2UsXG4gICAgVXBkYXRlSW5zdGFuY2VSZXN1bHRzTWVyZ2VkUGF5bG9hZFxuICA+KHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIHVybDogYGluc3RhbmNlcy8ke2luc3RhbmNlSWR9L2N5L3Jlc3VsdHNgLFxuICAgIGRhdGE6IHBheWxvYWQsXG4gIH0pLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0LmRhdGEpO1xuXG5leHBvcnQgY29uc3QgdXBkYXRlSW5zdGFuY2VTdGRvdXQgPSAoaW5zdGFuY2VJZDogc3RyaW5nLCBzdGRvdXQ6IHN0cmluZykgPT5cbiAgbWFrZVJlcXVlc3Q8YW55LCB7IHN0ZG91dDogc3RyaW5nIH0+KHtcbiAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgdXJsOiBgaW5zdGFuY2VzLyR7aW5zdGFuY2VJZH0vc3Rkb3V0YCxcbiAgICBkYXRhOiB7XG4gICAgICBzdGRvdXQsXG4gICAgfSxcbiAgfSk7XG4iLCAiaW1wb3J0IF8gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IHsgbWFnZW50YSB9IGZyb20gXCIuLi9sb2dcIjtcblxuaW1wb3J0IHsgaW5mbywgc3BhY2VyLCB3YXJuIH0gZnJvbSBcIi4uL2xvZ1wiO1xuaW1wb3J0IHsgQ2xvdWRXYXJuaW5nIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHByaW50V2FybmluZ3Mod2FybmluZ3M6IENsb3VkV2FybmluZ1tdKSB7XG4gIHdhcm4oXCJOb3RpY2UgZnJvbSBjbG91ZCBzZXJ2aWNlOlwiKTtcbiAgd2FybmluZ3MubWFwKCh3KSA9PiB7XG4gICAgc3BhY2VyKDEpO1xuICAgIGluZm8obWFnZW50YS5ib2xkKHcubWVzc2FnZSkpO1xuICAgIE9iamVjdC5lbnRyaWVzKF8ub21pdCh3LCBcIm1lc3NhZ2VcIikpLm1hcCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICBpbmZvKFwiLSAlczogJXNcIiwga2V5LCB2YWx1ZSk7XG4gICAgfSk7XG4gICAgc3BhY2VyKDEpO1xuICB9KTtcbn1cbiIsICJleHBvcnQgKiBmcm9tIFwiLi9pbnN0YW5jZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vcnVuXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90ZXN0XCI7XG4iLCAiaW1wb3J0IHsgUGxhdGZvcm0sIFNjcmVlbnNob3RBcnRpZmFjdCB9IGZyb20gXCJjeXByZXNzLWNsb3VkL3R5cGVzXCI7XG5pbXBvcnQgeyBTZXRUZXN0c1BheWxvYWQsIFRlc3QgfSBmcm9tIFwiLi90ZXN0XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2NyZWVuc2hvdCB7XG4gIHNjcmVlbnNob3RJZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmcgfCBudWxsO1xuICB0ZXN0SWQ6IHN0cmluZztcbiAgdGFrZW5BdDogc3RyaW5nO1xuICBoZWlnaHQ6IG51bWJlcjtcbiAgd2lkdGg6IG51bWJlcjtcbiAgc2NyZWVuc2hvdFVSTDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluc3RhbmNlUmVzdWx0U3RhdHMge1xuICBzdWl0ZXM6IG51bWJlcjtcbiAgdGVzdHM6IG51bWJlcjtcbiAgcGFzc2VzOiBudW1iZXI7XG4gIHBlbmRpbmc6IG51bWJlcjtcbiAgc2tpcHBlZDogbnVtYmVyO1xuICBmYWlsdXJlczogbnVtYmVyO1xuICB3YWxsQ2xvY2tTdGFydGVkQXQ6IHN0cmluZztcbiAgd2FsbENsb2NrRW5kZWRBdDogc3RyaW5nO1xuICB3YWxsQ2xvY2tEdXJhdGlvbjogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlcG9ydGVyU3RhdHMge1xuICBzdWl0ZXM6IG51bWJlcjtcbiAgdGVzdHM6IG51bWJlcjtcbiAgcGFzc2VzOiBudW1iZXI7XG4gIHBlbmRpbmc6IG51bWJlcjtcbiAgZmFpbHVyZXM6IG51bWJlcjtcbiAgc3RhcnQ6IHN0cmluZztcbiAgZW5kOiBzdHJpbmc7XG4gIGR1cmF0aW9uOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3lwcmVzc0NvbmZpZyB7XG4gIHZpZGVvOiBib29sZWFuO1xuICB2aWRlb1VwbG9hZE9uUGFzc2VzOiBib29sZWFuO1xuICBba2V5OiBzdHJpbmddOiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5zdGFuY2VSZXN1bHQge1xuICBzdGF0czogSW5zdGFuY2VSZXN1bHRTdGF0cztcbiAgdGVzdHM6IFRlc3RbXTtcbiAgZXJyb3I/OiBzdHJpbmc7XG4gIHJlcG9ydGVyU3RhdHM6IFJlcG9ydGVyU3RhdHM7XG4gIGV4Y2VwdGlvbjogbnVsbCB8IHN0cmluZztcbiAgY3lwcmVzc0NvbmZpZz86IFBpY2tlZEN5cHJlc3NDb25maWcgfCBudWxsO1xuICBzY3JlZW5zaG90czogU2NyZWVuc2hvdFtdO1xuICB2aWRlbzogYm9vbGVhbjtcbiAgdmlkZW9Vcmw/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXNzZXRVcGxvYWRJbnN0cnVjdGlvbiB7XG4gIHVwbG9hZFVybDogc3RyaW5nO1xuICByZWFkVXJsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2NyZWVuc2hvdFVwbG9hZEluc3RydWN0aW9uIGV4dGVuZHMgQXNzZXRVcGxvYWRJbnN0cnVjdGlvbiB7XG4gIHNjcmVlbnNob3RJZDogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSBTZXRSZXN1bHRzVGVzdHNQYXlsb2FkID0gUGljazxcbiAgVGVzdCxcbiAgXCJzdGF0ZVwiIHwgXCJkaXNwbGF5RXJyb3JcIiB8IFwiYXR0ZW1wdHNcIlxuPiAmIHsgY2xpZW50SWQ6IHN0cmluZyB9O1xuXG5leHBvcnQgaW50ZXJmYWNlIFNldEluc3RhbmNlVGVzdHNQYXlsb2FkIHtcbiAgY29uZmlnOiBQaWNrZWRDeXByZXNzQ29uZmlnO1xuICB0ZXN0czogQXJyYXk8U2V0VGVzdHNQYXlsb2FkPjtcbiAgaG9va3M6IEN5cHJlc3NDb21tYW5kTGluZS5SdW5SZXN1bHRbXCJob29rc1wiXTtcbn1cblxuZXhwb3J0IHR5cGUgUGlja2VkQ3lwcmVzc0NvbmZpZyA9IFBpY2s8XG4gIEN5cHJlc3NDb25maWcsXG4gIFwidmlkZW9cIiB8IFwidmlkZW9VcGxvYWRPblBhc3Nlc1wiXG4+O1xuXG5leHBvcnQgdHlwZSBDcmVhdGVJbnN0YW5jZVBheWxvYWQgPSB7XG4gIHJ1bklkOiBzdHJpbmc7XG4gIGdyb3VwSWQ6IHN0cmluZztcbiAgbWFjaGluZUlkOiBzdHJpbmc7XG4gIHBsYXRmb3JtOiBQbGF0Zm9ybTtcbn07XG5cbmV4cG9ydCB0eXBlIENyZWF0ZUluc3RhbmNlQ3lQYXlsb2FkID0gQ3JlYXRlSW5zdGFuY2VQYXlsb2FkICYge1xuICBiYXRjaFNpemU6IG51bWJlcjtcbn07XG5leHBvcnQgdHlwZSBDcmVhdGVJbnN0YW5jZVJlc3BvbnNlID0ge1xuICBzcGVjOiBzdHJpbmcgfCBudWxsO1xuICBpbnN0YW5jZUlkOiBzdHJpbmcgfCBudWxsO1xuICBjbGFpbWVkSW5zdGFuY2VzOiBudW1iZXI7XG4gIHRvdGFsSW5zdGFuY2VzOiBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBJbnN0YW5jZVJlc3BvbnNlU3BlY0RldGFpbHMgPSB7XG4gIHNwZWM6IHN0cmluZztcbiAgaW5zdGFuY2VJZDogc3RyaW5nO1xufTtcbmV4cG9ydCB0eXBlIENyZWF0ZUluc3RhbmNlc1Jlc3BvbnNlID0ge1xuICBzcGVjczogQXJyYXk8SW5zdGFuY2VSZXNwb25zZVNwZWNEZXRhaWxzPjtcbiAgY2xhaW1lZEluc3RhbmNlczogbnVtYmVyO1xuICB0b3RhbEluc3RhbmNlczogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgVXBkYXRlSW5zdGFuY2VSZXN1bHRzUGF5bG9hZCA9IFBpY2s8XG4gIEluc3RhbmNlUmVzdWx0LFxuICBcInN0YXRzXCIgfCBcImV4Y2VwdGlvblwiIHwgXCJ2aWRlb1wiXG4+ICYge1xuICB0ZXN0czogQXJyYXk8U2V0UmVzdWx0c1Rlc3RzUGF5bG9hZD4gfCBudWxsO1xufSAmIHtcbiAgcmVwb3J0ZXJTdGF0czogQ3lwcmVzc0NvbW1hbmRMaW5lLlJ1blJlc3VsdFtcInJlcG9ydGVyU3RhdHNcIl0gfCBudWxsO1xufSAmIHtcbiAgc2NyZWVuc2hvdHM6IFNjcmVlbnNob3RBcnRpZmFjdFtdO1xufTtcblxuZXhwb3J0IHR5cGUgVXBkYXRlSW5zdGFuY2VSZXN1bHRzTWVyZ2VkUGF5bG9hZCA9IHtcbiAgdGVzdHM6IFNldEluc3RhbmNlVGVzdHNQYXlsb2FkO1xuICByZXN1bHRzOiBVcGRhdGVJbnN0YW5jZVJlc3VsdHNQYXlsb2FkO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVJbnN0YW5jZVJlc3VsdHNSZXNwb25zZSB7XG4gIHZpZGVvVXBsb2FkVXJsPzogc3RyaW5nIHwgbnVsbDtcbiAgc2NyZWVuc2hvdFVwbG9hZFVybHM6IFNjcmVlbnNob3RVcGxvYWRJbnN0cnVjdGlvbltdO1xufVxuIiwgImltcG9ydCB7IENpUGFyYW1zLCBDaVByb3ZpZGVyIH0gZnJvbSBcImN5cHJlc3MtY2xvdWQvbGliL2NpUHJvdmlkZXJcIjtcbmltcG9ydCB7IFBsYXRmb3JtIH0gZnJvbSBcImN5cHJlc3MtY2xvdWQvdHlwZXNcIjtcblxuZXhwb3J0IHR5cGUgQ3JlYXRlUnVuUGF5bG9hZCA9IHtcbiAgY2k6IHtcbiAgICBwYXJhbXM6IENpUGFyYW1zO1xuICAgIHByb3ZpZGVyOiBDaVByb3ZpZGVyO1xuICB9O1xuICBjaUJ1aWxkSWQ/OiBzdHJpbmc7XG4gIHByb2plY3RJZDogc3RyaW5nO1xuICByZWNvcmRLZXk6IHN0cmluZztcbiAgY29tbWl0OiB7XG4gICAgW21lbW9LZXk6IHN0cmluZ106IHN0cmluZyB8IG51bGw7XG4gIH07XG4gIHNwZWNzOiBzdHJpbmdbXTtcbiAgZ3JvdXA/OiBzdHJpbmc7XG4gIHBsYXRmb3JtOiBQbGF0Zm9ybTtcbiAgcGFyYWxsZWw6IGJvb2xlYW47XG4gIHNwZWNQYXR0ZXJuOiBzdHJpbmdbXTtcbiAgdGFncz86IHN0cmluZ1tdO1xuICB0ZXN0aW5nVHlwZTogXCJlMmVcIiB8IFwiY29tcG9uZW50XCI7XG4gIHRpbWVvdXQ/OiBudW1iZXI7XG4gIGJhdGNoU2l6ZT86IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIENsb3VkV2FybmluZyA9IHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXIgfCBEYXRlO1xufTtcblxuZXhwb3J0IHR5cGUgQ3JlYXRlUnVuUmVzcG9uc2UgPSB7XG4gIHdhcm5pbmdzOiBDbG91ZFdhcm5pbmdbXTtcbiAgZ3JvdXBJZDogc3RyaW5nO1xuICBtYWNoaW5lSWQ6IHN0cmluZztcbiAgcnVuSWQ6IHN0cmluZztcbiAgcnVuVXJsOiBzdHJpbmc7XG4gIGlzTmV3UnVuOiBib29sZWFuO1xufTtcbiIsICJleHBvcnQgZW51bSBUZXN0U3RhdGUge1xuICBGYWlsZWQgPSBcImZhaWxlZFwiLFxuICBQYXNzZWQgPSBcInBhc3NlZFwiLFxuICBQZW5kaW5nID0gXCJwZW5kaW5nXCIsXG4gIFNraXBwZWQgPSBcInNraXBwZWRcIixcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUZXN0QXR0ZW1wdCB7XG4gIHN0YXRlOiBUZXN0U3RhdGU7XG4gIGVycm9yOiBDeXByZXNzQ29tbWFuZExpbmUuVGVzdEVycm9yIHwgbnVsbDtcbiAgd2FsbENsb2NrU3RhcnRlZEF0OiBzdHJpbmcgfCBudWxsO1xuICB3YWxsQ2xvY2tEdXJhdGlvbjogbnVtYmVyIHwgbnVsbDtcbiAgdmlkZW9UaW1lc3RhbXA6IG51bWJlciB8IG51bGw7XG59XG5cbmludGVyZmFjZSBUZXN0Q29uZmlnIHtcbiAgcmV0cmllczpcbiAgICB8IHtcbiAgICAgICAgb3Blbk1vZGU6IG51bWJlcjtcbiAgICAgICAgcnVuTW9kZTogbnVtYmVyO1xuICAgICAgfVxuICAgIHwgbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRlc3RIb29rIHtcbiAgY2xpZW50SWQ6IHN0cmluZztcbiAgdHlwZTogXCJiZWZvcmUgZWFjaFwiO1xuICB0aXRsZTogc3RyaW5nW107XG4gIGJvZHk6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUZXN0IHtcbiAgc3RhdGU6IFRlc3RTdGF0ZTtcbiAgdGVzdElkOiBzdHJpbmc7XG4gIGRpc3BsYXlFcnJvcjogc3RyaW5nIHwgbnVsbDtcbiAgdGl0bGU6IHN0cmluZ1tdO1xuICBjb25maWc/OiBudWxsIHwgVGVzdENvbmZpZztcbiAgaG9va0lkczogc3RyaW5nW107XG4gIGJvZHk6IHN0cmluZztcbiAgYXR0ZW1wdHM6IFRlc3RBdHRlbXB0W107XG4gIGhvb2tzOiBUZXN0SG9va1tdIHwgbnVsbDtcbn1cblxuZXhwb3J0IHR5cGUgU2V0VGVzdHNQYXlsb2FkID0gUGljazxcbiAgVGVzdCxcbiAgXCJib2R5XCIgfCBcInRpdGxlXCIgfCBcImNvbmZpZ1wiIHwgXCJob29rSWRzXCJcbj4gJiB7IGNsaWVudElkOiBzdHJpbmcgfTtcbiIsICJpbXBvcnQgZGVidWdGbiBmcm9tIFwiZGVidWdcIjtcblxuaW1wb3J0IF8gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSBcIi4vZXJyb3JzXCI7XG5cbmNvbnN0IGRlYnVnID0gZGVidWdGbihcImN1cnJlbnRzOmNpXCIpO1xuXG5jb25zdCBqb2luID0gKGNoYXI6IHN0cmluZywgLi4ucGllY2VzOiAoc3RyaW5nIHwgdW5kZWZpbmVkKVtdKSA9PiB7XG4gIHJldHVybiBfLmNoYWluKHBpZWNlcykuY29tcGFjdCgpLmpvaW4oY2hhcikudmFsdWUoKTtcbn07XG5cbmNvbnN0IHRvQ2FtZWxPYmplY3QgPSAob2JqOiBhbnksIGtleTogc3RyaW5nKSA9PiB7XG4gIHJldHVybiBfLnNldChvYmosIF8uY2FtZWxDYXNlKGtleSksIHByb2Nlc3MuZW52W2tleV0pO1xufTtcblxuY29uc3QgZXh0cmFjdCA9IChlbnZLZXlzOiBzdHJpbmdbXSkgPT4ge1xuICByZXR1cm4gXy50cmFuc2Zvcm0oZW52S2V5cywgdG9DYW1lbE9iamVjdCwge30pO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgcnVubmluZyBvbiBUZWFtRm91bmRhdGlvbiBzZXJ2ZXIuXG4gKiBAc2VlIGh0dHBzOi8vdGVjaG5ldC5taWNyb3NvZnQuY29tL2VuLXVzL2hoODUwNDQ4KHY9dnMuOTIpXG4gKi9cbmNvbnN0IGlzVGVhbUZvdW5kYXRpb24gPSAoKSA9PiB7XG4gIHJldHVybiBwcm9jZXNzLmVudi5URl9CVUlMRCAmJiBwcm9jZXNzLmVudi5URl9CVUlMRF9CVUlMRE5VTUJFUjtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHJ1bm5pbmcgb24gQXp1cmUgQ0kgcGlwZWxpbmUuXG4gKiBTZWUgZW52aXJvbm1lbnQgdmFyaWFibGVzIGluIHRoZSBpc3N1ZSAjMzY1N1xuICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vY3lwcmVzcy1pby9jeXByZXNzL2lzc3Vlcy8zNjU3XG4gKi9cbmNvbnN0IGlzQXp1cmVDaSA9ICgpID0+IHtcbiAgcmV0dXJuIHByb2Nlc3MuZW52LlRGX0JVSUxEICYmIHByb2Nlc3MuZW52LkFaVVJFX0hUVFBfVVNFUl9BR0VOVDtcbn07XG5cbmNvbnN0IGlzQVdTQ29kZUJ1aWxkID0gKCkgPT4ge1xuICByZXR1cm4gXy5zb21lKHByb2Nlc3MuZW52LCAodmFsLCBrZXkpID0+IHtcbiAgICByZXR1cm4gL15DT0RFQlVJTERfLy50ZXN0KGtleSk7XG4gIH0pO1xufTtcblxuY29uc3QgaXNCYW1ib28gPSAoKSA9PiB7XG4gIHJldHVybiBwcm9jZXNzLmVudi5iYW1ib29fYnVpbGROdW1iZXI7XG59O1xuXG5jb25zdCBpc0NvZGVzaGlwQmFzaWMgPSAoKSA9PiB7XG4gIHJldHVybiAoXG4gICAgcHJvY2Vzcy5lbnYuQ0lfTkFNRSAmJlxuICAgIHByb2Nlc3MuZW52LkNJX05BTUUgPT09IFwiY29kZXNoaXBcIiAmJlxuICAgIHByb2Nlc3MuZW52LkNPREVTSElQXG4gICk7XG59O1xuXG5jb25zdCBpc0NvZGVzaGlwUHJvID0gKCkgPT4ge1xuICByZXR1cm4gKFxuICAgIHByb2Nlc3MuZW52LkNJX05BTUUgJiZcbiAgICBwcm9jZXNzLmVudi5DSV9OQU1FID09PSBcImNvZGVzaGlwXCIgJiZcbiAgICAhcHJvY2Vzcy5lbnYuQ09ERVNISVBcbiAgKTtcbn07XG5cbmNvbnN0IGlzQ29uY291cnNlID0gKCkgPT4ge1xuICByZXR1cm4gXy5zb21lKHByb2Nlc3MuZW52LCAodmFsLCBrZXkpID0+IHtcbiAgICByZXR1cm4gL15DT05DT1VSU0VfLy50ZXN0KGtleSk7XG4gIH0pO1xufTtcblxuY29uc3QgaXNHaXRsYWIgPSAoKSA9PiB7XG4gIHJldHVybiAoXG4gICAgcHJvY2Vzcy5lbnYuR0lUTEFCX0NJIHx8XG4gICAgKHByb2Nlc3MuZW52LkNJX1NFUlZFUl9OQU1FICYmIC9eR2l0TGFiLy50ZXN0KHByb2Nlc3MuZW52LkNJX1NFUlZFUl9OQU1FKSlcbiAgKTtcbn07XG5cbmNvbnN0IGlzR29vZ2xlQ2xvdWQgPSAoKSA9PiB7XG4gIC8vIHNldCBhdXRvbWF0aWNhbGx5IGZvciB0aGUgTm9kZS5qcyA2LCBOb2RlLmpzIDggcnVudGltZXMgKG5vdCBpbiBOb2RlIDEwKVxuICAvLyBUT0RPOiBtYXkgYWxzbyBwb3RlbnRpYWxseSBoYXZlIFhfR09PR0xFXyogZW52IHZhciBzZXRcbiAgLy8gaHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2Z1bmN0aW9ucy9kb2NzL2Vudi12YXIjZW52aXJvbm1lbnRfdmFyaWFibGVzX3NldF9hdXRvbWF0aWNhbGx5XG4gIHJldHVybiAoXG4gICAgcHJvY2Vzcy5lbnYuR0NQX1BST0pFQ1QgfHxcbiAgICBwcm9jZXNzLmVudi5HQ0xPVURfUFJPSkVDVCB8fFxuICAgIHByb2Nlc3MuZW52LkdPT0dMRV9DTE9VRF9QUk9KRUNUXG4gICk7XG59O1xuXG5jb25zdCBpc0plbmtpbnMgPSAoKSA9PiB7XG4gIHJldHVybiAoXG4gICAgcHJvY2Vzcy5lbnYuSkVOS0lOU19VUkwgfHxcbiAgICBwcm9jZXNzLmVudi5KRU5LSU5TX0hPTUUgfHxcbiAgICBwcm9jZXNzLmVudi5KRU5LSU5TX1ZFUlNJT04gfHxcbiAgICBwcm9jZXNzLmVudi5IVURTT05fVVJMIHx8XG4gICAgcHJvY2Vzcy5lbnYuSFVEU09OX0hPTUVcbiAgKTtcbn07XG5cbmNvbnN0IGlzV2VyY2tlciA9ICgpID0+IHtcbiAgcmV0dXJuIHByb2Nlc3MuZW52LldFUkNLRVIgfHwgcHJvY2Vzcy5lbnYuV0VSQ0tFUl9NQUlOX1BJUEVMSU5FX1NUQVJURUQ7XG59O1xuXG4vKipcbiAqIFdlIGRldGVjdCBDSSBwcm92aWRlcnMgYnkgZGV0ZWN0aW5nIGFuIGVudmlyb25tZW50IHZhcmlhYmxlXG4gKiB1bmlxdWUgdG8gdGhlIHByb3ZpZGVyLCBvciBieSBjYWxsaW5nIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRydWVcbiAqIGZvciB0aGF0IHByb3ZpZGVyLlxuICpcbiAqIEZvciBleGFtcGxlLCBBcHBWZXlvciBDSSBoYXMgZW52aXJvbm1lbnQgdGhlXG4gKiB2YXJpYWJsZSBcIkFQUFZFWU9SXCIgc2V0IGR1cmluZyBydW5cbiAqL1xuY29uc3QgQ0lfUFJPVklERVJTID0ge1xuICBhcHB2ZXlvcjogXCJBUFBWRVlPUlwiLFxuICBhenVyZTogaXNBenVyZUNpLFxuICBhd3NDb2RlQnVpbGQ6IGlzQVdTQ29kZUJ1aWxkLFxuICBiYW1ib286IGlzQmFtYm9vLFxuICBiaXRidWNrZXQ6IFwiQklUQlVDS0VUX0JVSUxEX05VTUJFUlwiLFxuICBidWlsZGtpdGU6IFwiQlVJTERLSVRFXCIsXG4gIGNpcmNsZTogXCJDSVJDTEVDSVwiLFxuICBjb2Rlc2hpcEJhc2ljOiBpc0NvZGVzaGlwQmFzaWMsXG4gIGNvZGVzaGlwUHJvOiBpc0NvZGVzaGlwUHJvLFxuICBjb25jb3Vyc2U6IGlzQ29uY291cnNlLFxuICBjb2RlRnJlc2g6IFwiQ0ZfQlVJTERfSURcIixcbiAgZHJvbmU6IFwiRFJPTkVcIixcbiAgZ2l0aHViQWN0aW9uczogXCJHSVRIVUJfQUNUSU9OU1wiLFxuICBnaXRsYWI6IGlzR2l0bGFiLFxuICBnb0NEOiBcIkdPX0pPQl9OQU1FXCIsXG4gIGdvb2dsZUNsb3VkOiBpc0dvb2dsZUNsb3VkLFxuICBqZW5raW5zOiBpc0plbmtpbnMsXG4gIHNlbWFwaG9yZTogXCJTRU1BUEhPUkVcIixcbiAgc2hpcHBhYmxlOiBcIlNISVBQQUJMRVwiLFxuICB0ZWFtY2l0eTogXCJURUFNQ0lUWV9WRVJTSU9OXCIsXG4gIHRlYW1mb3VuZGF0aW9uOiBpc1RlYW1Gb3VuZGF0aW9uLFxuICB0cmF2aXM6IFwiVFJBVklTXCIsXG4gIHdlcmNrZXI6IGlzV2VyY2tlcixcbiAgbmV0bGlmeTogXCJORVRMSUZZXCIsXG4gIGxheWVyY2k6IFwiTEFZRVJDSVwiLFxufTtcblxuZnVuY3Rpb24gX2RldGVjdFByb3ZpZGVyTmFtZSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICBjb25zdCB7IGVudiB9ID0gcHJvY2VzcztcbiAgLy8gcmV0dXJuIHRoZSBrZXkgb2YgdGhlIGZpcnN0IHByb3ZpZGVyXG4gIC8vIHdoaWNoIGlzIHRydXRoeVxuXG4gIHJldHVybiBfLmZpbmRLZXkoQ0lfUFJPVklERVJTLCAodmFsdWUpID0+IHtcbiAgICBpZiAoXy5pc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBlbnZbdmFsdWVdO1xuICAgIH1cblxuICAgIGlmIChfLmlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWUoKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBUT0RPOiBkb24ndCBmb3IgYWJvdXQgYnVpbGROdW1iZXIhXG4vLyBsb29rIGF0IHRoZSBvbGQgY29tbWl0IHRoYXQgd2FzIHJlbW92ZWQgdG8gc2VlIGhvdyB3ZSBkaWQgaXRcbmNvbnN0IF9wcm92aWRlckNpUGFyYW1zID0gKCk6IFByb3ZpZGVyQ2lQYXJhbXNSZXMgPT4ge1xuICByZXR1cm4ge1xuICAgIGFwcHZleW9yOiBleHRyYWN0KFtcbiAgICAgIFwiQVBQVkVZT1JfSk9CX0lEXCIsXG4gICAgICBcIkFQUFZFWU9SX0FDQ09VTlRfTkFNRVwiLFxuICAgICAgXCJBUFBWRVlPUl9QUk9KRUNUX1NMVUdcIixcbiAgICAgIFwiQVBQVkVZT1JfQlVJTERfTlVNQkVSXCIsXG4gICAgICBcIkFQUFZFWU9SX0JVSUxEX1ZFUlNJT05cIixcbiAgICAgIFwiQVBQVkVZT1JfUFVMTF9SRVFVRVNUX05VTUJFUlwiLFxuICAgICAgXCJBUFBWRVlPUl9QVUxMX1JFUVVFU1RfSEVBRF9SRVBPX0JSQU5DSFwiLFxuICAgIF0pLFxuICAgIGF6dXJlOiBleHRyYWN0KFtcbiAgICAgIFwiQlVJTERfQlVJTERJRFwiLFxuICAgICAgXCJCVUlMRF9CVUlMRE5VTUJFUlwiLFxuICAgICAgXCJCVUlMRF9DT05UQUlORVJJRFwiLFxuICAgICAgXCJCVUlMRF9SRVBPU0lUT1JZX1VSSVwiLFxuICAgIF0pLFxuICAgIGF3c0NvZGVCdWlsZDogZXh0cmFjdChbXG4gICAgICBcIkNPREVCVUlMRF9CVUlMRF9JRFwiLFxuICAgICAgXCJDT0RFQlVJTERfQlVJTERfTlVNQkVSXCIsXG4gICAgICBcIkNPREVCVUlMRF9SRVNPTFZFRF9TT1VSQ0VfVkVSU0lPTlwiLFxuICAgICAgXCJDT0RFQlVJTERfU09VUkNFX1JFUE9fVVJMXCIsXG4gICAgICBcIkNPREVCVUlMRF9TT1VSQ0VfVkVSU0lPTlwiLFxuICAgIF0pLFxuICAgIGJhbWJvbzogZXh0cmFjdChbXG4gICAgICBcImJhbWJvb19idWlsZE51bWJlclwiLFxuICAgICAgXCJiYW1ib29fYnVpbGRSZXN1bHRzVXJsXCIsXG4gICAgICBcImJhbWJvb19wbGFuUmVwb3NpdG9yeV9yZXBvc2l0b3J5VXJsXCIsXG4gICAgICBcImJhbWJvb19idWlsZEtleVwiLFxuICAgIF0pLFxuICAgIGJpdGJ1Y2tldDogZXh0cmFjdChbXG4gICAgICBcIkJJVEJVQ0tFVF9SRVBPX1NMVUdcIixcbiAgICAgIFwiQklUQlVDS0VUX1JFUE9fT1dORVJcIixcbiAgICAgIFwiQklUQlVDS0VUX0JVSUxEX05VTUJFUlwiLFxuICAgICAgXCJCSVRCVUNLRVRfUEFSQUxMRUxfU1RFUFwiLFxuICAgICAgXCJCSVRCVUNLRVRfU1RFUF9SVU5fTlVNQkVSXCIsXG4gICAgICAvLyB0aGUgUFIgdmFyaWFibGVzIGFyZSBvbmx5IHNldCBvbiBwdWxsIHJlcXVlc3QgYnVpbGRzXG4gICAgICBcIkJJVEJVQ0tFVF9QUl9JRFwiLFxuICAgICAgXCJCSVRCVUNLRVRfUFJfREVTVElOQVRJT05fQlJBTkNIXCIsXG4gICAgICBcIkJJVEJVQ0tFVF9QUl9ERVNUSU5BVElPTl9DT01NSVRcIixcbiAgICBdKSxcbiAgICBidWlsZGtpdGU6IGV4dHJhY3QoW1xuICAgICAgXCJCVUlMREtJVEVfUkVQT1wiLFxuICAgICAgXCJCVUlMREtJVEVfU09VUkNFXCIsXG4gICAgICBcIkJVSUxES0lURV9KT0JfSURcIixcbiAgICAgIFwiQlVJTERLSVRFX0JVSUxEX0lEXCIsXG4gICAgICBcIkJVSUxES0lURV9CVUlMRF9VUkxcIixcbiAgICAgIFwiQlVJTERLSVRFX0JVSUxEX05VTUJFUlwiLFxuICAgICAgXCJCVUlMREtJVEVfUFVMTF9SRVFVRVNUXCIsXG4gICAgICBcIkJVSUxES0lURV9QVUxMX1JFUVVFU1RfUkVQT1wiLFxuICAgICAgXCJCVUlMREtJVEVfUFVMTF9SRVFVRVNUX0JBU0VfQlJBTkNIXCIsXG4gICAgXSksXG4gICAgY2lyY2xlOiBleHRyYWN0KFtcbiAgICAgIFwiQ0lSQ0xFX0pPQlwiLFxuICAgICAgXCJDSVJDTEVfQlVJTERfTlVNXCIsXG4gICAgICBcIkNJUkNMRV9CVUlMRF9VUkxcIixcbiAgICAgIFwiQ0lSQ0xFX1BSX05VTUJFUlwiLFxuICAgICAgXCJDSVJDTEVfUFJfUkVQT05BTUVcIixcbiAgICAgIFwiQ0lSQ0xFX1BSX1VTRVJOQU1FXCIsXG4gICAgICBcIkNJUkNMRV9DT01QQVJFX1VSTFwiLFxuICAgICAgXCJDSVJDTEVfV09SS0ZMT1dfSURcIixcbiAgICAgIFwiQ0lSQ0xFX1BVTExfUkVRVUVTVFwiLFxuICAgICAgXCJDSVJDTEVfUkVQT1NJVE9SWV9VUkxcIixcbiAgICAgIFwiQ0lfUFVMTF9SRVFVRVNUXCIsXG4gICAgXSksXG4gICAgY29kZXNoaXBCYXNpYzogZXh0cmFjdChbXG4gICAgICBcIkNJX0JVSUxEX0lEXCIsXG4gICAgICBcIkNJX1JFUE9fTkFNRVwiLFxuICAgICAgXCJDSV9CVUlMRF9VUkxcIixcbiAgICAgIFwiQ0lfUFJPSkVDVF9JRFwiLFxuICAgICAgXCJDSV9CVUlMRF9OVU1CRVJcIixcbiAgICAgIFwiQ0lfUFVMTF9SRVFVRVNUXCIsXG4gICAgXSksXG4gICAgLy8gQ29kZXNoaXBQcm8gcHJvdmlkZXMgdmVyeSBmZXcgQ0kgdmFyaWFibGVzXG4gICAgLy8gaHR0cHM6Ly9kb2N1bWVudGF0aW9uLmNvZGVzaGlwLmNvbS9wcm8vYnVpbGRzLWFuZC1jb25maWd1cmF0aW9uL2Vudmlyb25tZW50LXZhcmlhYmxlcy9cbiAgICBjb2Rlc2hpcFBybzogZXh0cmFjdChbXCJDSV9CVUlMRF9JRFwiLCBcIkNJX1JFUE9fTkFNRVwiLCBcIkNJX1BST0pFQ1RfSURcIl0pLFxuICAgIC8vIGh0dHBzOi8vY29uY291cnNlLWNpLm9yZy9pbXBsZW1lbnRpbmctcmVzb3VyY2UtdHlwZXMuaHRtbCNyZXNvdXJjZS1tZXRhZGF0YVxuICAgIGNvbmNvdXJzZTogZXh0cmFjdChbXG4gICAgICBcIkJVSUxEX0lEXCIsXG4gICAgICBcIkJVSUxEX05BTUVcIixcbiAgICAgIFwiQlVJTERfSk9CX05BTUVcIixcbiAgICAgIFwiQlVJTERfUElQRUxJTkVfTkFNRVwiLFxuICAgICAgXCJCVUlMRF9URUFNX05BTUVcIixcbiAgICAgIFwiQVRDX0VYVEVSTkFMX1VSTFwiLFxuICAgIF0pLFxuICAgIC8vIGh0dHBzOi8vY29kZWZyZXNoLmlvL2RvY3MvZG9jcy9jb2RlZnJlc2gteWFtbC92YXJpYWJsZXMvXG4gICAgY29kZUZyZXNoOiBleHRyYWN0KFtcbiAgICAgIFwiQ0ZfQlVJTERfSURcIixcbiAgICAgIFwiQ0ZfQlVJTERfVVJMXCIsXG4gICAgICBcIkNGX0NVUlJFTlRfQVRURU1QVFwiLFxuICAgICAgXCJDRl9TVEVQX05BTUVcIixcbiAgICAgIFwiQ0ZfUElQRUxJTkVfTkFNRVwiLFxuICAgICAgXCJDRl9QSVBFTElORV9UUklHR0VSX0lEXCIsXG4gICAgICAvLyB2YXJpYWJsZXMgYWRkZWQgZm9yIHB1bGwgcmVxdWVzdHNcbiAgICAgIFwiQ0ZfUFVMTF9SRVFVRVNUX0lEXCIsXG4gICAgICBcIkNGX1BVTExfUkVRVUVTVF9JU19GT1JLXCIsXG4gICAgICBcIkNGX1BVTExfUkVRVUVTVF9OVU1CRVJcIixcbiAgICAgIFwiQ0ZfUFVMTF9SRVFVRVNUX1RBUkdFVFwiLFxuICAgIF0pLFxuICAgIGRyb25lOiBleHRyYWN0KFtcbiAgICAgIFwiRFJPTkVfSk9CX05VTUJFUlwiLFxuICAgICAgXCJEUk9ORV9CVUlMRF9MSU5LXCIsXG4gICAgICBcIkRST05FX0JVSUxEX05VTUJFUlwiLFxuICAgICAgXCJEUk9ORV9QVUxMX1JFUVVFU1RcIixcbiAgICBdKSxcbiAgICAvLyBodHRwczovL2hlbHAuZ2l0aHViLmNvbS9lbi9hY3Rpb25zL2F1dG9tYXRpbmcteW91ci13b3JrZmxvdy13aXRoLWdpdGh1Yi1hY3Rpb25zL3VzaW5nLWVudmlyb25tZW50LXZhcmlhYmxlcyNkZWZhdWx0LWVudmlyb25tZW50LXZhcmlhYmxlc1xuICAgIGdpdGh1YkFjdGlvbnM6IGV4dHJhY3QoW1xuICAgICAgXCJHSVRIVUJfV09SS0ZMT1dcIixcbiAgICAgIFwiR0lUSFVCX0FDVElPTlwiLFxuICAgICAgXCJHSVRIVUJfRVZFTlRfTkFNRVwiLFxuICAgICAgXCJHSVRIVUJfUlVOX0lEXCIsXG4gICAgICBcIkdJVEhVQl9SVU5fQVRURU1QVFwiLFxuICAgICAgXCJHSVRIVUJfUkVQT1NJVE9SWVwiLFxuICAgIF0pLFxuICAgIC8vIHNlZSBodHRwczovL2RvY3MuZ2l0bGFiLmNvbS9lZS9jaS92YXJpYWJsZXMvXG4gICAgZ2l0bGFiOiBleHRyYWN0KFtcbiAgICAgIC8vIHBpcGVsaW5lIGlzIGNvbW1vbiBhbW9uZyBhbGwgam9ic1xuICAgICAgXCJDSV9QSVBFTElORV9JRFwiLFxuICAgICAgXCJDSV9QSVBFTElORV9VUkxcIixcbiAgICAgIC8vIGluZGl2aWR1YWwgam9ic1xuICAgICAgXCJDSV9CVUlMRF9JRFwiLCAvLyBidWlsZCBpZCBhbmQgam9iIGlkIGFyZSBhbGlhc2VzXG4gICAgICBcIkNJX0pPQl9JRFwiLFxuICAgICAgXCJDSV9KT0JfVVJMXCIsXG4gICAgICBcIkNJX0pPQl9OQU1FXCIsXG4gICAgICAvLyBvdGhlciBpbmZvcm1hdGlvblxuICAgICAgXCJHSVRMQUJfSE9TVFwiLFxuICAgICAgXCJDSV9QUk9KRUNUX0lEXCIsXG4gICAgICBcIkNJX1BST0pFQ1RfVVJMXCIsXG4gICAgICBcIkNJX1JFUE9TSVRPUllfVVJMXCIsXG4gICAgICBcIkNJX0VOVklST05NRU5UX1VSTFwiLFxuICAgICAgXCJDSV9ERUZBVUxUX0JSQU5DSFwiLFxuICAgICAgLy8gZm9yIFBSczogaHR0cHM6Ly9naXRsYWIuY29tL2dpdGxhYi1vcmcvZ2l0bGFiLWNlL2lzc3Vlcy8yMzkwMlxuICAgIF0pLFxuICAgIC8vIGh0dHBzOi8vZG9jcy5nb2NkLm9yZy9jdXJyZW50L2ZhcS9kZXZfdXNlX2N1cnJlbnRfcmV2aXNpb25faW5fYnVpbGQuaHRtbCNzdGFuZGFyZC1nb2NkLWVudmlyb25tZW50LXZhcmlhYmxlc1xuICAgIGdvQ0Q6IGV4dHJhY3QoW1xuICAgICAgXCJHT19TRVJWRVJfVVJMXCIsXG4gICAgICBcIkdPX0VOVklST05NRU5UX05BTUVcIixcbiAgICAgIFwiR09fUElQRUxJTkVfTkFNRVwiLFxuICAgICAgXCJHT19QSVBFTElORV9DT1VOVEVSXCIsXG4gICAgICBcIkdPX1BJUEVMSU5FX0xBQkVMXCIsXG4gICAgICBcIkdPX1NUQUdFX05BTUVcIixcbiAgICAgIFwiR09fU1RBR0VfQ09VTlRFUlwiLFxuICAgICAgXCJHT19KT0JfTkFNRVwiLFxuICAgICAgXCJHT19UUklHR0VSX1VTRVJcIixcbiAgICAgIFwiR09fUkVWSVNJT05cIixcbiAgICAgIFwiR09fVE9fUkVWSVNJT05cIixcbiAgICAgIFwiR09fRlJPTV9SRVZJU0lPTlwiLFxuICAgICAgXCJHT19NQVRFUklBTF9IQVNfQ0hBTkdFRFwiLFxuICAgIF0pLFxuICAgIGdvb2dsZUNsb3VkOiBleHRyYWN0KFtcbiAgICAgIC8vIGluZGl2aWR1YWwgam9ic1xuICAgICAgXCJCVUlMRF9JRFwiLFxuICAgICAgXCJQUk9KRUNUX0lEXCIsXG4gICAgICAvLyBvdGhlciBpbmZvcm1hdGlvblxuICAgICAgXCJSRVBPX05BTUVcIixcbiAgICAgIFwiQlJBTkNIX05BTUVcIixcbiAgICAgIFwiVEFHX05BTUVcIixcbiAgICAgIFwiQ09NTUlUX1NIQVwiLFxuICAgICAgXCJTSE9SVF9TSEFcIixcbiAgICAgIC8vIGh0dHBzOi8vY2xvdWQuZ29vZ2xlLmNvbS9jbG91ZC1idWlsZC9kb2NzL2FwaS9yZWZlcmVuY2UvcmVzdC9TaGFyZWQuVHlwZXMvQnVpbGRcbiAgICBdKSxcbiAgICBqZW5raW5zOiBleHRyYWN0KFtcIkJVSUxEX0lEXCIsIFwiQlVJTERfVVJMXCIsIFwiQlVJTERfTlVNQkVSXCIsIFwiZ2hwcmJQdWxsSWRcIl0pLFxuICAgIC8vIGh0dHBzOi8vc2VtYXBob3JlY2kuY29tL2RvY3MvYXZhaWxhYmxlLWVudmlyb25tZW50LXZhcmlhYmxlcy5odG1sXG4gICAgLy8gc29tZSBjb21lIGZyb20gdjEsIHNvbWUgZnJvbSB2MiBvZiBzZW1hcGhvcmVcbiAgICBzZW1hcGhvcmU6IGV4dHJhY3QoW1xuICAgICAgXCJTRU1BUEhPUkVfQlJBTkNIX0lEXCIsXG4gICAgICBcIlNFTUFQSE9SRV9CVUlMRF9OVU1CRVJcIixcbiAgICAgIFwiU0VNQVBIT1JFX0NVUlJFTlRfSk9CXCIsXG4gICAgICBcIlNFTUFQSE9SRV9DVVJSRU5UX1RIUkVBRFwiLFxuICAgICAgXCJTRU1BUEhPUkVfRVhFQ1VUQUJMRV9VVUlEXCIsXG4gICAgICBcIlNFTUFQSE9SRV9HSVRfQlJBTkNIXCIsXG4gICAgICBcIlNFTUFQSE9SRV9HSVRfRElSXCIsXG4gICAgICBcIlNFTUFQSE9SRV9HSVRfUkVGXCIsXG4gICAgICBcIlNFTUFQSE9SRV9HSVRfUkVGX1RZUEVcIixcbiAgICAgIFwiU0VNQVBIT1JFX0dJVF9SRVBPX1NMVUdcIixcbiAgICAgIFwiU0VNQVBIT1JFX0dJVF9TSEFcIixcbiAgICAgIFwiU0VNQVBIT1JFX0dJVF9VUkxcIixcbiAgICAgIFwiU0VNQVBIT1JFX0pPQl9DT1VOVFwiLFxuICAgICAgXCJTRU1BUEhPUkVfSk9CX0lEXCIsIC8vIHYyXG4gICAgICBcIlNFTUFQSE9SRV9KT0JfTkFNRVwiLFxuICAgICAgXCJTRU1BUEhPUkVfSk9CX1VVSURcIiwgLy8gdjFcbiAgICAgIFwiU0VNQVBIT1JFX1BJUEVMSU5FX0lEXCIsXG4gICAgICBcIlNFTUFQSE9SRV9QTEFURk9STVwiLFxuICAgICAgXCJTRU1BUEhPUkVfUFJPSkVDVF9ESVJcIixcbiAgICAgIFwiU0VNQVBIT1JFX1BST0pFQ1RfSEFTSF9JRFwiLFxuICAgICAgXCJTRU1BUEhPUkVfUFJPSkVDVF9JRFwiLCAvLyB2MlxuICAgICAgXCJTRU1BUEhPUkVfUFJPSkVDVF9OQU1FXCIsXG4gICAgICBcIlNFTUFQSE9SRV9QUk9KRUNUX1VVSURcIiwgLy8gdjFcbiAgICAgIFwiU0VNQVBIT1JFX1JFUE9fU0xVR1wiLFxuICAgICAgXCJTRU1BUEhPUkVfVFJJR0dFUl9TT1VSQ0VcIixcbiAgICAgIFwiU0VNQVBIT1JFX1dPUktGTE9XX0lEXCIsXG4gICAgICBcIlBVTExfUkVRVUVTVF9OVU1CRVJcIiwgLy8gcHVsbCByZXF1ZXN0cyBmcm9tIGZvcmtzIE9OTFlcbiAgICBdKSxcbiAgICAvLyBzZWUgaHR0cDovL2RvY3Muc2hpcHBhYmxlLmNvbS9jaS9lbnYtdmFycy9cbiAgICBzaGlwcGFibGU6IGV4dHJhY3QoW1xuICAgICAgLy8gYnVpbGQgdmFyaWFibGVzXG4gICAgICBcIlNISVBQQUJMRV9CVUlMRF9JRFwiLCAvLyBcIjViOTMzNTRjYWJmYWJiMDcwMDdmMDFmZFwiXG4gICAgICBcIlNISVBQQUJMRV9CVUlMRF9OVU1CRVJcIiwgLy8gXCI0XCJcbiAgICAgIFwiU0hJUFBBQkxFX0NPTU1JVF9SQU5HRVwiLCAvLyBcInNoYTEuLi5zaGEyXCJcbiAgICAgIFwiU0hJUFBBQkxFX0NPTlRBSU5FUl9OQU1FXCIsIC8vIFwiYy5leGVjLmN5cHJlc3MtZXhhbXBsZS1raXRjaGVuc2luay40LjFcIlxuICAgICAgXCJTSElQUEFCTEVfSk9CX0lEXCIsIC8vIFwiMVwiXG4gICAgICBcIlNISVBQQUJMRV9KT0JfTlVNQkVSXCIsIC8vIFwiMVwiXG4gICAgICBcIlNISVBQQUJMRV9SRVBPX1NMVUdcIiwgLy8gXCI8dXNlcm5hbWU+LzxyZXBvPlwiXG4gICAgICAvLyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIHRoYXQgU2hpcHBhYmxlIHByb3ZpZGVzXG4gICAgICBcIklTX0ZPUktcIiwgLy8gXCJ0cnVlXCJcbiAgICAgIFwiSVNfR0lUX1RBR1wiLCAvLyBcImZhbHNlXCJcbiAgICAgIFwiSVNfUFJFUkVMRUFTRVwiLCAvLyBcImZhbHNlXCJcbiAgICAgIFwiSVNfUkVMRUFTRVwiLCAvLyBcImZhbHNlXCJcbiAgICAgIFwiUkVQT1NJVE9SWV9VUkxcIiwgLy8gXCJodHRwczovL2dpdGh1Yi5jb20vLi4uLmdpdFwiXG4gICAgICBcIlJFUE9fRlVMTF9OQU1FXCIsIC8vIFwiPHVzZXJuYW1lPi88cmVwbz5cIlxuICAgICAgXCJSRVBPX05BTUVcIiwgLy8gXCJjeXByZXNzLWV4YW1wbGUta2l0Y2hlbnNpbmtcIlxuICAgICAgXCJCVUlMRF9VUkxcIiwgLy8gXCJodHRwczovL2FwcC5zaGlwcGFibGUuY29tL2dpdGh1Yi88dXNlcm5hbWU+LzxyZXBvPi9ydW5zLzFcIlxuICAgICAgLy8gUHVsbCByZXF1ZXN0IGluZm9ybWF0aW9uXG4gICAgICBcIkJBU0VfQlJBTkNIXCIsIC8vIE5hbWUgb2YgdGhlIHRhcmdldCBicmFuY2ggaW50byB3aGljaCB0aGUgcHVsbCByZXF1ZXN0IGNoYW5nZXMgd2lsbCBiZSBtZXJnZWQuXG4gICAgICBcIkhFQURfQlJBTkNIXCIsIC8vIFRoaXMgaXMgb25seSBzZXQgZm9yIHB1bGwgcmVxdWVzdHMgYW5kIGlzIHRoZSBuYW1lIG9mIHRoZSBicmFuY2ggdGhlIHB1bGwgcmVxdWVzdCB3YXMgb3BlbmVkIGZyb20uXG4gICAgICBcIklTX1BVTExfUkVRVUVTVFwiLCAvLyBcImZhbHNlXCIgb3IgXCJ0cnVlXCJcbiAgICAgIFwiUFVMTF9SRVFVRVNUXCIsIC8vIFB1bGwgcmVxdWVzdCBudW1iZXIgaWYgdGhlIGpvYiBpcyBhIHB1bGwgcmVxdWVzdC4gSWYgbm90LCB0aGlzIHdpbGwgYmUgc2V0IHRvIGZhbHNlLlxuICAgICAgXCJQVUxMX1JFUVVFU1RfQkFTRV9CUkFOQ0hcIiwgLy8gTmFtZSBvZiB0aGUgYnJhbmNoIHRoYXQgdGhlIHB1bGwgcmVxdWVzdCB3aWxsIGJlIG1lcmdlZCBpbnRvLiBJdCBzaG91bGQgYmUgdGhlIHNhbWUgYXMgQkFTRV9CUkFOQ0guXG4gICAgICBcIlBVTExfUkVRVUVTVF9SRVBPX0ZVTExfTkFNRVwiLCAvLyBGdWxsIG5hbWUgb2YgdGhlIHJlcG9zaXRvcnkgZnJvbSB3aGVyZSB0aGUgcHVsbCByZXF1ZXN0IG9yaWdpbmF0ZWQuXG4gICAgXSksXG4gICAgdGVhbWNpdHk6IG51bGwsXG4gICAgdGVhbWZvdW5kYXRpb246IGV4dHJhY3QoW1xuICAgICAgXCJCVUlMRF9CVUlMRElEXCIsXG4gICAgICBcIkJVSUxEX0JVSUxETlVNQkVSXCIsXG4gICAgICBcIkJVSUxEX0NPTlRBSU5FUklEXCIsXG4gICAgXSksXG4gICAgdHJhdmlzOiBleHRyYWN0KFtcbiAgICAgIFwiVFJBVklTX0pPQl9JRFwiLFxuICAgICAgXCJUUkFWSVNfQlVJTERfSURcIixcbiAgICAgIFwiVFJBVklTX0JVSUxEX1dFQl9VUkxcIixcbiAgICAgIFwiVFJBVklTX1JFUE9fU0xVR1wiLFxuICAgICAgXCJUUkFWSVNfSk9CX05VTUJFUlwiLFxuICAgICAgXCJUUkFWSVNfRVZFTlRfVFlQRVwiLFxuICAgICAgXCJUUkFWSVNfQ09NTUlUX1JBTkdFXCIsXG4gICAgICBcIlRSQVZJU19CVUlMRF9OVU1CRVJcIixcbiAgICAgIFwiVFJBVklTX1BVTExfUkVRVUVTVFwiLFxuICAgICAgXCJUUkFWSVNfUFVMTF9SRVFVRVNUX0JSQU5DSFwiLFxuICAgICAgXCJUUkFWSVNfUFVMTF9SRVFVRVNUX1NIQVwiLFxuICAgIF0pLFxuICAgIHdlcmNrZXI6IG51bGwsXG4gICAgLy8gaHR0cHM6Ly9kb2NzLm5ldGxpZnkuY29tL2NvbmZpZ3VyZS1idWlsZHMvZW52aXJvbm1lbnQtdmFyaWFibGVzLyNkZXBsb3ktdXJscy1hbmQtbWV0YWRhdGFcbiAgICBuZXRsaWZ5OiBleHRyYWN0KFtcbiAgICAgIFwiQlVJTERfSURcIixcbiAgICAgIFwiQ09OVEVYVFwiLFxuICAgICAgXCJVUkxcIixcbiAgICAgIFwiREVQTE9ZX1VSTFwiLFxuICAgICAgXCJERVBMT1lfUFJJTUVfVVJMXCIsXG4gICAgICBcIkRFUExPWV9JRFwiLFxuICAgIF0pLFxuICAgIC8vIGh0dHBzOi8vbGF5ZXJjaS5jb20vZG9jcy9sYXllcmZpbGUtcmVmZXJlbmNlL2J1aWxkLWVudlxuICAgIGxheWVyY2k6IGV4dHJhY3QoW1xuICAgICAgXCJMQVlFUkNJX0pPQl9JRFwiLFxuICAgICAgXCJMQVlFUkNJX1JVTk5FUl9JRFwiLFxuICAgICAgXCJSRVRSWV9JTkRFWFwiLFxuICAgICAgXCJMQVlFUkNJX1BVTExfUkVRVUVTVFwiLFxuICAgICAgXCJMQVlFUkNJX1JFUE9fTkFNRVwiLFxuICAgICAgXCJMQVlFUkNJX1JFUE9fT1dORVJcIixcbiAgICAgIFwiTEFZRVJDSV9CUkFOQ0hcIixcbiAgICAgIFwiR0lUX1RBR1wiLCAvLyBzaG9ydCBoZXggZm9yIGNvbW1pdHNcbiAgICBdKSxcbiAgfTtcbn07XG5cbi8vIHRyaWVzIHRvIGdyYWIgY29tbWl0IGluZm9ybWF0aW9uIGZyb20gQ0kgZW52aXJvbm1lbnQgdmFyaWFibGVzXG4vLyB2ZXJ5IHVzZWZ1bCB0byBmaWxsIG1pc3NpbmcgaW5mb3JtYXRpb24gd2hlbiBHaXQgY2Fubm90IGdyYWIgY29ycmVjdCB2YWx1ZXNcbmNvbnN0IF9wcm92aWRlckNvbW1pdFBhcmFtcyA9ICgpOiBQcm92aWRlckNvbW1pdFBhcmFtc1JlcyA9PiB7XG4gIGNvbnN0IHsgZW52IH0gPSBwcm9jZXNzO1xuXG4gIHJldHVybiB7XG4gICAgYXBwdmV5b3I6IHtcbiAgICAgIHNoYTogZW52LkFQUFZFWU9SX1JFUE9fQ09NTUlULFxuICAgICAgLy8gc2luY2UgQVBQVkVZT1JfUkVQT19CUkFOQ0ggd2lsbCBiZSB0aGUgdGFyZ2V0IGJyYW5jaCBvbiBhIFBSXG4gICAgICAvLyB3ZSBuZWVkIHRvIHVzZSBQVUxMX1JFUVVFU1RfSEVBRF9SRVBPX0JSQU5DSCBpZiBpdCBleGlzdHMuXG4gICAgICAvLyBlLmcuIGlmIHlvdSBoYXZlIGEgUFI6IGRldmVsb3AgPC0gbXktZmVhdHVyZS1icmFuY2hcbiAgICAgIC8vIG15LWZlYXR1cmUtYnJhbmNoIGlzIEFQUFZFWU9SX1BVTExfUkVRVUVTVF9IRUFEX1JFUE9fQlJBTkNIXG4gICAgICAvLyBkZXZlbG9wICAgICAgICAgICBpcyBBUFBWRVlPUl9SRVBPX0JSQU5DSFxuICAgICAgYnJhbmNoOlxuICAgICAgICBlbnYuQVBQVkVZT1JfUFVMTF9SRVFVRVNUX0hFQURfUkVQT19CUkFOQ0ggfHwgZW52LkFQUFZFWU9SX1JFUE9fQlJBTkNILFxuICAgICAgbWVzc2FnZTogam9pbihcbiAgICAgICAgXCJcXG5cIixcbiAgICAgICAgZW52LkFQUFZFWU9SX1JFUE9fQ09NTUlUX01FU1NBR0UsXG4gICAgICAgIGVudi5BUFBWRVlPUl9SRVBPX0NPTU1JVF9NRVNTQUdFX0VYVEVOREVEXG4gICAgICApLFxuICAgICAgYXV0aG9yTmFtZTogZW52LkFQUFZFWU9SX1JFUE9fQ09NTUlUX0FVVEhPUixcbiAgICAgIGF1dGhvckVtYWlsOiBlbnYuQVBQVkVZT1JfUkVQT19DT01NSVRfQVVUSE9SX0VNQUlMLFxuICAgICAgLy8gcmVtb3RlT3JpZ2luOiA/Pz9cbiAgICAgIC8vIGRlZmF1bHRCcmFuY2g6ID8/P1xuICAgIH0sXG4gICAgYXdzQ29kZUJ1aWxkOiB7XG4gICAgICBzaGE6IGVudi5DT0RFQlVJTERfUkVTT0xWRURfU09VUkNFX1ZFUlNJT04sXG4gICAgICAvLyBicmFuY2g6ID8/PyxcbiAgICAgIC8vIG1lc3NhZ2U6ID8/P1xuICAgICAgLy8gYXV0aG9yTmFtZTogPz8/XG4gICAgICAvLyBhdXRob3JFbWFpbDogPz8/XG4gICAgICByZW1vdGVPcmlnaW46IGVudi5DT0RFQlVJTERfU09VUkNFX1JFUE9fVVJMLFxuICAgICAgLy8gZGVmYXVsdEJyYW5jaDogPz8/XG4gICAgfSxcbiAgICBhenVyZToge1xuICAgICAgc2hhOiBlbnYuQlVJTERfU09VUkNFVkVSU0lPTixcbiAgICAgIGJyYW5jaDogZW52LkJVSUxEX1NPVVJDRUJSQU5DSE5BTUUsXG4gICAgICBtZXNzYWdlOiBlbnYuQlVJTERfU09VUkNFVkVSU0lPTk1FU1NBR0UsXG4gICAgICBhdXRob3JOYW1lOiBlbnYuQlVJTERfU09VUkNFVkVSU0lPTkFVVEhPUixcbiAgICAgIGF1dGhvckVtYWlsOiBlbnYuQlVJTERfUkVRVUVTVEVERk9SRU1BSUwsXG4gICAgfSxcbiAgICBiYW1ib286IHtcbiAgICAgIHNoYTogZW52LmJhbWJvb19wbGFuUmVwb3NpdG9yeV9yZXZpc2lvbixcbiAgICAgIGJyYW5jaDogZW52LmJhbWJvb19wbGFuUmVwb3NpdG9yeV9icmFuY2gsXG4gICAgICAvLyBtZXNzYWdlOiA/Pz9cbiAgICAgIGF1dGhvck5hbWU6IGVudi5iYW1ib29fcGxhblJlcG9zaXRvcnlfdXNlcm5hbWUsXG4gICAgICAvLyBhdXRob3JFbWFpbDogPz8/XG4gICAgICByZW1vdGVPcmlnaW46IGVudi5iYW1ib29fcGxhblJlcG9zaXRvcnlfcmVwb3NpdG9yeVVSTCxcbiAgICAgIC8vIGRlZmF1bHRCcmFuY2g6ID8/P1xuICAgIH0sXG4gICAgYml0YnVja2V0OiB7XG4gICAgICBzaGE6IGVudi5CSVRCVUNLRVRfQ09NTUlULFxuICAgICAgYnJhbmNoOiBlbnYuQklUQlVDS0VUX0JSQU5DSCxcbiAgICAgIC8vIG1lc3NhZ2U6ID8/P1xuICAgICAgLy8gYXV0aG9yTmFtZTogPz8/XG4gICAgICAvLyBhdXRob3JFbWFpbDogPz8/XG4gICAgICAvLyByZW1vdGVPcmlnaW46ID8/P1xuICAgICAgLy8gZGVmYXVsdEJyYW5jaDogPz8/XG4gICAgfSxcbiAgICBidWlsZGtpdGU6IHtcbiAgICAgIHNoYTogZW52LkJVSUxES0lURV9DT01NSVQsXG4gICAgICBicmFuY2g6IGVudi5CVUlMREtJVEVfQlJBTkNILFxuICAgICAgbWVzc2FnZTogZW52LkJVSUxES0lURV9NRVNTQUdFLFxuICAgICAgYXV0aG9yTmFtZTogZW52LkJVSUxES0lURV9CVUlMRF9DUkVBVE9SLFxuICAgICAgYXV0aG9yRW1haWw6IGVudi5CVUlMREtJVEVfQlVJTERfQ1JFQVRPUl9FTUFJTCxcbiAgICAgIHJlbW90ZU9yaWdpbjogZW52LkJVSUxES0lURV9SRVBPLFxuICAgICAgZGVmYXVsdEJyYW5jaDogZW52LkJVSUxES0lURV9QSVBFTElORV9ERUZBVUxUX0JSQU5DSCxcbiAgICB9LFxuICAgIGNpcmNsZToge1xuICAgICAgc2hhOiBlbnYuQ0lSQ0xFX1NIQTEsXG4gICAgICBicmFuY2g6IGVudi5DSVJDTEVfQlJBTkNILFxuICAgICAgLy8gbWVzc2FnZTogPz8/XG4gICAgICBhdXRob3JOYW1lOiBlbnYuQ0lSQ0xFX1VTRVJOQU1FLFxuICAgICAgLy8gYXV0aG9yRW1haWw6ID8/P1xuICAgICAgcmVtb3RlT3JpZ2luOiBlbnYuQ0lSQ0xFX1JFUE9TSVRPUllfVVJMLFxuICAgICAgLy8gZGVmYXVsdEJyYW5jaDogPz8/XG4gICAgfSxcbiAgICBjb2Rlc2hpcEJhc2ljOiB7XG4gICAgICBzaGE6IGVudi5DSV9DT01NSVRfSUQsXG4gICAgICBicmFuY2g6IGVudi5DSV9CUkFOQ0gsXG4gICAgICBtZXNzYWdlOiBlbnYuQ0lfQ09NTUlUX01FU1NBR0UsXG4gICAgICBhdXRob3JOYW1lOiBlbnYuQ0lfQ09NTUlUVEVSX05BTUUsXG4gICAgICBhdXRob3JFbWFpbDogZW52LkNJX0NPTU1JVFRFUl9FTUFJTCxcbiAgICAgIC8vIHJlbW90ZU9yaWdpbjogPz8/XG4gICAgICAvLyBkZWZhdWx0QnJhbmNoOiA/Pz9cbiAgICB9LFxuICAgIGNvZGVzaGlwUHJvOiB7XG4gICAgICBzaGE6IGVudi5DSV9DT01NSVRfSUQsXG4gICAgICBicmFuY2g6IGVudi5DSV9CUkFOQ0gsXG4gICAgICBtZXNzYWdlOiBlbnYuQ0lfQ09NTUlUX01FU1NBR0UsXG4gICAgICBhdXRob3JOYW1lOiBlbnYuQ0lfQ09NTUlUVEVSX05BTUUsXG4gICAgICBhdXRob3JFbWFpbDogZW52LkNJX0NPTU1JVFRFUl9FTUFJTCxcbiAgICAgIC8vIHJlbW90ZU9yaWdpbjogPz8/XG4gICAgICAvLyBkZWZhdWx0QnJhbmNoOiA/Pz9cbiAgICB9LFxuICAgIGNvZGVGcmVzaDoge1xuICAgICAgc2hhOiBlbnYuQ0ZfUkVWSVNJT04sXG4gICAgICBicmFuY2g6IGVudi5DRl9CUkFOQ0gsXG4gICAgICBtZXNzYWdlOiBlbnYuQ0ZfQ09NTUlUX01FU1NBR0UsXG4gICAgICBhdXRob3JOYW1lOiBlbnYuQ0ZfQ09NTUlUX0FVVEhPUixcbiAgICB9LFxuICAgIGRyb25lOiB7XG4gICAgICBzaGE6IGVudi5EUk9ORV9DT01NSVRfU0hBLFxuICAgICAgLy8gaHR0cHM6Ly9kb2NzLmRyb25lLmlvL3BpcGVsaW5lL2Vudmlyb25tZW50L3JlZmVyZW5jZS9kcm9uZS1zb3VyY2UtYnJhbmNoL1xuICAgICAgYnJhbmNoOiBlbnYuRFJPTkVfU09VUkNFX0JSQU5DSCxcbiAgICAgIG1lc3NhZ2U6IGVudi5EUk9ORV9DT01NSVRfTUVTU0FHRSxcbiAgICAgIGF1dGhvck5hbWU6IGVudi5EUk9ORV9DT01NSVRfQVVUSE9SLFxuICAgICAgYXV0aG9yRW1haWw6IGVudi5EUk9ORV9DT01NSVRfQVVUSE9SX0VNQUlMLFxuICAgICAgcmVtb3RlT3JpZ2luOiBlbnYuRFJPTkVfR0lUX0hUVFBfVVJMLFxuICAgICAgZGVmYXVsdEJyYW5jaDogZW52LkRST05FX1JFUE9fQlJBTkNILFxuICAgIH0sXG4gICAgZ2l0aHViQWN0aW9uczoge1xuICAgICAgc2hhOiBlbnYuR0lUSFVCX1NIQSxcbiAgICAgIGJyYW5jaDogZW52LkdIX0JSQU5DSCB8fCBlbnYuR0lUSFVCX1JFRixcbiAgICAgIGRlZmF1bHRCcmFuY2g6IGVudi5HSVRIVUJfQkFTRV9SRUYsXG4gICAgICByZW1vdGVCcmFuY2g6IGVudi5HSVRIVUJfSEVBRF9SRUYsXG4gICAgICBydW5BdHRlbXB0OiBlbnYuR0lUSFVCX1JVTl9BVFRFTVBULFxuICAgIH0sXG4gICAgZ2l0bGFiOiB7XG4gICAgICBzaGE6IGVudi5DSV9DT01NSVRfU0hBLFxuICAgICAgYnJhbmNoOiBlbnYuQ0lfQ09NTUlUX1JFRl9OQU1FLFxuICAgICAgbWVzc2FnZTogZW52LkNJX0NPTU1JVF9NRVNTQUdFLFxuICAgICAgYXV0aG9yTmFtZTogZW52LkdJVExBQl9VU0VSX05BTUUsXG4gICAgICBhdXRob3JFbWFpbDogZW52LkdJVExBQl9VU0VSX0VNQUlMLFxuICAgICAgcmVtb3RlT3JpZ2luOiBlbnYuQ0lfUkVQT1NJVE9SWV9VUkwsXG4gICAgICBkZWZhdWx0QnJhbmNoOiBlbnYuQ0lfREVGQVVMVF9CUkFOQ0gsXG4gICAgfSxcbiAgICBnb29nbGVDbG91ZDoge1xuICAgICAgc2hhOiBlbnYuQ09NTUlUX1NIQSxcbiAgICAgIGJyYW5jaDogZW52LkJSQU5DSF9OQU1FLFxuICAgICAgLy8gbWVzc2FnZTogPz9cbiAgICAgIC8vIGF1dGhvck5hbWU6ID8/XG4gICAgICAvLyBhdXRob3JFbWFpbDogPz9cbiAgICAgIC8vIHJlbW90ZU9yaWdpbjogPz8/XG4gICAgICAvLyBkZWZhdWx0QnJhbmNoOiA/P1xuICAgIH0sXG4gICAgamVua2luczoge1xuICAgICAgc2hhOiBlbnYuR0lUX0NPTU1JVCxcbiAgICAgIGJyYW5jaDogZW52LkdJVF9CUkFOQ0gsXG4gICAgICAvLyBtZXNzYWdlOiA/Pz9cbiAgICAgIC8vIGF1dGhvck5hbWU6ID8/P1xuICAgICAgLy8gYXV0aG9yRW1haWw6ID8/P1xuICAgICAgLy8gcmVtb3RlT3JpZ2luOiA/Pz9cbiAgICAgIC8vIGRlZmF1bHRCcmFuY2g6ID8/P1xuICAgIH0sXG4gICAgLy8gT25seSBmcm9tIGZvcmtzPyBodHRwczovL3NlbWFwaG9yZWNpLmNvbS9kb2NzL2F2YWlsYWJsZS1lbnZpcm9ubWVudC12YXJpYWJsZXMuaHRtbFxuICAgIHNlbWFwaG9yZToge1xuICAgICAgc2hhOiBlbnYuU0VNQVBIT1JFX0dJVF9TSEEsXG4gICAgICBicmFuY2g6IGVudi5TRU1BUEhPUkVfR0lUX0JSQU5DSCxcbiAgICAgIC8vIG1lc3NhZ2U6ID8/P1xuICAgICAgLy8gYXV0aG9yTmFtZTogPz8/XG4gICAgICAvLyBhdXRob3JFbWFpbDogPz8/XG4gICAgICByZW1vdGVPcmlnaW46IGVudi5TRU1BUEhPUkVfR0lUX1JFUE9fU0xVRyxcbiAgICAgIC8vIGRlZmF1bHRCcmFuY2g6ID8/P1xuICAgIH0sXG4gICAgc2hpcHBhYmxlOiB7XG4gICAgICBzaGE6IGVudi5DT01NSVQsXG4gICAgICBicmFuY2g6IGVudi5CUkFOQ0gsXG4gICAgICBtZXNzYWdlOiBlbnYuQ09NTUlUX01FU1NBR0UsXG4gICAgICBhdXRob3JOYW1lOiBlbnYuQ09NTUlUVEVSLFxuICAgICAgLy8gYXV0aG9yRW1haWw6ID8/P1xuICAgICAgLy8gcmVtb3RlT3JpZ2luOiA/Pz9cbiAgICAgIC8vIGRlZmF1bHRCcmFuY2g6ID8/P1xuICAgIH0sXG4gICAgc25hcDogbnVsbCxcbiAgICB0ZWFtY2l0eTogbnVsbCxcbiAgICB0ZWFtZm91bmRhdGlvbjoge1xuICAgICAgc2hhOiBlbnYuQlVJTERfU09VUkNFVkVSU0lPTixcbiAgICAgIGJyYW5jaDogZW52LkJVSUxEX1NPVVJDRUJSQU5DSE5BTUUsXG4gICAgICBtZXNzYWdlOiBlbnYuQlVJTERfU09VUkNFVkVSU0lPTk1FU1NBR0UsXG4gICAgICBhdXRob3JOYW1lOiBlbnYuQlVJTERfU09VUkNFVkVSU0lPTkFVVEhPUixcbiAgICB9LFxuICAgIHRyYXZpczoge1xuICAgICAgc2hhOiBlbnYuVFJBVklTX1BVTExfUkVRVUVTVF9TSEEgfHwgZW52LlRSQVZJU19DT01NSVQsXG4gICAgICAvLyBmb3IgUFJzLCBUUkFWSVNfQlJBTkNIIGlzIHRoZSBiYXNlIGJyYW5jaCBiZWluZyBtZXJnZWQgaW50b1xuICAgICAgYnJhbmNoOiBlbnYuVFJBVklTX1BVTExfUkVRVUVTVF9CUkFOQ0ggfHwgZW52LlRSQVZJU19CUkFOQ0gsXG4gICAgICAvLyBhdXRob3JOYW1lOiA/Pz9cbiAgICAgIC8vIGF1dGhvckVtYWlsOiA/Pz9cbiAgICAgIG1lc3NhZ2U6IGVudi5UUkFWSVNfQ09NTUlUX01FU1NBR0UsXG4gICAgICAvLyByZW1vdGVPcmlnaW46ID8/P1xuICAgICAgLy8gZGVmYXVsdEJyYW5jaDogPz8/XG4gICAgfSxcbiAgICB3ZXJja2VyOiBudWxsLFxuICAgIG5ldGxpZnk6IHtcbiAgICAgIHNoYTogZW52LkNPTU1JVF9SRUYsXG4gICAgICBicmFuY2g6IGVudi5CUkFOQ0gsXG4gICAgICByZW1vdGVPcmlnaW46IGVudi5SRVBPU0lUT1JZX1VSTCxcbiAgICB9LFxuICAgIGxheWVyY2k6IHtcbiAgICAgIHNoYTogZW52LkdJVF9DT01NSVQsXG4gICAgICBicmFuY2g6IGVudi5MQVlFUkNJX0JSQU5DSCxcbiAgICAgIG1lc3NhZ2U6IGVudi5HSVRfQ09NTUlUX1RJVExFLFxuICAgIH0sXG4gIH07XG59O1xuXG50eXBlIENpUHJvdmlkZXJEYXRhID0ge1xuICBzaGE/OiBzdHJpbmc7XG4gIGJyYW5jaD86IHN0cmluZztcbiAgbWVzc2FnZT86IHN0cmluZztcbiAgYXV0aG9yTmFtZT86IHN0cmluZztcbiAgYXV0aG9yRW1haWw/OiBzdHJpbmc7XG4gIHJlbW90ZU9yaWdpbj86IHN0cmluZztcbiAgZGVmYXVsdEJyYW5jaD86IHN0cmluZztcbiAgcmVtb3RlQnJhbmNoPzogc3RyaW5nO1xuICBydW5BdHRlbXB0Pzogc3RyaW5nO1xufTtcblxuaW50ZXJmYWNlIFByb3ZpZGVyQ29tbWl0UGFyYW1zUmVzIHtcbiAgW2tleTogc3RyaW5nXTogQ2lQcm92aWRlckRhdGEgfCBudWxsO1xufVxuXG5pbnRlcmZhY2UgUHJvdmlkZXJDaVBhcmFtc1JlcyB7XG4gIFtrZXk6IHN0cmluZ106IHtcbiAgICBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIH0gfCBudWxsO1xufVxuXG5jb25zdCBfZ2V0ID0gKGZuOiAoKSA9PiBQcm92aWRlckNvbW1pdFBhcmFtc1JlcyB8IFByb3ZpZGVyQ2lQYXJhbXNSZXMpID0+IHtcbiAgY29uc3QgcHJvdmlkZXJOYW1lID0gZ2V0Q2lQcm92aWRlcigpO1xuICBpZiAoIXByb3ZpZGVyTmFtZSkgcmV0dXJuIHt9O1xuXG4gIHJldHVybiBfLmNoYWluKGZuKCkpLmdldChwcm92aWRlck5hbWUpLnZhbHVlKCk7XG59O1xuXG4vKipcbiAqIElmIHRoZXJlIGlzIG5vIGJ1aWxkIElEIHNwZWNpZmljYWxseSBwcm92aWRlZCBieSB1c2VyXG4gKiBDaGVjayBpZiB3ZSBjYW4gZmV0Y2ggaXQgYXV0b21hdGljYWxseSBmcm9tIENJIHZhcmlhYmxlcy5cbiAqIFRoZSBwcm9jZXNzIHdpbGwgc3RvcCBpZiB3ZSBjYW5ub3QgZG8gaXRcbiAqIGh0dHBzOi8vZG9jcy5jeXByZXNzLmlvL2d1aWRlcy9yZWZlcmVuY2VzL2Vycm9yLW1lc3NhZ2VzI1dlLWNvdWxkLW5vdC1kZXRlcm1pbmUtYS11bmlxdWUtQ0ktYnVpbGQtSURcbiAqL1xuZnVuY3Rpb24gY2hlY2tGb3JDaUJ1aWxkRnJvbUNpKGNpUHJvdmlkZXI6IHN0cmluZyB8IG51bGwpIHtcbiAgaWYgKGNpUHJvdmlkZXIgJiYgZGV0ZWN0YWJsZUNpQnVpbGRJZFByb3ZpZGVycygpLmluY2x1ZGVzKGNpUHJvdmlkZXIpKVxuICAgIHJldHVybiB0cnVlO1xuXG4gIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXG4gICAgYENvdWxkIG5vdCBkZXRlcm1pbmUgQ0kgYnVpbGQgSUQgZnJvbSB0aGUgZW52aXJvbm1lbnQuIFBsZWFzZSBwcm92aWRlIGEgdW5pcXVlIENJIGJ1aWxkIElEIHVzaW5nIHRoZSAtLWNpLWJ1aWxkLWlkIENMSSBmbGFnIG9yICdjaUJ1aWxkSWQnIHBhcmFtZXRlciBmb3IgJ3J1bicgbWV0aG9kLmBcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3QoKSB7XG4gIHJldHVybiBfLmtleXMoQ0lfUFJPVklERVJTKTtcbn1cblxuLy8gZ3JhYiBhbGwgZGV0ZWN0YWJsZSBwcm92aWRlcnNcbi8vIHRoYXQgd2UgY2FuIGV4dHJhY3QgY2lCdWlsZElkIGZyb21cbmV4cG9ydCBmdW5jdGlvbiBkZXRlY3RhYmxlQ2lCdWlsZElkUHJvdmlkZXJzKCkge1xuICByZXR1cm4gXy5jaGFpbihfcHJvdmlkZXJDaVBhcmFtcygpKS5vbWl0QnkoXy5pc051bGwpLmtleXMoKS52YWx1ZSgpO1xufVxuXG5leHBvcnQgdHlwZSBDaVByb3ZpZGVyID0gc3RyaW5nIHwgbnVsbDtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldENpUHJvdmlkZXIoKTogQ2lQcm92aWRlciB7XG4gIHJldHVybiBfZGV0ZWN0UHJvdmlkZXJOYW1lKCkgfHwgbnVsbDtcbn1cblxuZXhwb3J0IHR5cGUgQ2lQYXJhbXMgPSB7XG4gIFtrZXk6IHN0cmluZ106IHN0cmluZyB8IHVuZGVmaW5lZDtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDaVBhcmFtcygpIHtcbiAgcmV0dXJuIF9nZXQoX3Byb3ZpZGVyQ2lQYXJhbXMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29tbWl0UGFyYW1zKCkge1xuICByZXR1cm4gX2dldChfcHJvdmlkZXJDb21taXRQYXJhbXMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q0koY2lCdWlsZElkPzogc3RyaW5nKSB7XG4gIGNvbnN0IHBhcmFtcyA9IGdldENpUGFyYW1zKCk7XG4gIGNvbnN0IHByb3ZpZGVyID0gZ2V0Q2lQcm92aWRlcigpO1xuICBpZiAoIWNpQnVpbGRJZCkgY2hlY2tGb3JDaUJ1aWxkRnJvbUNpKHByb3ZpZGVyKTtcblxuICBkZWJ1ZyhcImRldGVjdGVkIENJIHByb3ZpZGVyOiAlc1wiLCBwcm92aWRlcik7XG4gIGRlYnVnKFwiZGV0ZWN0ZWQgQ0kgcGFyYW1zOiAlT1wiLCBwYXJhbXMpO1xuICByZXR1cm4ge1xuICAgIHBhcmFtcyxcbiAgICBwcm92aWRlcixcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbW1pdERlZmF1bHRzKGV4aXN0aW5nSW5mbzogQ2lQcm92aWRlckRhdGEpIHtcbiAgZGVidWcoXCJnaXQgY29tbWl0IGV4aXN0aW5nIGluZm9cIik7XG4gIGRlYnVnKGV4aXN0aW5nSW5mbyk7XG5cbiAgY29uc3QgY29tbWl0UGFyYW1zT2JqID0gZ2V0Q29tbWl0UGFyYW1zKCk7XG5cbiAgZGVidWcoXCJjb21taXQgaW5mbyBmcm9tIHByb3ZpZGVyIGVudmlyb25tZW50IHZhcmlhYmxlczogJU9cIiwgY29tbWl0UGFyYW1zT2JqKTtcblxuICAvLyBiYXNlZCBvbiB0aGUgZXhpc3RpbmdJbmZvIHByb3BlcnRpZXNcbiAgLy8gbWVyZ2UgaW4gdGhlIGNvbW1pdFBhcmFtcyBpZiBudWxsIG9yIHVuZGVmaW5lZFxuICAvLyBkZWZhdWx0aW5nIGJhY2sgdG8gbnVsbCBpZiBhbGwgZmFpbHNcbiAgLy8gTk9URTogb25seSBwcm9wZXJ0aWVzIGRlZmluZWQgaW4gXCJleGlzdGluZ0luZm9cIiB3aWxsIGJlIHJldHVybmVkXG4gIGNvbnN0IGNvbWJpbmVkID0gXy50cmFuc2Zvcm0oXG4gICAgZXhpc3RpbmdJbmZvLFxuICAgIChcbiAgICAgIG1lbW86IHsgW21lbW9LZXk6IHN0cmluZ106IHN0cmluZyB8IG51bGwgfSxcbiAgICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgICBrZXk6IHN0cmluZ1xuICAgICkgPT4ge1xuICAgICAgcmV0dXJuIChtZW1vW2tleV0gPSBfLmRlZmF1bHRUbyh2YWx1ZSB8fCBjb21taXRQYXJhbXNPYmpba2V5XSwgbnVsbCkpO1xuICAgIH1cbiAgKTtcblxuICBkZWJ1ZyhcImNvbWJpbmVkIGdpdCBhbmQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZyb20gcHJvdmlkZXJcIik7XG4gIGRlYnVnKGNvbWJpbmVkKTtcblxuICByZXR1cm4gY29tYmluZWQ7XG59XG4iLCAiZXhwb3J0ICogZnJvbSBcIi4vY29uZmlnXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9wYXJhbXNcIjtcbiIsICJpbXBvcnQgRGVidWcgZnJvbSBcImRlYnVnXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgRGV0ZWN0ZWRCcm93c2VyLCBWYWxpZGF0ZWRDdXJyZW50c1BhcmFtZXRlcnMgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGJvb3RDeXByZXNzIH0gZnJvbSBcIi4uL2Jvb3RzdHJhcC9ib290c3RyYXBcIjtcbmltcG9ydCB7IHdhcm4gfSBmcm9tIFwiLi4vbG9nXCI7XG5pbXBvcnQgeyByZXF1aXJlIH0gZnJvbSBcIi4uL3JlcXVpcmVcIjtcbmltcG9ydCB7IGdldFJhbmRvbVBvcnQgfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuY29uc3QgZGVidWcgPSBEZWJ1ZyhcImN1cnJlbnRzOmNvbmZpZ1wiKTtcblxuZXhwb3J0IHR5cGUgRTJFQ29uZmlnID0ge1xuICBiYXRjaFNpemU6IG51bWJlcjtcbn07XG5leHBvcnQgdHlwZSBDb21wb25lbnRDb25maWcgPSB7XG4gIGJhdGNoU2l6ZTogbnVtYmVyO1xufTtcbmV4cG9ydCB0eXBlIEN1cnJlbnRzQ29uZmlnID0ge1xuICBwcm9qZWN0SWQ/OiBzdHJpbmc7XG4gIHJlY29yZEtleT86IHN0cmluZztcbiAgY2xvdWRTZXJ2aWNlVXJsOiBzdHJpbmc7XG4gIGUyZTogRTJFQ29uZmlnO1xuICBjb21wb25lbnQ6IENvbXBvbmVudENvbmZpZztcbn07XG5cbmxldCBfY29uZmlnOiBDdXJyZW50c0NvbmZpZyB8IG51bGwgPSBudWxsO1xuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRzQ29uZmlnKCk6IEN1cnJlbnRzQ29uZmlnIHtcbiAgaWYgKF9jb25maWcpIHtcbiAgICByZXR1cm4gX2NvbmZpZztcbiAgfVxuXG4gIGNvbnN0IGNvbmZpZ0ZpbGVQYXRoID0gZ2V0Q29uZmlnRmlsZVBhdGgoKTtcbiAgZGVidWcoXCJsb2FkaW5nIGN1cnJlbnRzIGNvbmZpZyBmaWxlIGZyb20gJyVzJ1wiLCBjb25maWdGaWxlUGF0aCk7XG5cbiAgY29uc3QgZGVmYXVsdENvbmZpZzogQ3VycmVudHNDb25maWcgPSB7XG4gICAgZTJlOiB7XG4gICAgICBiYXRjaFNpemU6IDMsXG4gICAgfSxcbiAgICBjb21wb25lbnQ6IHtcbiAgICAgIGJhdGNoU2l6ZTogNSxcbiAgICB9LFxuICAgIGNsb3VkU2VydmljZVVybDogXCJodHRwczovL2N5LmN1cnJlbnRzLmRldlwiLFxuICB9O1xuXG4gIHRyeSB7XG4gICAgY29uc3QgZnNDb25maWcgPSByZXF1aXJlKGNvbmZpZ0ZpbGVQYXRoKTtcbiAgICBfY29uZmlnID0ge1xuICAgICAgLi4uZGVmYXVsdENvbmZpZyxcbiAgICAgIC4uLmZzQ29uZmlnLFxuICAgIH0gYXMgQ3VycmVudHNDb25maWc7XG4gICAgcmV0dXJuIF9jb25maWc7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB3YXJuKFwiZmFpbGVkIHRvIGxvYWQgY29uZmlnIGZpbGU6ICVzXCIsIGNvbmZpZ0ZpbGVQYXRoKTtcbiAgICBkZWJ1ZyhcImZhaWx1cmUgZGV0YWlsczogJXNcIiwgZSk7XG4gICAgX2NvbmZpZyA9IGRlZmF1bHRDb25maWc7XG4gICAgcmV0dXJuIF9jb25maWc7XG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgTWVyZ2VkQ29uZmlnID0gQXdhaXRlZDxSZXR1cm5UeXBlPHR5cGVvZiBnZXRNZXJnZWRDb25maWc+PjtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNZXJnZWRDb25maWcocGFyYW1zOiBWYWxpZGF0ZWRDdXJyZW50c1BhcmFtZXRlcnMpIHtcbiAgZGVidWcoXCJyZXNvbHZpbmcgY3lwcmVzcyBjb25maWcgXCIpO1xuICBjb25zdCBjeXByZXNzUmVzb2x2ZWRDb25maWc6XG4gICAgfCAoQ3lwcmVzcy5SZXNvbHZlZENvbmZpZ09wdGlvbnMgJiB7XG4gICAgICAgIHByb2plY3RSb290OiBzdHJpbmc7XG4gICAgICAgIHJhd0pzb246IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICAgICAgICBicm93c2VyczogRGV0ZWN0ZWRCcm93c2VyW107XG4gICAgICB9KVxuICAgIHwgdW5kZWZpbmVkID0gYXdhaXQgYm9vdEN5cHJlc3MoZ2V0UmFuZG9tUG9ydCgpLCBwYXJhbXMpO1xuXG4gIGRlYnVnKFwiY3lwcmVzcyByZXNvbHZlZENvbmZpZzogJU9cIiwgY3lwcmVzc1Jlc29sdmVkQ29uZmlnKTtcblxuICAvLyBAdHMtaWdub3JlXG4gIGNvbnN0IHJhd0UyRVBhdHRlcm4gPSBjeXByZXNzUmVzb2x2ZWRDb25maWcucmF3SnNvbj8uZTJlPy5zcGVjUGF0dGVybjtcbiAgbGV0IGFkZGl0aW9uYWxJZ25vcmVQYXR0ZXJuOiBzdHJpbmdbXSA9IFtdO1xuICBpZiAocGFyYW1zLnRlc3RpbmdUeXBlID09PSBcImNvbXBvbmVudFwiICYmIHJhd0UyRVBhdHRlcm4pIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgYWRkaXRpb25hbElnbm9yZVBhdHRlcm4gPSByYXdFMkVQYXR0ZXJuO1xuICB9XG5cbiAgY29uc3QgcmVzdWx0ID0ge1xuICAgIHByb2plY3RSb290OiBjeXByZXNzUmVzb2x2ZWRDb25maWc/LnByb2plY3RSb290IHx8IHByb2Nlc3MuY3dkKCksXG4gICAgcHJvamVjdElkOiBwYXJhbXMucHJvamVjdElkLFxuICAgIHNwZWNQYXR0ZXJuOiBjeXByZXNzUmVzb2x2ZWRDb25maWc/LnNwZWNQYXR0ZXJuIHx8IFwiKiovKi4qXCIsXG4gICAgZXhjbHVkZVNwZWNQYXR0ZXJuOlxuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgY3lwcmVzc1Jlc29sdmVkQ29uZmlnPy5yZXNvbHZlZC5leGNsdWRlU3BlY1BhdHRlcm4udmFsdWUgPz8gW10sXG4gICAgYWRkaXRpb25hbElnbm9yZVBhdHRlcm4sXG4gICAgcmVzb2x2ZWQ6IGN5cHJlc3NSZXNvbHZlZENvbmZpZyxcbiAgfTtcbiAgZGVidWcoXCJtZXJnZWQgY29uZmlnOiAlT1wiLCByZXN1bHQpO1xuICByZXR1cm4gcmVzdWx0O1xuXG4gIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY3lwcmVzcy1pby9jeXByZXNzL2Jsb2IvZWQwNjY4ZTI0YzJlZTY3NTNiYmQyNWFlNDY3Y2U5NGFlNTg1Nzc0MS9wYWNrYWdlcy9jb25maWcvc3JjL29wdGlvbnMudHMjTDQ1N1xuICAvLyBhbmQgaHR0cHM6Ly9naXRodWIuY29tL2N5cHJlc3MtaW8vY3lwcmVzcy9ibG9iL2RldmVsb3AvcGFja2FnZXMvY29uZmlnL3NyYy9wcm9qZWN0L3V0aWxzLnRzI0w0MTJcbn1cblxuZnVuY3Rpb24gZ2V0Q29uZmlnRmlsZVBhdGgoZXhwbGljaXRMb2NhdGlvbiA9IG51bGwpIHtcbiAgcmV0dXJuIHBhdGgucmVzb2x2ZShleHBsaWNpdExvY2F0aW9uID8/IHByb2Nlc3MuY3dkKCksIFwiY3VycmVudHMuY29uZmlnLmpzXCIpO1xufVxuIiwgImltcG9ydCB7IGdldEJpblBhdGggfSBmcm9tIFwiY3kyXCI7XG5pbXBvcnQgeyBWYWxpZGF0ZWRDdXJyZW50c1BhcmFtZXRlcnMgfSBmcm9tIFwiY3lwcmVzcy1jbG91ZC90eXBlc1wiO1xuaW1wb3J0IERlYnVnIGZyb20gXCJkZWJ1Z1wiO1xuaW1wb3J0IGV4ZWNhLCB7IEV4ZWNhRXJyb3IgfSBmcm9tIFwiZXhlY2FcIjtcbmltcG9ydCBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCB7IFZhbGlkYXRpb25FcnJvciB9IGZyb20gXCIuLi9lcnJvcnNcIjtcbmltcG9ydCB7IGNyZWF0ZVRlbXBGaWxlIH0gZnJvbSBcIi4uL2ZzXCI7XG5pbXBvcnQgeyBib2xkLCBpbmZvIH0gZnJvbSBcIi4uL2xvZ1wiO1xuaW1wb3J0IHsgcmVxdWlyZSB9IGZyb20gXCIuLi9yZXF1aXJlXCI7XG5pbXBvcnQgeyBnZXRCb290c3RyYXBBcmdzIH0gZnJvbSBcIi4vc2VyaWFsaXplclwiO1xuXG5jb25zdCBkZWJ1ZyA9IERlYnVnKFwiY3VycmVudHM6Ym9vdFwiKTtcblxuZXhwb3J0IGNvbnN0IGJvb3RDeXByZXNzID0gYXN5bmMgKFxuICBwb3J0OiBudW1iZXIsXG4gIHBhcmFtczogVmFsaWRhdGVkQ3VycmVudHNQYXJhbWV0ZXJzXG4pID0+IHtcbiAgZGVidWcoXCJib290aW5nIGN5cHJlc3MuLi5cIik7XG4gIGNvbnN0IHRlbXBGaWxlUGF0aCA9IGF3YWl0IGNyZWF0ZVRlbXBGaWxlKCk7XG5cbiAgY29uc3QgY3lwcmVzc0JpbiA9IGF3YWl0IGdldEJpblBhdGgocmVxdWlyZS5yZXNvbHZlKFwiY3lwcmVzc1wiKSk7XG4gIGRlYnVnKFwiY3lwcmVzcyBleGVjdXRhYmxlIGxvY2F0aW9uOiAlc1wiLCBjeXByZXNzQmluKTtcblxuICAvLyBpdCBpcyBpbXBvcnRhbnQgdG8gcGFzcyB0aGUgc2FtZSBhcmdzIGluIG9yZGVyIHRvIGdldCB0aGUgc2FtZSBjb25maWcgYXMgZm9yIHRoZSBhY3R1YWwgcnVuXG4gIGNvbnN0IGFyZ3MgPSBnZXRCb290c3RyYXBBcmdzKHsgcG9ydCwgdGVtcEZpbGVQYXRoLCBwYXJhbXMgfSk7XG4gIGRlYnVnKFwiYm9vdGluZyBjeXByZXNzIHdpdGggYXJnczogJW9cIiwgYXJncyk7XG4gIGNvbnN0IHsgc3Rkb3V0LCBzdGRlcnIgfSA9IGF3YWl0IGV4ZWNDeXByZXNzKGN5cHJlc3NCaW4sIGFyZ3MpO1xuXG4gIGlmICghZnMuZXhpc3RzU3luYyh0ZW1wRmlsZVBhdGgpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYENhbm5vdCByZXNvbHZlIGN5cHJlc3MgY29uZmlndXJhdGlvbiBmcm9tICR7dGVtcEZpbGVQYXRofS4gUGxlYXNlIHJlcG9ydCB0aGUgaXNzdWUuYFxuICAgICk7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCBmID0gZnMucmVhZEZpbGVTeW5jKHRlbXBGaWxlUGF0aCwgXCJ1dGYtOFwiKTtcbiAgICBpZiAoIWYpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIklzIGN5cHJlc3MtY2xvdWQvcGx1Z2luIGluc3RhbGxlZD9cIik7XG4gICAgfVxuICAgIGRlYnVnKFwiY3lwcmVzcyBjb25maWcgJyVzJzogJyVzJ1wiLCB0ZW1wRmlsZVBhdGgsIGYpO1xuICAgIHJldHVybiBKU09OLnBhcnNlKGYpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBkZWJ1ZyhcInJlYWQgY29uZmlnIHRlbXAgZmlsZSBmYWlsZWQ6ICVvXCIsIGVycik7XG4gICAgaW5mbyhib2xkKFwiQ3lwcmVzcyBzdGRvdXQ6XFxuXCIpLCBzdGRvdXQpO1xuICAgIGluZm8oYm9sZChcIkN5cHJlc3Mgc3RkZXJyOlxcblwiKSwgc3RkZXJyKTtcblxuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYFVuYWJsZSB0byByZXNvbHZlIGN5cHJlc3MgY29uZmlndXJhdGlvblxuLSBtYWtlIHN1cmUgdGhhdCAnY3lwcmVzcy1jbG91ZC9wbHVnaW4nIGlzIGluc3RhbGxlZFxuLSByZXBvcnQgdGhlIGlzc3VlIHRvZ2V0aGVyIHdpdGggY3lwcmVzcyBzdGRvdXQgYW5kIHN0ZGVyclxuYCk7XG4gIH1cbn07XG5cbmFzeW5jIGZ1bmN0aW9uIGV4ZWNDeXByZXNzKGN5cHJlc3NCaW46IHN0cmluZywgYXJnczogcmVhZG9ubHkgc3RyaW5nW10pIHtcbiAgbGV0IHN0ZG91dCA9IFwiXCI7XG4gIGxldCBzdGRlcnIgPSBcIlwiO1xuICB0cnkge1xuICAgIGF3YWl0IGV4ZWNhKGN5cHJlc3NCaW4sIFtcInJ1blwiLCAuLi5hcmdzXSwge1xuICAgICAgc3RkaW86IFwicGlwZVwiLFxuICAgICAgZW52OiB7XG4gICAgICAgIC4uLnByb2Nlc3MuZW52LFxuICAgICAgICAvLyBwcmV2ZW50IHdhcm5pbmdzIGFib3V0IHJlY29yZGluZyBtb2RlXG4gICAgICAgIENZUFJFU1NfUkVDT1JEX0tFWTogdW5kZWZpbmVkLFxuICAgICAgICBDWVBSRVNTX1BST0pFQ1RfSUQ6IHVuZGVmaW5lZCxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGRlYnVnKFwiZXhlYyBjeXByZXNzIGZhaWxlZCAoY2VydGFpbiBmYWlsdXJlcyBhcmUgZXhwZWN0ZWQpOiAlb1wiLCBlcnIpO1xuICAgIHN0ZG91dCA9IChlcnIgYXMgRXhlY2FFcnJvcikuc3Rkb3V0O1xuICAgIHN0ZGVyciA9IChlcnIgYXMgRXhlY2FFcnJvcikuc3RkZXJyO1xuICB9XG4gIHJldHVybiB7IHN0ZG91dCwgc3RkZXJyIH07XG59XG4iLCAiaW1wb3J0IHsgZmlsZSB9IGZyb20gXCJ0bXAtcHJvbWlzZVwiO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlVGVtcEZpbGUgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IHsgcGF0aCB9ID0gYXdhaXQgZmlsZSgpO1xuICByZXR1cm4gcGF0aDtcbn07XG4iLCAiaW1wb3J0IHtcbiAgQ3VycmVudHNSdW5QYXJhbWV0ZXJzLFxuICBTdHJpcHBlZEN5cHJlc3NNb2R1bGVBUElPcHRpb25zLFxufSBmcm9tIFwiY3lwcmVzcy1jbG91ZC90eXBlc1wiO1xuaW1wb3J0IERlYnVnIGZyb20gXCJkZWJ1Z1wiO1xuaW1wb3J0IF8gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IHsgY3VzdG9tQWxwaGFiZXQgfSBmcm9tIFwibmFub2lkXCI7XG5jb25zdCBkZWJ1ZyA9IERlYnVnKFwiY3VycmVudHM6Ym9vdFwiKTtcblxuaW1wb3J0IHsgZ2V0U3RyaXBwZWRDeXByZXNzT3B0aW9ucyB9IGZyb20gXCIuLi9jb25maWdcIjtcbmNvbnN0IGdldER1bW15U3BlYyA9IGN1c3RvbUFscGhhYmV0KFwiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIiwgMTApO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Qm9vdHN0cmFwQXJncyh7XG4gIHBhcmFtcyxcbiAgcG9ydCxcbiAgdGVtcEZpbGVQYXRoLFxufToge1xuICBwYXJhbXM6IEN1cnJlbnRzUnVuUGFyYW1ldGVycztcbiAgcG9ydDogbnVtYmVyO1xuICB0ZW1wRmlsZVBhdGg6IHN0cmluZztcbn0pIHtcbiAgcmV0dXJuIF8uY2hhaW4oZ2V0Q3lwcmVzc0NMSVBhcmFtcyhwYXJhbXMpKVxuICAgIC50aHJ1KChvcHRzKSA9PiAoe1xuICAgICAgLi4ub3B0cyxcbiAgICAgIC8vIG1lcmdlIHRoZSBlbnYgd2l0aCB0aGUgY3VycmVudHMgc3BlY2lmaWMgZW52IHZhcmlhYmxlc1xuICAgICAgZW52OiB7XG4gICAgICAgIC4uLihvcHRzLmVudiA/PyB7fSksXG4gICAgICAgIGN1cnJlbnRzX3RlbXBfZmlsZTogdGVtcEZpbGVQYXRoLFxuICAgICAgICBjdXJyZW50c19wb3J0OiBwb3J0LFxuICAgICAgICBjdXJyZW50c19kZWJ1Z19lbmFibGVkOiBwcm9jZXNzLmVudi5ERUJVRz8uaW5jbHVkZXMoXCJjdXJyZW50czpcIilcbiAgICAgICAgICA/IHRydWVcbiAgICAgICAgICA6IGZhbHNlLFxuICAgICAgfSxcbiAgICB9KSlcbiAgICAudGFwKChvcHRzKSA9PiB7XG4gICAgICBkZWJ1ZyhcImN5cHJlc3MgYm9vdHN0cmFwIHBhcmFtczogJW9cIiwgb3B0cyk7XG4gICAgfSlcbiAgICAudGhydShzZXJpYWxpemVPcHRpb25zKVxuICAgIC50YXAoKG9wdHMpID0+IHtcbiAgICAgIGRlYnVnKFwiY3lwcmVzcyBib290c3RyYXAgc2VyaWFsaXplZCBwYXJhbXM6ICVvXCIsIG9wdHMpO1xuICAgIH0pXG4gICAgLmZpbHRlcihCb29sZWFuKVxuICAgIC50aHJ1KChhcmdzKSA9PiB7XG4gICAgICByZXR1cm4gW1xuICAgICAgICAuLi5hcmdzLFxuICAgICAgICBcIi0tc3BlY1wiLFxuICAgICAgICBnZXREdW1teVNwZWMoKSxcbiAgICAgICAgcGFyYW1zLnRlc3RpbmdUeXBlID09PSBcImNvbXBvbmVudFwiID8gXCItLWNvbXBvbmVudFwiIDogXCItLWUyZVwiLFxuICAgICAgXTtcbiAgICB9KVxuICAgIC52YWx1ZSgpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIEN1cnJlbnRzIG9wdGlvbnMgdG8gQ3lwcmVzcyBDTEkgcGFyYW1zLlxuICogQ3lwcmVzcyBDTEkgb3B0aW9ucyBhcmUgZGlmZmVyZW50IGZyb20gQ3lwcmVzcyBtb2R1bGUgQVBJIG9wdGlvbnMuXG4gKlxuICogQHBhcmFtIHBhcmFtcyBDdXJyZW50cyBwYXJhbVxuICogQHJldHVybnMgQ3lwcmVzcyBDTEkgcGFyYW1zXG4gKiBAc2VlIGh0dHBzOi8vZG9jcy5jeXByZXNzLmlvL2d1aWRlcy9ndWlkZXMvY29tbWFuZC1saW5lI2N5cHJlc3MtcnVuXG4gKiBAc2VlIGh0dHBzOi8vZG9jcy5jeXByZXNzLmlvL2FwaS9tb2R1bGUtYXBpXG4gKi9cbmZ1bmN0aW9uIGdldEN5cHJlc3NDTElQYXJhbXMoXG4gIHBhcmFtczogQ3VycmVudHNSdW5QYXJhbWV0ZXJzXG4pOiBTdHJpcHBlZEN5cHJlc3NNb2R1bGVBUElPcHRpb25zIHtcbiAgY29uc3QgcmVzdWx0ID0gZ2V0U3RyaXBwZWRDeXByZXNzT3B0aW9ucyhwYXJhbXMpO1xuICBjb25zdCB0ZXN0aW5nVHlwZSA9XG4gICAgcmVzdWx0LnRlc3RpbmdUeXBlID09PSBcImNvbXBvbmVudFwiXG4gICAgICA/IHtcbiAgICAgICAgICBjb21wb25lbnQ6IHRydWUsXG4gICAgICAgIH1cbiAgICAgIDoge307XG4gIHJldHVybiB7XG4gICAgLi4uXy5vbWl0KHJlc3VsdCwgXCJ0ZXN0aW5nVHlwZVwiKSxcbiAgICAuLi50ZXN0aW5nVHlwZSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gc2VyaWFsaXplT3B0aW9ucyhvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IHN0cmluZ1tdIHtcbiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpXG4gICAgLmZsYXRNYXAoKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgY29uc3QgX2tleSA9IGRhc2hlZChrZXkpO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSB0cnVlID8gW2AtLSR7X2tleX1gXSA6IFtdO1xuICAgICAgfVxuXG4gICAgICBpZiAoXy5pc09iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIFtgLS0ke19rZXl9YCwgc2VyaWFsaXplQ29tcGxleFBhcmFtKHZhbHVlKV07XG4gICAgICB9XG5cbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHJldHVybiBbYC0tJHtfa2V5fWAsIHZhbHVlLnRvU3RyaW5nKCldO1xuICAgIH0pXG4gICAgLmZpbHRlcihCb29sZWFuKTtcbn1cblxuZnVuY3Rpb24gc2VyaWFsaXplQ29tcGxleFBhcmFtKHBhcmFtOiB7fSkge1xuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocGFyYW0pO1xufVxuXG5jb25zdCBkYXNoZWQgPSAodjogc3RyaW5nKSA9PiB2LnJlcGxhY2UoL1tBLVpdL2csIChtKSA9PiBcIi1cIiArIG0udG9Mb3dlckNhc2UoKSk7XG4iLCAiaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHRvQXJyYXkodmFsPzogc3RyaW5nIHwgc3RyaW5nW10pIHtcbiAgcmV0dXJuIHZhbCA/ICh0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiID8gW3ZhbF0gOiB2YWwpIDogW107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b1Bvc2l4KGZpbGU6IHN0cmluZywgc2VwOiBzdHJpbmcgPSBwYXRoLnNlcCkge1xuICByZXR1cm4gZmlsZS5zcGxpdChzZXApLmpvaW4ocGF0aC5wb3NpeC5zZXApO1xufVxuXG5leHBvcnQgY29uc3QgZ2V0UmFuZG9tUG9ydCA9ICgpID0+IHtcbiAgY29uc3QgbWluID0gMTAyNDtcbiAgY29uc3QgbWF4ID0gNjU1MzU7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xufTtcbiIsICJpbXBvcnQge1xuICBDdXJyZW50c1J1blBhcmFtZXRlcnMsXG4gIFN0cmlwcGVkQ3lwcmVzc01vZHVsZUFQSU9wdGlvbnMsXG4gIFZhbGlkYXRlZEN1cnJlbnRzUGFyYW1ldGVycyxcbn0gZnJvbSBcImN5cHJlc3MtY2xvdWQvdHlwZXNcIjtcbmltcG9ydCBEZWJ1ZyBmcm9tIFwiZGVidWdcIjtcbmltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCB7IFZhbGlkYXRpb25FcnJvciB9IGZyb20gXCIuLi9lcnJvcnNcIjtcbmltcG9ydCB7IGVycm9yIH0gZnJvbSBcIi4uL2xvZ1wiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudHNDb25maWcgfSBmcm9tIFwiLi9jb25maWdcIjtcbmNvbnN0IGRlYnVnID0gRGVidWcoXCJjdXJyZW50czp2YWxpZGF0ZVBhcmFtc1wiKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGZhbGxiYWNrKC4uLmFyZ3M6IHN0cmluZ1tdKSB7XG4gIHJldHVybiBhcmdzLmZpbmQoKGFyZykgPT4gYXJnICE9PSB1bmRlZmluZWQgJiYgYXJnICE9PSBudWxsICYmIGFyZyAhPT0gXCJcIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlQ3VycmVudHNQYXJhbXMoXG4gIHBhcmFtczogQ3VycmVudHNSdW5QYXJhbWV0ZXJzXG4pOiBDdXJyZW50c1J1blBhcmFtZXRlcnMge1xuICBjb25zdCBjb25maWdGcm9tRmlsZSA9IGdldEN1cnJlbnRzQ29uZmlnKCk7XG5cbiAgY29uc3QgY2xvdWRTZXJ2aWNlVXJsID1cbiAgICBwYXJhbXMuY2xvdWRTZXJ2aWNlVXJsID8/XG4gICAgcHJvY2Vzcy5lbnYuQ1VSUkVOVFNfQVBJX1VSTCA/P1xuICAgIGNvbmZpZ0Zyb21GaWxlLmNsb3VkU2VydmljZVVybDtcblxuICBjb25zdCByZWNvcmRLZXkgPVxuICAgIHBhcmFtcy5yZWNvcmRLZXkgPz9cbiAgICBwcm9jZXNzLmVudi5DVVJSRU5UU19SRUNPUkRfS0VZID8/XG4gICAgY29uZmlnRnJvbUZpbGUucmVjb3JkS2V5O1xuXG4gIGNvbnN0IHByb2plY3RJZCA9XG4gICAgcGFyYW1zLnByb2plY3RJZCA/P1xuICAgIHByb2Nlc3MuZW52LkNVUlJFTlRTX1BST0pFQ1RfSUQgPz9cbiAgICBjb25maWdGcm9tRmlsZS5wcm9qZWN0SWQ7XG5cbiAgY29uc3QgdGVzdGluZ1R5cGUgPSBwYXJhbXMudGVzdGluZ1R5cGUgPz8gXCJlMmVcIjtcblxuICBjb25zdCBiYXRjaFNpemUgPVxuICAgIHRlc3RpbmdUeXBlID09PSBcImUyZVwiXG4gICAgICA/IGNvbmZpZ0Zyb21GaWxlLmUyZS5iYXRjaFNpemVcbiAgICAgIDogY29uZmlnRnJvbUZpbGUuY29tcG9uZW50LmJhdGNoU2l6ZTtcblxuICAvLyBiYXRjaFNpemUgYW5kIGNsb3VkU2VydmljZVVybCBkZWZhdWx0cyBhcmUgaW4gZ2V0Q3VycmVudHNDb25maWcoKVxuICByZXR1cm4ge1xuICAgIC4uLnBhcmFtcyxcbiAgICBjbG91ZFNlcnZpY2VVcmwsXG4gICAgcmVjb3JkS2V5LFxuICAgIHByb2plY3RJZCxcbiAgICBiYXRjaFNpemUsXG4gICAgdGVzdGluZ1R5cGUsXG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBwcm9qZWN0SWRFcnJvciA9IGBDYW5ub3QgcmVzb2x2ZSBwcm9qZWN0SWQuIFBsZWFzZSB1c2Ugb25lIG9mIHRoZSBmb2xsb3dpbmc6XG4tIHNldCBDVVJSRU5UU19QUk9KRUNUX0lEIGVudmlyb25tZW50IHZhcmlhYmxlXG4tIHNldCBcInByb2plY3RJZFwiIGluIFwiY3VycmVudHMuY29uZmlnLmpzXCIgZmlsZVxuLSBwcm92aWRlIGl0IGFzIGEgXCJwcm9qZWN0SWRcIiBwcm9wZXJ0eSBmb3IgXCJydW5cIiBBUEkgbWV0aG9kYDtcblxuZXhwb3J0IGNvbnN0IGNsb3VkU2VydmljZVVybEVycm9yID0gYENhbm5vdCByZXNvbHZlIGNsb3VkIHNlcnZpY2UgVVJMLiBQbGVhc2UgdXNlIG9uZSBvZiB0aGUgZm9sbG93aW5nOlxuLSBzZXQgQ1VSUkVOVFNfQVBJX1VSTCBlbnZpcm9ubWVudCB2YXJpYWJsZVxuLSBzZXQgXCJjbG91ZFNlcnZpY2VVcmxcIiBpbiBcImN1cnJlbnRzLmNvbmZpZy5qc1wiIGZpbGVcbi0gcHJvdmlkZSBpdCBhcyBhIFwiY2xvdWRTZXJ2aWNlVXJsXCIgcHJvcGVydHkgZm9yIFwicnVuXCIgQVBJIG1ldGhvZGA7XG5cbmV4cG9ydCBjb25zdCBjbG91ZFNlcnZpY2VJbnZhbGlkVXJsRXJyb3IgPSBgSW52YWxpZCBjbG91ZCBzZXJ2aWNlIFVSTCBwcm92aWRlZGA7XG5cbmV4cG9ydCBjb25zdCByZWNvcmRLZXlFcnJvciA9IGBDYW5ub3QgcmVzb2x2ZSByZWNvcmQga2V5LiBQbGVhc2UgdXNlIG9uZSBvZiB0aGUgZm9sbG93aW5nOlxuLSBzZXQgQ1VSUkVOVFNfUkVDT1JEX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZVxuLSBwYXNzIGl0IGFzIGEgY2xpIGZsYWcgJy1rLCAtLWtleSA8cmVjb3JkLWtleT4nXG4tIHNldCBcInJlY29yZEtleVwiIGluIFwiY3VycmVudHMuY29uZmlnLmpzXCIgZmlsZVxuLSBwcm92aWRlIGl0IGFzIGEgXCJyZWNvcmRLZXlcIiBwcm9wZXJ0eSBmb3IgXCJydW5cIiBBUEkgbWV0aG9kYDtcblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUGFyYW1zKFxuICBfcGFyYW1zOiBDdXJyZW50c1J1blBhcmFtZXRlcnNcbik6IFZhbGlkYXRlZEN1cnJlbnRzUGFyYW1ldGVycyB7XG4gIGNvbnN0IHBhcmFtcyA9IHJlc29sdmVDdXJyZW50c1BhcmFtcyhfcGFyYW1zKTtcbiAgaWYgKCFwYXJhbXMuY2xvdWRTZXJ2aWNlVXJsKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihjbG91ZFNlcnZpY2VVcmxFcnJvcik7XG4gIH1cbiAgaWYgKCFwYXJhbXMucHJvamVjdElkKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihwcm9qZWN0SWRFcnJvcik7XG4gIH1cbiAgaWYgKCFwYXJhbXMucmVjb3JkS2V5KSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihyZWNvcmRLZXlFcnJvcik7XG4gIH1cblxuICAvLyB2YWxpZGF0ZSBjbG91ZFNlcnZpY2VVcmxcbiAgdHJ5IHtcbiAgICBuZXcgVVJMKHBhcmFtcy5jbG91ZFNlcnZpY2VVcmwpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxuICAgICAgYCR7Y2xvdWRTZXJ2aWNlSW52YWxpZFVybEVycm9yfTogXCIke3BhcmFtcy5jbG91ZFNlcnZpY2VVcmx9XCJgXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IHJlcXVpcmVkUGFyYW1ldGVyczogQXJyYXk8a2V5b2YgQ3VycmVudHNSdW5QYXJhbWV0ZXJzPiA9IFtcbiAgICBcInRlc3RpbmdUeXBlXCIsXG4gICAgXCJiYXRjaFNpemVcIixcbiAgXTtcbiAgcmVxdWlyZWRQYXJhbWV0ZXJzLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGlmICh0eXBlb2YgcGFyYW1zW2tleV0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGVycm9yKFxuICAgICAgICAnTWlzc2luZyByZXF1aXJlZCBwYXJhbWV0ZXIgXCIlc1wiLiBQbGVhc2UgcHJvdmlkZSBhdCBsZWFzdCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6ICVzJyxcbiAgICAgICAga2V5LFxuICAgICAgICByZXF1aXJlZFBhcmFtZXRlcnMuam9pbihcIiwgXCIpXG4gICAgICApO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyByZXF1aXJlZCBwYXJhbWV0ZXJcIik7XG4gICAgfVxuICB9KTtcbiAgZGVidWcoXCJ2YWxpZGF0ZWQgY3VycmVudHMgcGFyYW1ldGVzOiAlb1wiLCBwYXJhbXMpO1xuICByZXR1cm4gcGFyYW1zIGFzIFZhbGlkYXRlZEN1cnJlbnRzUGFyYW1ldGVycztcbn1cblxuLyoqXG4gKlxuICogQHJldHVybnMgQ3lwcmVzcyBub24tZW1wdHkgb3B0aW9ucyB3aXRob3V0IHRoZSBvbmVzIHRoYXQgYXJlIG5vdCByZWxldmFudCBmb3IgdGhlIHJ1bm5lclxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RyaXBwZWRDeXByZXNzT3B0aW9ucyhcbiAgcGFyYW1zOiBDdXJyZW50c1J1blBhcmFtZXRlcnNcbik6IFN0cmlwcGVkQ3lwcmVzc01vZHVsZUFQSU9wdGlvbnMge1xuICByZXR1cm4gXy5waWNrQnkoXG4gICAgXy5vbWl0KHBhcmFtcywgW1xuICAgICAgXCJjbG91ZFNlcnZpY2VVcmxcIixcbiAgICAgIFwiYmF0Y2hTaXplXCIsXG4gICAgICBcInByb2plY3RJZFwiLFxuICAgICAgXCJyZWNvcmRcIixcbiAgICAgIFwia2V5XCIsXG4gICAgICBcInJlY29yZEtleVwiLFxuICAgICAgXCJncm91cFwiLFxuICAgICAgXCJwYXJhbGxlbFwiLFxuICAgICAgXCJ0YWdcIixcbiAgICAgIFwiY2lCdWlsZElkXCIsXG4gICAgICBcInNwZWNcIixcbiAgICAgIFwiZXhpdFwiLFxuICAgICAgXCJoZWFkZWRcIixcbiAgICAgIFwiaGVhZGxlc3NcIixcbiAgICBdKSxcbiAgICBCb29sZWFuXG4gICk7XG59XG4iLCAiLy8gQHRzLWlnbm9yZVxuaW1wb3J0IGdpdCBmcm9tIFwiQGN5cHJlc3MvY29tbWl0LWluZm9cIjtcbmltcG9ydCB7IGdldENvbW1pdERlZmF1bHRzIH0gZnJvbSBcIi4vY2lQcm92aWRlclwiO1xuXG5leHBvcnQgY29uc3QgZ2V0R2l0SW5mbyA9IGFzeW5jIChwcm9qZWN0Um9vdDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGNvbW1pdEluZm8gPSBhd2FpdCBnaXQuY29tbWl0SW5mbyhwcm9qZWN0Um9vdCk7XG4gIHJldHVybiBnZXRDb21taXREZWZhdWx0cyh7XG4gICAgYnJhbmNoOiBjb21taXRJbmZvLmJyYW5jaCxcbiAgICByZW1vdGVPcmlnaW46IGNvbW1pdEluZm8ucmVtb3RlLFxuICAgIGF1dGhvckVtYWlsOiBjb21taXRJbmZvLmVtYWlsLFxuICAgIGF1dGhvck5hbWU6IGNvbW1pdEluZm8uYXV0aG9yLFxuICAgIG1lc3NhZ2U6IGNvbW1pdEluZm8ubWVzc2FnZSxcbiAgICBzaGE6IGNvbW1pdEluZm8uc2hhLFxuICB9KTtcbn07XG4iLCAiaW1wb3J0IHsgTWVyZ2VkQ29uZmlnIH0gZnJvbSBcIi4uL2NvbmZpZ1wiO1xuaW1wb3J0IHsgZ3Vlc3NCcm93c2VyIH0gZnJvbSBcIi4vYnJvd3NlclwiO1xuaW1wb3J0IHsgZ2V0UGxhdGZvcm1JbmZvIH0gZnJvbSBcIi4vcGxhdGZvcm1cIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBsYXRmb3JtKHtcbiAgYnJvd3NlcixcbiAgY29uZmlnLFxufToge1xuICBicm93c2VyPzogc3RyaW5nO1xuICBjb25maWc6IE1lcmdlZENvbmZpZztcbn0pIHtcbiAgcmV0dXJuIHtcbiAgICAuLi4oYXdhaXQgZ2V0UGxhdGZvcm1JbmZvKCkpLFxuICAgIC4uLmd1ZXNzQnJvd3Nlcihicm93c2VyID8/IFwiZWxlY3Ryb25cIiwgY29uZmlnLnJlc29sdmVkPy5icm93c2VycyksXG4gIH07XG59XG4iLCAiaW1wb3J0IERlYnVnIGZyb20gXCJkZWJ1Z1wiO1xuaW1wb3J0IHsgRGV0ZWN0ZWRCcm93c2VyLCBQbGF0Zm9ybSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgd2FybiB9IGZyb20gXCIuLi9sb2dcIjtcblxuY29uc3QgZGVidWcgPSBEZWJ1ZyhcImN1cnJlbnRzOmJyb3dzZXJcIik7XG5cbmV4cG9ydCBmdW5jdGlvbiBndWVzc0Jyb3dzZXIoXG4gIGJyb3dzZXI6IHN0cmluZyxcbiAgYXZhaWxhYmxlQnJvd3NlcnM6IERldGVjdGVkQnJvd3NlcltdID0gW11cbik6IFBpY2s8UGxhdGZvcm0sIFwiYnJvd3Nlck5hbWVcIiB8IFwiYnJvd3NlclZlcnNpb25cIj4ge1xuICBkZWJ1ZyhcbiAgICBcImd1ZXNzaW5nIGJyb3dzZXIgZnJvbSAnJXMnLCBhdmFpbGFibGUgYnJvd3NlcnM6ICVvXCIsXG4gICAgYnJvd3NlcixcbiAgICBhdmFpbGFibGVCcm93c2Vyc1xuICApO1xuICAvLyB0cnkgaWRlbnRpZnlpbmcgdGhlIGJyb3dzZXIgYnkgbmFtZSBmaXJzdFxuICBsZXQgcmVzdWx0ID0gYXZhaWxhYmxlQnJvd3NlcnMuZmluZCgoYikgPT4gYi5uYW1lID09PSBicm93c2VyKTtcblxuICBpZiAocmVzdWx0KSB7XG4gICAgZGVidWcoXCJpZGVudGlmaWVkIGJyb3dzZXIgYnkgbmFtZTogJW9cIiwgcmVzdWx0KTtcbiAgICByZXR1cm4ge1xuICAgICAgYnJvd3Nlck5hbWU6IHJlc3VsdC5kaXNwbGF5TmFtZSxcbiAgICAgIGJyb3dzZXJWZXJzaW9uOiByZXN1bHQudmVyc2lvbixcbiAgICB9O1xuICB9XG5cbiAgLy8gb3RoZXJ3aXNlLCB0cnkgaWRlbnRpZnlpbmcgYnkgdGhlIHBhdGhcbiAgcmVzdWx0ID0gYXZhaWxhYmxlQnJvd3NlcnMuZmluZCgoYikgPT4gYi5wYXRoID09PSBicm93c2VyKTtcbiAgaWYgKHJlc3VsdCkge1xuICAgIGRlYnVnKFwiaWRlbnRpZmllZCBicm93c2VyIGJ5IHBhdGg6ICVvXCIsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGJyb3dzZXJOYW1lOiByZXN1bHQuZGlzcGxheU5hbWUgPz8gcmVzdWx0Lm5hbWUsXG4gICAgICBicm93c2VyVmVyc2lvbjogcmVzdWx0LnZlcnNpb24sXG4gICAgfTtcbiAgfVxuXG4gIHdhcm4oXCJVbmFibGUgdG8gaWRlbnRpZnkgYnJvd3NlciBuYW1lIGFuZCB2ZXJzaW9uXCIpO1xuXG4gIC8vIG90aGVyd2lzZSwgcmV0dXJuIGR1bW15IGJyb3dzZXJcbiAgcmV0dXJuIHtcbiAgICBicm93c2VyTmFtZTogXCJ1bmtub3duXCIsXG4gICAgYnJvd3NlclZlcnNpb246IFwidW5rbm93blwiLFxuICB9O1xufVxuIiwgImltcG9ydCBEZWJ1ZyBmcm9tIFwiZGVidWdcIjtcbmltcG9ydCBnZXRvcyBmcm9tIFwiZ2V0b3NcIjtcbmltcG9ydCB7IGNwdXMsIGZyZWVtZW0sIHBsYXRmb3JtLCByZWxlYXNlLCB0b3RhbG1lbSB9IGZyb20gXCJvc1wiO1xuaW1wb3J0IHsgcHJvbWlzaWZ5IH0gZnJvbSBcInV0aWxcIjtcbmNvbnN0IGRlYnVnID0gRGVidWcoXCJjdXJyZW50czpwbGF0Zm9ybVwiKTtcblxuY29uc3QgZ2V0T3NWZXJzaW9uID0gYXN5bmMgKCkgPT4ge1xuICBpZiAocGxhdGZvcm0oKSA9PT0gXCJsaW51eFwiKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGxpbnV4T3MgPSBhd2FpdCBwcm9taXNpZnkoZ2V0b3MpKCk7XG4gICAgICBpZiAoXCJkaXN0XCIgaW4gbGludXhPcyAmJiBcInJlbGVhc2VcIiBpbiBsaW51eE9zKSB7XG4gICAgICAgIHJldHVybiBbbGludXhPcy5kaXN0LCBsaW51eE9zLnJlbGVhc2VdLmpvaW4oXCIgLSBcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcmVsZWFzZSgpO1xuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHJlbGVhc2UoKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlbGVhc2UoKTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRQbGF0Zm9ybUluZm8gPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IG9zVmVyc2lvbiA9IGF3YWl0IGdldE9zVmVyc2lvbigpO1xuICBjb25zdCByZXN1bHQgPSB7XG4gICAgb3NOYW1lOiBwbGF0Zm9ybSgpLFxuICAgIG9zVmVyc2lvbixcbiAgICBvc0NwdXM6IGNwdXMoKSxcbiAgICBvc01lbW9yeToge1xuICAgICAgZnJlZTogZnJlZW1lbSgpLFxuICAgICAgdG90YWw6IHRvdGFsbWVtKCksXG4gICAgfSxcbiAgfTtcbiAgZGVidWcoXCJwbGF0Zm9ybSBpbmZvOiAlb1wiLCByZXN1bHQpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcbiIsICJleHBvcnQgKiBmcm9tIFwiLi9yZXN1bHRzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90YWJsZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vdXBsb2FkUmVzdWx0c1wiO1xuIiwgImltcG9ydCB7IEN5cHJlc3NSZXN1bHQsIFNjcmVlbnNob3RBcnRpZmFjdCB9IGZyb20gXCJjeXByZXNzLWNsb3VkL3R5cGVzXCI7XG5pbXBvcnQgRGVidWcgZnJvbSBcImRlYnVnXCI7XG5pbXBvcnQgXyBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgeyBuYW5vaWQgfSBmcm9tIFwibmFub2lkXCI7XG5pbXBvcnQge1xuICBTZXRJbnN0YW5jZVRlc3RzUGF5bG9hZCxcbiAgVGVzdFN0YXRlLFxuICBVcGRhdGVJbnN0YW5jZVJlc3VsdHNQYXlsb2FkLFxufSBmcm9tIFwiLi4vYXBpXCI7XG5pbXBvcnQgeyBNZXJnZWRDb25maWcgfSBmcm9tIFwiLi4vY29uZmlnL2NvbmZpZ1wiO1xuXG5jb25zdCBkZWJ1ZyA9IERlYnVnKFwiY3VycmVudHM6cmVzdWx0c1wiKTtcblxuZXhwb3J0IGNvbnN0IGlzU3VjY2Vzc1Jlc3VsdCA9IChcbiAgcmVzdWx0OiBDeXByZXNzUmVzdWx0XG4pOiByZXN1bHQgaXMgQ3lwcmVzc0NvbW1hbmRMaW5lLkN5cHJlc3NSdW5SZXN1bHQgPT4ge1xuICByZXR1cm4gcmVzdWx0LnN0YXR1cyA9PT0gXCJmaW5pc2hlZFwiO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFNjcmVlbnNob3RzU3VtbWFyeSA9IChcbiAgdGVzdHM6IEN5cHJlc3NDb21tYW5kTGluZS5UZXN0UmVzdWx0W10gPSBbXVxuKTogU2NyZWVuc2hvdEFydGlmYWN0W10gPT4ge1xuICByZXR1cm4gdGVzdHMuZmxhdE1hcCgodGVzdCwgaSkgPT5cbiAgICB0ZXN0LmF0dGVtcHRzLmZsYXRNYXAoKGEsIGFpKSA9PlxuICAgICAgYS5zY3JlZW5zaG90cy5mbGF0TWFwKChzKSA9PiAoe1xuICAgICAgICAuLi5zLFxuICAgICAgICB0ZXN0SWQ6IGByJHtpfWAsXG4gICAgICAgIHRlc3RBdHRlbXB0SW5kZXg6IGFpLFxuICAgICAgICBzY3JlZW5zaG90SWQ6IG5hbm9pZCgpLFxuICAgICAgfSkpXG4gICAgKVxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFN0YXRzID0gKHN0YXRzOiBDeXByZXNzQ29tbWFuZExpbmUuUnVuUmVzdWx0W1wic3RhdHNcIl0pID0+IHtcbiAgcmV0dXJuIHtcbiAgICAuLi5zdGF0cyxcbiAgICB3YWxsQ2xvY2tEdXJhdGlvbjogc3RhdHMuZHVyYXRpb24sXG4gICAgd2FsbENsb2NrU3RhcnRlZEF0OiBzdGF0cy5zdGFydGVkQXQsXG4gICAgd2FsbENsb2NrRW5kZWRBdDogc3RhdHMuZW5kZWRBdCxcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRUZXN0QXR0ZW1wdCA9IChhdHRlbXB0OiBDeXByZXNzQ29tbWFuZExpbmUuQXR0ZW1wdFJlc3VsdCkgPT4ge1xuICByZXR1cm4ge1xuICAgIC4uLmF0dGVtcHQsXG4gICAgc3RhdGU6IGF0dGVtcHQuc3RhdGUgYXMgVGVzdFN0YXRlLFxuICAgIHdhbGxDbG9ja0R1cmF0aW9uOiBhdHRlbXB0LmR1cmF0aW9uLFxuICAgIHdhbGxDbG9ja1N0YXJ0ZWRBdDogYXR0ZW1wdC5zdGFydGVkQXQsXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0SW5zdGFuY2VSZXN1bHRQYXlsb2FkID0gKFxuICBydW5SZXN1bHQ6IEN5cHJlc3NDb21tYW5kTGluZS5SdW5SZXN1bHRcbik6IFVwZGF0ZUluc3RhbmNlUmVzdWx0c1BheWxvYWQgPT4ge1xuICBjb25zdCBhbHRUZXN0cyA9IFtdO1xuICBpZiAocnVuUmVzdWx0LmVycm9yICYmICFydW5SZXN1bHQudGVzdHM/Lmxlbmd0aCkge1xuICAgIGFsdFRlc3RzLnB1c2goZ2V0RmFrZVRlc3RGcm9tRXhjZXB0aW9uKHJ1blJlc3VsdC5lcnJvciwgcnVuUmVzdWx0LnN0YXRzKSk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBzdGF0czogZ2V0U3RhdHMocnVuUmVzdWx0LnN0YXRzKSxcbiAgICByZXBvcnRlclN0YXRzOiBydW5SZXN1bHQucmVwb3J0ZXJTdGF0cyxcbiAgICBleGNlcHRpb246IHJ1blJlc3VsdC5lcnJvciA/PyBudWxsLFxuICAgIHZpZGVvOiAhIXJ1blJlc3VsdC52aWRlbywgLy8gRGlkIHRoZSBpbnN0YW5jZSBnZW5lcmF0ZSBhIHZpZGVvP1xuICAgIHNjcmVlbnNob3RzOiBnZXRTY3JlZW5zaG90c1N1bW1hcnkocnVuUmVzdWx0LnRlc3RzID8/IFtdKSxcbiAgICB0ZXN0czpcbiAgICAgIHJ1blJlc3VsdC50ZXN0cz8ubWFwKCh0ZXN0LCBpKSA9PiAoe1xuICAgICAgICBkaXNwbGF5RXJyb3I6IHRlc3QuZGlzcGxheUVycm9yLFxuICAgICAgICBzdGF0ZTogdGVzdC5zdGF0ZSBhcyBUZXN0U3RhdGUsXG4gICAgICAgIGhvb2tzOiBydW5SZXN1bHQuaG9va3MsXG4gICAgICAgIGF0dGVtcHRzOiB0ZXN0LmF0dGVtcHRzPy5tYXAoZ2V0VGVzdEF0dGVtcHQpID8/IFtdLFxuICAgICAgICBjbGllbnRJZDogYHIke2l9YCxcbiAgICAgIH0pKSA/PyBhbHRUZXN0cyxcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIGdldEZha2VUZXN0RnJvbUV4Y2VwdGlvbihcbiAgZXJyb3I6IHN0cmluZyxcbiAgc3RhdHM6IEN5cHJlc3NDb21tYW5kTGluZS5SdW5SZXN1bHRbXCJzdGF0c1wiXVxuKSB7XG4gIHJldHVybiB7XG4gICAgdGl0bGU6IFtcIlVua25vd25cIl0sXG4gICAgYm9keTogXCJcIixcbiAgICBkaXNwbGF5RXJyb3I6IGVycm9yLnNwbGl0KFwiXFxuXCIpWzBdLFxuICAgIHN0YXRlOiBcImZhaWxlZFwiLFxuICAgIGhvb2tzOiBbXSxcbiAgICBhdHRlbXB0czogW1xuICAgICAgZ2V0VGVzdEF0dGVtcHQoe1xuICAgICAgICBzdGF0ZTogXCJmYWlsZWRcIixcbiAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbmFtZTogXCJFcnJvclwiLFxuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLnNwbGl0KFwiXFxuXCIpWzBdLFxuICAgICAgICAgIHN0YWNrOiBlcnJvcixcbiAgICAgICAgfSxcbiAgICAgICAgc2NyZWVuc2hvdHM6IFtdLFxuICAgICAgICBzdGFydGVkQXQ6IHN0YXRzLnN0YXJ0ZWRBdCxcbiAgICAgICAgdmlkZW9UaW1lc3RhbXA6IDAsXG4gICAgICB9KSxcbiAgICBdLFxuICAgIGNsaWVudElkOiBcInIwXCIsXG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBnZXRJbnN0YW5jZVRlc3RzUGF5bG9hZCA9IChcbiAgcnVuUmVzdWx0OiBDeXByZXNzQ29tbWFuZExpbmUuUnVuUmVzdWx0LFxuICBjb25maWc6IEN5cHJlc3MuUmVzb2x2ZWRDb25maWdPcHRpb25zXG4pOiBTZXRJbnN0YW5jZVRlc3RzUGF5bG9hZCA9PiB7XG4gIGNvbnN0IGFsdFRlc3RzID0gW107XG4gIGlmIChydW5SZXN1bHQuZXJyb3IgJiYgIXJ1blJlc3VsdC50ZXN0cz8ubGVuZ3RoKSB7XG4gICAgYWx0VGVzdHMucHVzaChnZXRGYWtlVGVzdEZyb21FeGNlcHRpb24ocnVuUmVzdWx0LmVycm9yLCBydW5SZXN1bHQuc3RhdHMpKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGNvbmZpZyxcbiAgICB0ZXN0czpcbiAgICAgIHJ1blJlc3VsdC50ZXN0cz8ubWFwKCh0ZXN0LCBpKSA9PiAoe1xuICAgICAgICB0aXRsZTogdGVzdC50aXRsZSxcbiAgICAgICAgY29uZmlnOiBudWxsLFxuICAgICAgICBib2R5OiB0ZXN0LmJvZHksXG4gICAgICAgIGNsaWVudElkOiBgciR7aX1gLFxuICAgICAgICBob29rSWRzOiBbXSxcbiAgICAgIH0pKSA/PyBhbHRUZXN0cyxcbiAgICBob29rczogcnVuUmVzdWx0Lmhvb2tzLFxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IHN1bW1hcml6ZVRlc3RSZXN1bHRzID0gKFxuICBpbnB1dDogQ3lwcmVzc0NvbW1hbmRMaW5lLkN5cHJlc3NSdW5SZXN1bHRbXSxcbiAgY29uZmlnOiBNZXJnZWRDb25maWdcbik6IEN5cHJlc3NDb21tYW5kTGluZS5DeXByZXNzUnVuUmVzdWx0ID0+IHtcbiAgaWYgKCFpbnB1dC5sZW5ndGgpIHtcbiAgICByZXR1cm4gZ2V0RW1wdHlDeXByZXNzUmVzdWx0cyhjb25maWcpO1xuICB9XG5cbiAgY29uc3Qgb3ZlcmFsbCA9IGlucHV0LnJlZHVjZShcbiAgICAoXG4gICAgICBhY2MsXG4gICAgICB7XG4gICAgICAgIHRvdGFsRHVyYXRpb24sXG4gICAgICAgIHRvdGFsRmFpbGVkLFxuICAgICAgICB0b3RhbFBhc3NlZCxcbiAgICAgICAgdG90YWxQZW5kaW5nLFxuICAgICAgICB0b3RhbFNraXBwZWQsXG4gICAgICAgIHRvdGFsVGVzdHMsXG4gICAgICAgIHRvdGFsU3VpdGVzLFxuICAgICAgfVxuICAgICkgPT4gKHtcbiAgICAgIHRvdGFsRHVyYXRpb246IGFjYy50b3RhbER1cmF0aW9uICsgdG90YWxEdXJhdGlvbixcbiAgICAgIHRvdGFsU3VpdGVzOiBhY2MudG90YWxTdWl0ZXMgKyB0b3RhbFN1aXRlcyxcbiAgICAgIHRvdGFsUGVuZGluZzogYWNjLnRvdGFsUGVuZGluZyArIHRvdGFsUGVuZGluZyxcbiAgICAgIHRvdGFsRmFpbGVkOiBhY2MudG90YWxGYWlsZWQgKyB0b3RhbEZhaWxlZCxcbiAgICAgIHRvdGFsU2tpcHBlZDogYWNjLnRvdGFsU2tpcHBlZCArIHRvdGFsU2tpcHBlZCxcbiAgICAgIHRvdGFsUGFzc2VkOiBhY2MudG90YWxQYXNzZWQgKyB0b3RhbFBhc3NlZCxcbiAgICAgIHRvdGFsVGVzdHM6IGFjYy50b3RhbFRlc3RzICsgdG90YWxUZXN0cyxcbiAgICB9KSxcbiAgICBlbXB0eVN0YXRzXG4gICk7XG4gIGNvbnN0IGZpcnN0UmVzdWx0ID0gaW5wdXRbMF07XG4gIGNvbnN0IHN0YXJ0SXRlbXMgPSBpbnB1dC5tYXAoKGkpID0+IGkuc3RhcnRlZFRlc3RzQXQpLnNvcnQoKTtcbiAgY29uc3QgZW5kSXRlbXMgPSBpbnB1dC5tYXAoKGkpID0+IGkuZW5kZWRUZXN0c0F0KS5zb3J0KCk7XG4gIGNvbnN0IHJ1bnMgPSBpbnB1dC5tYXAoKGkpID0+IGkucnVucykuZmxhdCgpO1xuICByZXR1cm4ge1xuICAgIC4uLm92ZXJhbGwsXG4gICAgcnVucyxcbiAgICBzdGFydGVkVGVzdHNBdDogXy5maXJzdChzdGFydEl0ZW1zKSBhcyBzdHJpbmcsXG4gICAgZW5kZWRUZXN0c0F0OiBfLmxhc3QoZW5kSXRlbXMpIGFzIHN0cmluZyxcbiAgICAuLi5fLnBpY2soXG4gICAgICBmaXJzdFJlc3VsdCxcbiAgICAgIFwiYnJvd3Nlck5hbWVcIixcbiAgICAgIFwiYnJvd3NlclZlcnNpb25cIixcbiAgICAgIFwiYnJvd3NlclBhdGhcIixcbiAgICAgIFwib3NOYW1lXCIsXG4gICAgICBcIm9zVmVyc2lvblwiLFxuICAgICAgXCJjeXByZXNzVmVyc2lvblwiLFxuICAgICAgXCJjb25maWdcIlxuICAgICksXG4gICAgc3RhdHVzOiBcImZpbmlzaGVkXCIsXG4gIH07XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW1wdHlDeXByZXNzUmVzdWx0cyhcbiAgY29uZmlnOiBNZXJnZWRDb25maWdcbik6IEN5cHJlc3NDb21tYW5kTGluZS5DeXByZXNzUnVuUmVzdWx0IHtcbiAgcmV0dXJuIHtcbiAgICAuLi5lbXB0eVN0YXRzLFxuICAgIHN0YXR1czogXCJmaW5pc2hlZFwiLFxuICAgIHN0YXJ0ZWRUZXN0c0F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgZW5kZWRUZXN0c0F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgcnVuczogW10sXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbmZpZyxcbiAgfTtcbn1cbmNvbnN0IGVtcHR5U3RhdHMgPSB7XG4gIHRvdGFsRHVyYXRpb246IDAsXG4gIHRvdGFsU3VpdGVzOiAwLFxuICB0b3RhbFBlbmRpbmc6IDAsXG4gIHRvdGFsRmFpbGVkOiAwLFxuICB0b3RhbFNraXBwZWQ6IDAsXG4gIHRvdGFsUGFzc2VkOiAwLFxuICB0b3RhbFRlc3RzOiAwLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZhaWxlZER1bW15UmVzdWx0KHtcbiAgc3BlY3MsXG4gIGVycm9yLFxuICBjb25maWcsXG59OiB7XG4gIHNwZWNzOiBzdHJpbmdbXTtcbiAgZXJyb3I6IHN0cmluZztcbiAgY29uZmlnOiBhbnk7IC8vIFRPRE8gdGlnaHRlbiB0aGlzIHVwXG59KTogQ3lwcmVzc0NvbW1hbmRMaW5lLkN5cHJlc3NSdW5SZXN1bHQge1xuICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgY29uc3QgZW5kID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICByZXR1cm4ge1xuICAgIGNvbmZpZyxcbiAgICBzdGF0dXM6IFwiZmluaXNoZWRcIixcbiAgICBzdGFydGVkVGVzdHNBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIGVuZGVkVGVzdHNBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHRvdGFsRHVyYXRpb246IDAsXG4gICAgdG90YWxTdWl0ZXM6IDEsXG4gICAgdG90YWxGYWlsZWQ6IDEsXG4gICAgdG90YWxQYXNzZWQ6IDAsXG4gICAgdG90YWxQZW5kaW5nOiAwLFxuICAgIHRvdGFsU2tpcHBlZDogMCxcbiAgICB0b3RhbFRlc3RzOiAxLFxuICAgIGJyb3dzZXJOYW1lOiBcInVua25vd25cIixcbiAgICBicm93c2VyVmVyc2lvbjogXCJ1bmtub3duXCIsXG4gICAgYnJvd3NlclBhdGg6IFwidW5rbm93blwiLFxuICAgIG9zTmFtZTogXCJ1bmtub3duXCIsXG4gICAgb3NWZXJzaW9uOiBcInVua25vd25cIixcbiAgICBjeXByZXNzVmVyc2lvbjogXCJ1bmtub3duXCIsXG4gICAgcnVuczogc3BlY3MubWFwKChzKSA9PiAoe1xuICAgICAgc3RhdHM6IHtcbiAgICAgICAgc3VpdGVzOiAxLFxuICAgICAgICB0ZXN0czogMSxcbiAgICAgICAgcGFzc2VzOiAwLFxuICAgICAgICBwZW5kaW5nOiAwLFxuICAgICAgICBza2lwcGVkOiAwLFxuICAgICAgICBmYWlsdXJlczogMSxcbiAgICAgICAgc3RhcnRlZEF0OiBzdGFydCxcbiAgICAgICAgZW5kZWRBdDogZW5kLFxuICAgICAgICBkdXJhdGlvbjogMCxcbiAgICAgIH0sXG4gICAgICByZXBvcnRlcjogXCJzcGVjXCIsXG4gICAgICByZXBvcnRlclN0YXRzOiB7fSxcbiAgICAgIGhvb2tzOiBbXSxcbiAgICAgIGVycm9yLFxuICAgICAgdmlkZW86IG51bGwsXG4gICAgICBzcGVjOiB7XG4gICAgICAgIG5hbWU6IHMsXG4gICAgICAgIHJlbGF0aXZlOiBcIlwiLFxuICAgICAgICBhYnNvbHV0ZTogXCJcIixcbiAgICAgICAgcmVsYXRpdmVUb0NvbW1vblJvb3Q6IFwiXCIsXG4gICAgICB9LFxuICAgICAgdGVzdHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBbXCJVbmtub3duXCJdLFxuICAgICAgICAgIHN0YXRlOiBcImZhaWxlZFwiLFxuICAgICAgICAgIGJvZHk6IFwiLy8gVGhpcyB0ZXN0IGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGR1ZSB0byBleGVjdXRpb24gZmFpbHVyZVwiLFxuICAgICAgICAgIGRpc3BsYXlFcnJvcjogZXJyb3IsXG4gICAgICAgICAgYXR0ZW1wdHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc3RhdGU6IFwiZmFpbGVkXCIsXG4gICAgICAgICAgICAgIHN0YXJ0ZWRBdDogc3RhcnQsXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgICAgICB2aWRlb1RpbWVzdGFtcDogMCxcbiAgICAgICAgICAgICAgc2NyZWVuc2hvdHM6IFtdLFxuICAgICAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiQ2xvdWRFeGVjdXRpb25FcnJvclwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLFxuICAgICAgICAgICAgICAgIHN0YWNrOiBcIlwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIHNob3VsZFVwbG9hZFZpZGVvOiBmYWxzZSxcbiAgICAgIHNraXBwZWRTcGVjOiBmYWxzZSxcbiAgICB9KSksXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVSYXdSZXN1bHQoXG4gIHJhd1Jlc3VsdDogQ3lwcmVzc1Jlc3VsdCxcbiAgc3BlY3M6IHN0cmluZ1tdLFxuICBjb25maWc6IE1lcmdlZENvbmZpZ1xuKTogQ3lwcmVzc0NvbW1hbmRMaW5lLkN5cHJlc3NSdW5SZXN1bHQge1xuICBpZiAoIWlzU3VjY2Vzc1Jlc3VsdChyYXdSZXN1bHQpKSB7XG4gICAgcmV0dXJuIGdldEZhaWxlZER1bW15UmVzdWx0KHtcbiAgICAgIHNwZWNzLFxuICAgICAgZXJyb3I6IHJhd1Jlc3VsdC5tZXNzYWdlLFxuICAgICAgY29uZmlnLFxuICAgIH0pO1xuICB9XG4gIHJldHVybiByYXdSZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdW1tYXJ5Rm9yU3BlYyhcbiAgc3BlYzogc3RyaW5nLFxuICBydW5SZXN1bHQ6IEN5cHJlc3NDb21tYW5kTGluZS5DeXByZXNzUnVuUmVzdWx0XG4pIHtcbiAgY29uc3QgcnVuID0gcnVuUmVzdWx0LnJ1bnMuZmluZCgocikgPT4gci5zcGVjLnJlbGF0aXZlID09PSBzcGVjKTtcbiAgaWYgKCFydW4pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qgc3RhdHMgPSBnZXRTdGF0cyhydW4uc3RhdHMpO1xuICAvLyBhZGp1c3QgdGhlIHJlc3VsdCBmb3Igc2luZ2Ugc3BlY1xuICByZXR1cm4ge1xuICAgIC4uLnJ1blJlc3VsdCxcbiAgICBydW5zOiBbcnVuXSxcbiAgICB0b3RhbFN1aXRlczogMSxcbiAgICB0b3RhbER1cmF0aW9uOiBzdGF0cy53YWxsQ2xvY2tEdXJhdGlvbixcbiAgICB0b3RhbFRlc3RzOiBzdGF0cy50ZXN0cyxcbiAgICB0b3RhbEZhaWxlZDogc3RhdHMuZmFpbHVyZXMsXG4gICAgdG90YWxQYXNzZWQ6IHN0YXRzLnBhc3NlcyxcbiAgICB0b3RhbFBlbmRpbmc6IHN0YXRzLnBlbmRpbmcsXG4gICAgdG90YWxTa2lwcGVkOiBzdGF0cy5za2lwcGVkLFxuICAgIHN0YXJ0ZWRUZXN0c0F0OiBzdGF0cy53YWxsQ2xvY2tTdGFydGVkQXQsXG4gICAgZW5kZWRUZXN0c0F0OiBzdGF0cy53YWxsQ2xvY2tFbmRlZEF0LFxuICB9O1xufVxuIiwgImltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCBwcmV0dHlNUyBmcm9tIFwicHJldHR5LW1zXCI7XG5pbXBvcnQgeyB0YWJsZSB9IGZyb20gXCJ0YWJsZVwiO1xuaW1wb3J0IHsgY3lhbiwgZ3JheSwgZ3JlZW4sIHJlZCwgd2hpdGUgfSBmcm9tIFwiLi4vbG9nXCI7XG5cbmNvbnN0IGZhaWx1cmVJY29uID0gcmVkKFwiXHUyNzE2XCIpO1xuY29uc3Qgc3VjY2Vzc0ljb24gPSBncmVlbihcIlx1MjcxNFwiKTtcblxuZXhwb3J0IGNvbnN0IHN1bW1hcnlUYWJsZSA9IChyOiBDeXByZXNzQ29tbWFuZExpbmUuQ3lwcmVzc1J1blJlc3VsdCkgPT4ge1xuICBjb25zdCBvdmVyYWxsU3BlY0NvdW50ID0gci5ydW5zLmxlbmd0aDtcbiAgY29uc3QgZmFpbGVkU3BlY3NDb3VudCA9IF8uc3VtKFxuICAgIHIucnVucy5maWx0ZXIoKHYpID0+IHYuc3RhdHMuZmFpbHVyZXMgKyB2LnN0YXRzLnNraXBwZWQgPiAwKS5tYXAoKCkgPT4gMSlcbiAgKTtcbiAgY29uc3QgaGFzRmFpbGVkID0gZmFpbGVkU3BlY3NDb3VudCA+IDA7XG5cbiAgY29uc3QgdmVyZGljdCA9IGhhc0ZhaWxlZFxuICAgID8gcmVkKGAke2ZhaWxlZFNwZWNzQ291bnR9IG9mICR7b3ZlcmFsbFNwZWNDb3VudH0gZmFpbGVkYClcbiAgICA6IG92ZXJhbGxTcGVjQ291bnQgPiAwXG4gICAgPyBcIkFsbCBzcGVjcyBwYXNzZWQhXCJcbiAgICA6IFwiTm8gc3BlY3MgZXhlY3V0ZWRcIjtcblxuICBjb25zdCBkYXRhID0gci5ydW5zLm1hcCgocikgPT4gW1xuICAgIHIuc3RhdHMuZmFpbHVyZXMgKyByLnN0YXRzLnNraXBwZWQgPiAwID8gZmFpbHVyZUljb24gOiBzdWNjZXNzSWNvbixcbiAgICByLnNwZWMucmVsYXRpdmVUb0NvbW1vblJvb3QsXG4gICAgZ3JheShwcmV0dHlNUyhyLnN0YXRzLmR1cmF0aW9uKSksXG4gICAgd2hpdGUoci5zdGF0cy50ZXN0cyA/PyAwKSxcbiAgICByLnN0YXRzLnBhc3NlcyA/IGdyZWVuKHIuc3RhdHMucGFzc2VzKSA6IGdyYXkoXCItXCIpLFxuICAgIHIuc3RhdHMuZmFpbHVyZXMgPyByZWQoci5zdGF0cy5mYWlsdXJlcykgOiBncmF5KFwiLVwiKSxcbiAgICByLnN0YXRzLnBlbmRpbmcgPyBjeWFuKHIuc3RhdHMucGVuZGluZykgOiBncmF5KFwiLVwiKSxcbiAgICByLnN0YXRzLnNraXBwZWQgPyByZWQoci5zdGF0cy5za2lwcGVkKSA6IGdyYXkoXCItXCIpLFxuICBdKTtcblxuICByZXR1cm4gdGFibGUoXG4gICAgW1xuICAgICAgW1xuICAgICAgICBcIlwiLCAvLyBtYXJrZXJcbiAgICAgICAgZ3JheShcIlNwZWNcIiksXG4gICAgICAgIFwiXCIsXG4gICAgICAgIGdyYXkoXCJUZXN0c1wiKSxcbiAgICAgICAgZ3JheShcIlBhc3NpbmdcIiksXG4gICAgICAgIGdyYXkoXCJGYWlsaW5nXCIpLFxuICAgICAgICBncmF5KFwiUGVuZGluZ1wiKSxcbiAgICAgICAgZ3JheShcIlNraXBwZWRcIiksXG4gICAgICBdLFxuICAgICAgLi4uZGF0YSxcbiAgICAgIFtcbiAgICAgICAgaGFzRmFpbGVkID8gZmFpbHVyZUljb24gOiBzdWNjZXNzSWNvbiwgLy8gbWFya2VyXG4gICAgICAgIHZlcmRpY3QsXG4gICAgICAgIGdyYXkocHJldHR5TVMoci50b3RhbER1cmF0aW9uID8/IDApKSxcbiAgICAgICAgb3ZlcmFsbFNwZWNDb3VudCA+IDAgPyB3aGl0ZShyLnRvdGFsVGVzdHMgPz8gMCkgOiBncmF5KFwiLVwiKSxcbiAgICAgICAgci50b3RhbFBhc3NlZCA/IGdyZWVuKHIudG90YWxQYXNzZWQpIDogZ3JheShcIi1cIiksXG4gICAgICAgIHIudG90YWxGYWlsZWQgPyByZWQoci50b3RhbEZhaWxlZCkgOiBncmF5KFwiLVwiKSxcbiAgICAgICAgci50b3RhbFBlbmRpbmcgPyBjeWFuKHIudG90YWxQZW5kaW5nKSA6IGdyYXkoXCItXCIpLFxuICAgICAgICByLnRvdGFsU2tpcHBlZCA/IHJlZChyLnRvdGFsU2tpcHBlZCkgOiBncmF5KFwiLVwiKSxcbiAgICAgIF0sXG4gICAgXSxcbiAgICB7XG4gICAgICBib3JkZXIsXG4gICAgICBjb2x1bW5EZWZhdWx0OiB7XG4gICAgICAgIHdpZHRoOiA4LFxuICAgICAgfSxcbiAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgeyBhbGlnbm1lbnQ6IFwibGVmdFwiLCB3aWR0aDogMiB9LFxuICAgICAgICB7IGFsaWdubWVudDogXCJsZWZ0XCIsIHdpZHRoOiAzMCB9LFxuICAgICAgICB7IGFsaWdubWVudDogXCJyaWdodFwiIH0sXG4gICAgICAgIHsgYWxpZ25tZW50OiBcInJpZ2h0XCIgfSxcbiAgICAgICAgeyBhbGlnbm1lbnQ6IFwicmlnaHRcIiB9LFxuICAgICAgICB7IGFsaWdubWVudDogXCJyaWdodFwiIH0sXG4gICAgICAgIHsgYWxpZ25tZW50OiBcInJpZ2h0XCIgfSxcbiAgICAgICAgeyBhbGlnbm1lbnQ6IFwicmlnaHRcIiB9LFxuICAgICAgXSxcbiAgICAgIC8vIHNpbmdsZUxpbmU6IHRydWUsXG4gICAgICBkcmF3SG9yaXpvbnRhbExpbmU6IChsaW5lSW5kZXgsIHJvd0NvdW50KSA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgbGluZUluZGV4ID09PSAxIHx8XG4gICAgICAgICAgbGluZUluZGV4ID09PSAwIHx8XG4gICAgICAgICAgbGluZUluZGV4ID09PSByb3dDb3VudCAtIDEgfHxcbiAgICAgICAgICBsaW5lSW5kZXggPT09IHJvd0NvdW50XG4gICAgICAgICk7XG4gICAgICB9LFxuICAgICAgZHJhd1ZlcnRpY2FsTGluZTogKGxpbmVJbmRleCwgcm93Q291bnQpID0+IHtcbiAgICAgICAgcmV0dXJuIGxpbmVJbmRleCA9PT0gMCB8fCByb3dDb3VudCA9PT0gbGluZUluZGV4O1xuICAgICAgfSxcbiAgICB9XG4gICk7XG59O1xuXG5jb25zdCBib3JkZXIgPSBfLm1hcFZhbHVlcyhcbiAge1xuICAgIHRvcEJvZHk6IGBcdTI1MDBgLFxuICAgIHRvcEpvaW46IGBcdTI1MkNgLFxuICAgIHRvcExlZnQ6IGAgIFx1MjUwQ2AsXG4gICAgdG9wUmlnaHQ6IGBcdTI1MTBgLFxuXG4gICAgYm90dG9tQm9keTogYFx1MjUwMGAsXG4gICAgYm90dG9tSm9pbjogYFx1MjUzNGAsXG4gICAgYm90dG9tTGVmdDogYCAgXHUyNTE0YCxcbiAgICBib3R0b21SaWdodDogYFx1MjUxOGAsXG5cbiAgICBib2R5TGVmdDogYCAgXHUyNTAyYCxcbiAgICBib2R5UmlnaHQ6IGBcdTI1MDJgLFxuICAgIGJvZHlKb2luOiBgXHUyNTAyYCxcblxuICAgIGpvaW5Cb2R5OiBgXHUyNTAwYCxcbiAgICBqb2luTGVmdDogYCAgXHUyNTFDYCxcbiAgICBqb2luUmlnaHQ6IGBcdTI1MjRgLFxuICAgIGpvaW5Kb2luOiBgXHUyNTNDYCxcbiAgfSxcbiAgKHYpID0+IGdyYXkodilcbik7XG4iLCAiaW1wb3J0IERlYnVnIGZyb20gXCJkZWJ1Z1wiO1xuaW1wb3J0IHtcbiAgcmVwb3J0SW5zdGFuY2VSZXN1bHRzTWVyZ2VkLFxuICBzZXRJbnN0YW5jZVRlc3RzLFxuICBTZXRJbnN0YW5jZVRlc3RzUGF5bG9hZCxcbiAgdXBkYXRlSW5zdGFuY2VSZXN1bHRzLFxuICBVcGRhdGVJbnN0YW5jZVJlc3VsdHNQYXlsb2FkLFxufSBmcm9tIFwiLi4vYXBpXCI7XG5pbXBvcnQgeyB1cGxvYWRBcnRpZmFjdHMsIHVwbG9hZFN0ZG91dFNhZmUgfSBmcm9tIFwiLi4vYXJ0aWZhY3RzXCI7XG5pbXBvcnQgeyBnZXRJbml0aWFsT3V0cHV0IH0gZnJvbSBcIi4uL2NhcHR1cmVcIjtcbmltcG9ydCB7IGlzQ3VycmVudHMgfSBmcm9tIFwiLi4vZW52XCI7XG5pbXBvcnQgeyB3YXJuIH0gZnJvbSBcIi4uL2xvZ1wiO1xuaW1wb3J0IHsgZ2V0SW5zdGFuY2VSZXN1bHRQYXlsb2FkLCBnZXRJbnN0YW5jZVRlc3RzUGF5bG9hZCB9IGZyb20gXCIuL3Jlc3VsdHNcIjtcbmNvbnN0IGRlYnVnID0gRGVidWcoXCJjdXJyZW50czpyZXN1bHRzXCIpO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXBsb2FkUmVzdWx0c1Rhc2soe1xuICBpbnN0YW5jZUlkLFxuICBzcGVjLFxuICBydW5SZXN1bHQsXG4gIG91dHB1dCxcbn06IHtcbiAgaW5zdGFuY2VJZDogc3RyaW5nO1xuICBzcGVjOiBzdHJpbmc7XG4gIHJ1blJlc3VsdDogQ3lwcmVzc0NvbW1hbmRMaW5lLkN5cHJlc3NSdW5SZXN1bHQ7XG4gIG91dHB1dDogc3RyaW5nO1xufSkge1xuICBjb25zdCBydW4gPSBydW5SZXN1bHQucnVucy5maW5kKChyKSA9PiByLnNwZWMucmVsYXRpdmUgPT09IHNwZWMpO1xuICBpZiAoIXJ1bikge1xuICAgIHdhcm4oJ0Nhbm5vdCBkZXRlcm1pbmUgcnVuIHJlc3VsdCBmb3Igc3BlYyBcIiVzXCInLCBzcGVjKTtcbiAgICByZXR1cm47XG4gIH1cbiAgcmV0dXJuIHByb2Nlc3NDeXByZXNzUmVzdWx0cyhcbiAgICBpbnN0YW5jZUlkLFxuICAgIHtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIHJ1bnMgd2l0aCB0aGUgcnVuIGZvciB0aGUgc3BlY2lmaWVkIHNwZWNcbiAgICAgIC4uLnJ1blJlc3VsdCxcbiAgICAgIHJ1bnM6IFtydW5dLFxuICAgIH0sXG4gICAgb3V0cHV0XG4gICk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzQ3lwcmVzc1Jlc3VsdHMoXG4gIGluc3RhbmNlSWQ6IHN0cmluZyxcbiAgcmVzdWx0czogQ3lwcmVzc0NvbW1hbmRMaW5lLkN5cHJlc3NSdW5SZXN1bHQsXG4gIHN0ZG91dDogc3RyaW5nXG4pIHtcbiAgY29uc3QgcnVuID0gcmVzdWx0cy5ydW5zWzBdO1xuICBpZiAoIXJ1bikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHJ1biBmb3VuZCBpbiBDeXByZXNzIHJlc3VsdHNcIik7XG4gIH1cbiAgY29uc3QgaW5zdGFuY2VSZXN1bHRzID0gZ2V0SW5zdGFuY2VSZXN1bHRQYXlsb2FkKHJ1bik7XG4gIGNvbnN0IGluc3RhbmNlVGVzdHMgPSBnZXRJbnN0YW5jZVRlc3RzUGF5bG9hZChydW4sIHJlc3VsdHMuY29uZmlnKTtcblxuICBjb25zdCB7IHZpZGVvVXBsb2FkVXJsLCBzY3JlZW5zaG90VXBsb2FkVXJscyB9ID0gYXdhaXQgcmVwb3J0UmVzdWx0cyhcbiAgICBpbnN0YW5jZUlkLFxuICAgIGluc3RhbmNlVGVzdHMsXG4gICAgaW5zdGFuY2VSZXN1bHRzXG4gICk7XG5cbiAgZGVidWcoXCJpbnN0YW5jZSAlcyBhcnRpZmFjdCB1cGxvYWQgaW5zdHJ1Y3Rpb25zICVvXCIsIGluc3RhbmNlSWQsIHtcbiAgICB2aWRlb1VwbG9hZFVybCxcbiAgICBzY3JlZW5zaG90VXBsb2FkVXJscyxcbiAgfSk7XG5cbiAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICB1cGxvYWRBcnRpZmFjdHMoe1xuICAgICAgdmlkZW9VcGxvYWRVcmwsXG4gICAgICB2aWRlb1BhdGg6IHJ1bi52aWRlbyxcbiAgICAgIHNjcmVlbnNob3RVcGxvYWRVcmxzLFxuICAgICAgc2NyZWVuc2hvdHM6IGluc3RhbmNlUmVzdWx0cy5zY3JlZW5zaG90cyxcbiAgICB9KSxcbiAgICB1cGxvYWRTdGRvdXRTYWZlKGluc3RhbmNlSWQsIGdldEluaXRpYWxPdXRwdXQoKSArIHN0ZG91dCksXG4gIF0pO1xufVxuXG5hc3luYyBmdW5jdGlvbiByZXBvcnRSZXN1bHRzKFxuICBpbnN0YW5jZUlkOiBzdHJpbmcsXG4gIGluc3RhbmNlVGVzdHM6IFNldEluc3RhbmNlVGVzdHNQYXlsb2FkLFxuICBpbnN0YW5jZVJlc3VsdHM6IFVwZGF0ZUluc3RhbmNlUmVzdWx0c1BheWxvYWRcbikge1xuICBkZWJ1ZyhcInJlcG9ydGluZyBpbnN0YW5jZSAlcyByZXN1bHRzLi4uXCIsIGluc3RhbmNlSWQpO1xuICBpZiAoaXNDdXJyZW50cygpKSB7XG4gICAgcmV0dXJuIHJlcG9ydEluc3RhbmNlUmVzdWx0c01lcmdlZChpbnN0YW5jZUlkLCB7XG4gICAgICB0ZXN0czogaW5zdGFuY2VUZXN0cyxcbiAgICAgIHJlc3VsdHM6IGluc3RhbmNlUmVzdWx0cyxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIHJ1biBvbmUgYWZ0ZXIgYW5vdGhlclxuICBhd2FpdCBzZXRJbnN0YW5jZVRlc3RzKGluc3RhbmNlSWQsIGluc3RhbmNlVGVzdHMpO1xuICByZXR1cm4gdXBkYXRlSW5zdGFuY2VSZXN1bHRzKGluc3RhbmNlSWQsIGluc3RhbmNlUmVzdWx0cyk7XG59XG4iLCAiaW1wb3J0IERlYnVnIGZyb20gXCJkZWJ1Z1wiO1xuaW1wb3J0IHsgU2NyZWVuc2hvdEFydGlmYWN0LCBTY3JlZW5zaG90VXBsb2FkSW5zdHJ1Y3Rpb24gfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IHVwZGF0ZUluc3RhbmNlU3Rkb3V0IH0gZnJvbSBcIi4vYXBpXCI7XG5pbXBvcnQgeyBzYWZlIH0gZnJvbSBcIi4vbGFuZ1wiO1xuaW1wb3J0IHsgd2FybiB9IGZyb20gXCIuL2xvZ1wiO1xuaW1wb3J0IHsgdXBsb2FkSW1hZ2UsIHVwbG9hZFZpZGVvIH0gZnJvbSBcIi4vdXBsb2FkXCI7XG5jb25zdCBkZWJ1ZyA9IERlYnVnKFwiY3VycmVudHM6YXJ0aWZhY3RzXCIpO1xuaW50ZXJmYWNlIFVwbG9hZEFydGlmYWN0cyB7XG4gIHZpZGVvUGF0aDogc3RyaW5nIHwgbnVsbDtcbiAgdmlkZW9VcGxvYWRVcmw/OiBzdHJpbmcgfCBudWxsO1xuICBzY3JlZW5zaG90czogU2NyZWVuc2hvdEFydGlmYWN0W107XG4gIHNjcmVlbnNob3RVcGxvYWRVcmxzOiBTY3JlZW5zaG90VXBsb2FkSW5zdHJ1Y3Rpb25bXTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGxvYWRBcnRpZmFjdHMoe1xuICB2aWRlb1BhdGgsXG4gIHZpZGVvVXBsb2FkVXJsLFxuICBzY3JlZW5zaG90cyxcbiAgc2NyZWVuc2hvdFVwbG9hZFVybHMsXG59OiBVcGxvYWRBcnRpZmFjdHMpIHtcbiAgLy8gdGl0bGUoXCJibHVlXCIsIFwiVXBsb2FkaW5nICBSZXN1bHRzXCIpO1xuXG4gIGRlYnVnKFwidXBsb2FkaW5nIGFydGlmYWN0czogJW9cIiwge1xuICAgIHZpZGVvUGF0aCxcbiAgICB2aWRlb1VwbG9hZFVybCxcbiAgICBzY3JlZW5zaG90cyxcbiAgICBzY3JlZW5zaG90VXBsb2FkVXJscyxcbiAgfSk7XG5cbiAgY29uc3QgdG90YWxVcGxvYWRzID0gKHZpZGVvUGF0aCA/IDEgOiAwKSArIHNjcmVlbnNob3RzLmxlbmd0aDtcbiAgaWYgKHRvdGFsVXBsb2FkcyA9PT0gMCkge1xuICAgIC8vIGluZm8oXCJOb3RoaW5nIHRvIHVwbG9hZFwiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyB1cGxvYWQgdmlkZW9cbiAgaWYgKHZpZGVvVXBsb2FkVXJsICYmIHZpZGVvUGF0aCkge1xuICAgIGF3YWl0IHNhZmUoXG4gICAgICB1cGxvYWRWaWRlbyxcbiAgICAgIChlKSA9PiBkZWJ1ZyhcImZhaWxlZCB1cGxvYWRpbmcgdmlkZW8gJXMuIEVycm9yOiAlb1wiLCB2aWRlb1BhdGgsIGUpLFxuICAgICAgKCkgPT4gZGVidWcoXCJzdWNjZXNzIHVwbG9hZGluZ1wiLCB2aWRlb1BhdGgpXG4gICAgKSh2aWRlb1BhdGgsIHZpZGVvVXBsb2FkVXJsKTtcbiAgfVxuICAvLyB1cGxvYWQgc2NyZWVuc2hvdHNcbiAgaWYgKHNjcmVlbnNob3RVcGxvYWRVcmxzLmxlbmd0aCkge1xuICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgc2NyZWVuc2hvdHMubWFwKChzY3JlZW5zaG90KSA9PiB7XG4gICAgICAgIGNvbnN0IHVybCA9IHNjcmVlbnNob3RVcGxvYWRVcmxzLmZpbmQoXG4gICAgICAgICAgKHVybHMpID0+IHVybHMuc2NyZWVuc2hvdElkID09PSBzY3JlZW5zaG90LnNjcmVlbnNob3RJZFxuICAgICAgICApPy51cGxvYWRVcmw7XG4gICAgICAgIGlmICghdXJsKSB7XG4gICAgICAgICAgZGVidWcoXG4gICAgICAgICAgICBcIk5vIHVwbG9hZCB1cmwgZm9yIHNjcmVlbnNob3QgJW8sIHNjcmVlbnNob3RVcGxvYWRVcmxzOiAlb1wiLFxuICAgICAgICAgICAgc2NyZWVuc2hvdCxcbiAgICAgICAgICAgIHNjcmVlbnNob3RVcGxvYWRVcmxzXG4gICAgICAgICAgKTtcbiAgICAgICAgICB3YXJuKFwiQ2Fubm90IGZpbmQgdXBsb2FkIHVybCBmb3Igc2NyZWVuc2hvdDogJXNcIiwgc2NyZWVuc2hvdC5wYXRoKTtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNhZmUoXG4gICAgICAgICAgdXBsb2FkSW1hZ2UsXG4gICAgICAgICAgKGUpID0+XG4gICAgICAgICAgICBkZWJ1ZyhcbiAgICAgICAgICAgICAgXCJmYWlsZWQgdXBsb2FkaW5nIHNjcmVlbnNob3QgJXMuIEVycm9yOiAlb1wiLFxuICAgICAgICAgICAgICBzY3JlZW5zaG90LnBhdGgsXG4gICAgICAgICAgICAgIGVcbiAgICAgICAgICAgICksXG4gICAgICAgICAgKCkgPT4gZGVidWcoXCJzdWNjZXNzIHVwbG9hZGluZ1wiLCBzY3JlZW5zaG90LnBhdGgpXG4gICAgICAgICkoc2NyZWVuc2hvdC5wYXRoLCB1cmwpO1xuICAgICAgfSlcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCB1cGxvYWRTdGRvdXRTYWZlID0gc2FmZShcbiAgdXBkYXRlSW5zdGFuY2VTdGRvdXQsXG4gICgpID0+IHt9LFxuICAoKSA9PiB7fVxuKTtcbiIsICJleHBvcnQgY29uc3Qgc2FmZSA9XG4gIDxUIGV4dGVuZHMgYW55W10sIFIgZXh0ZW5kcyBhbnk+KFxuICAgIGZuOiAoLi4uYXJnczogVCkgPT4gUHJvbWlzZTxSPixcbiAgICBpZkZhbGVkOiAoZTogdW5rbm93bikgPT4gYW55LFxuICAgIGlmU3VjY2VlZDogKCkgPT4gYW55XG4gICkgPT5cbiAgYXN5bmMgKC4uLmFyZ3M6IFQpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgciA9IGF3YWl0IGZuKC4uLmFyZ3MpO1xuICAgICAgaWZTdWNjZWVkKCk7XG4gICAgICByZXR1cm4gcjtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZkZhbGVkKGUpO1xuICAgIH1cbiAgfTtcbiIsICJpbXBvcnQgRGVidWcgZnJvbSBcImRlYnVnXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgeyBtYWtlUmVxdWVzdCB9IGZyb20gXCIuL2h0dHBDbGllbnRcIjtcbmNvbnN0IHJlYWRGaWxlID0gZnMucHJvbWlzZXMucmVhZEZpbGU7XG5jb25zdCBkZWJ1ZyA9IERlYnVnKFwiY3VycmVudHM6dXBsb2FkXCIpO1xuXG5leHBvcnQgZnVuY3Rpb24gdXBsb2FkVmlkZW8oZmlsZTogc3RyaW5nLCB1cmw6IHN0cmluZykge1xuICByZXR1cm4gdXBsb2FkRmlsZShmaWxlLCB1cmwsIFwidmlkZW8vbXA0XCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBsb2FkSW1hZ2UoZmlsZTogc3RyaW5nLCB1cmw6IHN0cmluZykge1xuICByZXR1cm4gdXBsb2FkRmlsZShmaWxlLCB1cmwsIFwiaW1hZ2UvcG5nXCIpO1xufVxuXG50eXBlIFVwbG9hZFR5cGVzID0gXCJ2aWRlby9tcDRcIiB8IFwiaW1hZ2UvcG5nXCIgfCBcInBsYWluL3RleHRcIjtcbmFzeW5jIGZ1bmN0aW9uIHVwbG9hZEZpbGUoZmlsZTogc3RyaW5nLCB1cmw6IHN0cmluZywgdHlwZTogVXBsb2FkVHlwZXMpIHtcbiAgZGVidWcoJ3VwbG9hZGluZyBmaWxlIFwiJXNcIiB0byBcIiVzXCInLCBmaWxlLCB1cmwpO1xuICBjb25zdCBmID0gYXdhaXQgcmVhZEZpbGUoZmlsZSk7XG4gIGF3YWl0IG1ha2VSZXF1ZXN0KHtcbiAgICB1cmwsXG4gICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgIGRhdGE6IGYsXG4gICAgaGVhZGVyczoge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogdHlwZSxcbiAgICB9LFxuICB9KTtcbn1cbiIsICJpbXBvcnQgeyBnZXRBUElCYXNlVXJsIH0gZnJvbSBcIi4vaHR0cENsaWVudC9jb25maWdcIjtcblxuZXhwb3J0IGNvbnN0IGlzQ3VycmVudHMgPSAoKSA9PlxuICAhIXByb2Nlc3MuZW52LkNVUlJFTlRTX0VORk9SQ0VfSVNfQ1VSUkVOVFMgfHxcbiAgZ2V0QVBJQmFzZVVybCgpID09PSBcImh0dHBzOi8vY3kuY3VycmVudHMuZGV2XCI7XG4iLCAiaW1wb3J0KFwiLi9pbml0XCIpO1xuXG5pbXBvcnQgeyBTdW1tYXJ5UmVzdWx0LCBWYWxpZGF0ZWRDdXJyZW50c1BhcmFtZXRlcnMgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IGdldENhcHR1cmVkT3V0cHV0LCByZXNldENhcHR1cmUgfSBmcm9tIFwiLi9jYXB0dXJlXCI7XG5pbXBvcnQgeyBNZXJnZWRDb25maWcgfSBmcm9tIFwiLi9jb25maWcvY29uZmlnXCI7XG5pbXBvcnQgeyBnZXRTdW1tYXJ5Rm9yU3BlYywgbm9ybWFsaXplUmF3UmVzdWx0IH0gZnJvbSBcIi4vcmVzdWx0c1wiO1xuXG5pbXBvcnQgRGVidWcgZnJvbSBcImRlYnVnXCI7XG5pbXBvcnQgeyBjcmVhdGVCYXRjaGVkSW5zdGFuY2VzLCBjcmVhdGVJbnN0YW5jZSB9IGZyb20gXCIuL2FwaS9hcGlcIjtcbmltcG9ydCB7XG4gIENyZWF0ZUluc3RhbmNlUGF5bG9hZCxcbiAgSW5zdGFuY2VSZXNwb25zZVNwZWNEZXRhaWxzLFxufSBmcm9tIFwiLi9hcGkvdHlwZXMvaW5zdGFuY2VcIjtcbmltcG9ydCB7IHJ1blNwZWNGaWxlU2FmZSB9IGZyb20gXCIuL2N5cHJlc3NcIjtcbmltcG9ydCB7IGlzQ3VycmVudHMgfSBmcm9tIFwiLi9lbnZcIjtcbmltcG9ydCB7IGRpdmlkZXIsIGVycm9yLCBpbmZvLCB0aXRsZSwgd2FybiB9IGZyb20gXCIuL2xvZ1wiO1xuaW1wb3J0IHsgZ2V0VXBsb2FkUmVzdWx0c1Rhc2sgfSBmcm9tIFwiLi9yZXN1bHRzL3VwbG9hZFJlc3VsdHNcIjtcblxuY29uc3QgZGVidWcgPSBEZWJ1ZyhcImN1cnJlbnRzOnJ1bm5lclwiKTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJ1blRpbGxEb25lKFxuICB7XG4gICAgcnVuSWQsXG4gICAgZ3JvdXBJZCxcbiAgICBtYWNoaW5lSWQsXG4gICAgcGxhdGZvcm0sXG4gICAgY29uZmlnLFxuICB9OiBDcmVhdGVJbnN0YW5jZVBheWxvYWQgJiB7XG4gICAgY29uZmlnOiBNZXJnZWRDb25maWc7XG4gIH0sXG4gIHBhcmFtczogVmFsaWRhdGVkQ3VycmVudHNQYXJhbWV0ZXJzXG4pIHtcbiAgY29uc3Qgc3VtbWFyeTogU3VtbWFyeVJlc3VsdCA9IHt9O1xuICBjb25zdCB1cGxvYWRUYXNrczogUHJvbWlzZTxhbnk+W10gPSBbXTtcbiAgbGV0IGhhc01vcmUgPSB0cnVlO1xuXG4gIHdoaWxlIChoYXNNb3JlKSB7XG4gICAgY29uc3QgbmV3VGFza3MgPSBhd2FpdCBydW5CYXRjaCh7XG4gICAgICBydW5NZXRhOiB7XG4gICAgICAgIHJ1bklkLFxuICAgICAgICBncm91cElkLFxuICAgICAgICBtYWNoaW5lSWQsXG4gICAgICAgIHBsYXRmb3JtLFxuICAgICAgfSxcbiAgICAgIHBhcmFtcyxcbiAgICAgIGNvbmZpZyxcbiAgICB9KTtcbiAgICBpZiAoIW5ld1Rhc2tzLmxlbmd0aCkge1xuICAgICAgZGVidWcoXCJObyBtb3JlIHRhc2tzIHRvIHJ1bi4gVXBsb2FkcyBxdWV1ZTogJWRcIiwgdXBsb2FkVGFza3MubGVuZ3RoKTtcbiAgICAgIGhhc01vcmUgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBuZXdUYXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICBpZiAodGFzay5zdW1tYXJ5LnNwZWNTdW1tYXJ5KSB7XG4gICAgICAgIHN1bW1hcnlbdGFzay5zdW1tYXJ5LnNwZWNdID0gdGFzay5zdW1tYXJ5LnNwZWNTdW1tYXJ5O1xuICAgICAgfVxuICAgICAgdXBsb2FkVGFza3MucHVzaCh0YXNrLnVwbG9hZFRhc2tzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZCh1cGxvYWRUYXNrcyk7XG4gIHJldHVybiBzdW1tYXJ5O1xufVxuXG5hc3luYyBmdW5jdGlvbiBydW5CYXRjaCh7XG4gIHJ1bk1ldGEsXG4gIGNvbmZpZyxcbiAgcGFyYW1zLFxufToge1xuICBydW5NZXRhOiB7XG4gICAgcnVuSWQ6IHN0cmluZztcbiAgICBncm91cElkOiBzdHJpbmc7XG4gICAgbWFjaGluZUlkOiBzdHJpbmc7XG4gICAgcGxhdGZvcm06IENyZWF0ZUluc3RhbmNlUGF5bG9hZFtcInBsYXRmb3JtXCJdO1xuICB9O1xuICBjb25maWc6IE1lcmdlZENvbmZpZztcbiAgcGFyYW1zOiBWYWxpZGF0ZWRDdXJyZW50c1BhcmFtZXRlcnM7XG59KSB7XG4gIGxldCBiYXRjaCA9IHtcbiAgICBzcGVjczogW10gYXMgSW5zdGFuY2VSZXNwb25zZVNwZWNEZXRhaWxzW10sXG4gICAgY2xhaW1lZEluc3RhbmNlczogMCxcbiAgICB0b3RhbEluc3RhbmNlczogMCxcbiAgfTtcblxuICBpZiAoaXNDdXJyZW50cygpKSB7XG4gICAgZGVidWcoXCJHZXR0aW5nIGJhdGNoZWQgdGFza3M6ICVkXCIsIHBhcmFtcy5iYXRjaFNpemUpO1xuICAgIGJhdGNoID0gYXdhaXQgY3JlYXRlQmF0Y2hlZEluc3RhbmNlcyh7XG4gICAgICAuLi5ydW5NZXRhLFxuICAgICAgYmF0Y2hTaXplOiBwYXJhbXMuYmF0Y2hTaXplLFxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY3JlYXRlSW5zdGFuY2UocnVuTWV0YSk7XG5cbiAgICBpZiAocmVzcG9uc2Uuc3BlYyAhPT0gbnVsbCAmJiByZXNwb25zZS5pbnN0YW5jZUlkICE9PSBudWxsKSB7XG4gICAgICBiYXRjaC5zcGVjcy5wdXNoKHtcbiAgICAgICAgc3BlYzogcmVzcG9uc2Uuc3BlYyxcbiAgICAgICAgaW5zdGFuY2VJZDogcmVzcG9uc2UuaW5zdGFuY2VJZCxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBiYXRjaC5jbGFpbWVkSW5zdGFuY2VzID0gcmVzcG9uc2UuY2xhaW1lZEluc3RhbmNlcztcbiAgICBiYXRjaC50b3RhbEluc3RhbmNlcyA9IHJlc3BvbnNlLnRvdGFsSW5zdGFuY2VzO1xuICB9XG5cbiAgaWYgKGJhdGNoLnNwZWNzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGRpdmlkZXIoKTtcbiAgaW5mbyhcbiAgICBcIlJ1bm5pbmc6ICVzICglZC8lZClcIixcbiAgICBiYXRjaC5zcGVjcy5tYXAoKHMpID0+IHMuc3BlYykuam9pbihcIiwgXCIpLFxuICAgIGJhdGNoLmNsYWltZWRJbnN0YW5jZXMsXG4gICAgYmF0Y2gudG90YWxJbnN0YW5jZXNcbiAgKTtcblxuICBjb25zdCByYXdSZXN1bHQgPSBhd2FpdCBydW5TcGVjRmlsZVNhZmUoXG4gICAgeyBzcGVjOiBiYXRjaC5zcGVjcy5tYXAoKHMpID0+IHMuc3BlYykuam9pbihcIixcIikgfSxcbiAgICBwYXJhbXNcbiAgKTtcbiAgY29uc3Qgbm9ybWFsaXplZFJlc3VsdCA9IG5vcm1hbGl6ZVJhd1Jlc3VsdChcbiAgICByYXdSZXN1bHQsXG4gICAgYmF0Y2guc3BlY3MubWFwKChzKSA9PiBzLnNwZWMpLFxuICAgIGNvbmZpZ1xuICApO1xuXG4gIHRpdGxlKFwiYmx1ZVwiLCBcIlJlcG9ydGluZyByZXN1bHRzIGFuZCBhcnRpZmFjdHMgaW4gYmFja2dyb3VuZC4uLlwiKTtcblxuICBjb25zdCBvdXRwdXQgPSBnZXRDYXB0dXJlZE91dHB1dCgpO1xuICByZXNldENhcHR1cmUoKTtcblxuICBjb25zdCBiYXRjaFJlc3VsdCA9IGJhdGNoLnNwZWNzLm1hcCgoc3BlYykgPT4ge1xuICAgIGNvbnN0IHNwZWNTdW1tYXJ5ID0gZ2V0U3VtbWFyeUZvclNwZWMoc3BlYy5zcGVjLCBub3JtYWxpemVkUmVzdWx0KTtcbiAgICBpZiAoIXNwZWNTdW1tYXJ5KSB7XG4gICAgICB3YXJuKCdDYW5ub3QgZmluZCBydW4gcmVzdWx0IGZvciBzcGVjIFwiJXNcIicsIHNwZWMuc3BlYyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1bW1hcnk6IHtcbiAgICAgICAgc3BlYzogc3BlYy5zcGVjLFxuICAgICAgICBzcGVjU3VtbWFyeSxcbiAgICAgIH0sXG4gICAgICB1cGxvYWRUYXNrczogZ2V0VXBsb2FkUmVzdWx0c1Rhc2soe1xuICAgICAgICAuLi5zcGVjLFxuICAgICAgICBydW5SZXN1bHQ6IG5vcm1hbGl6ZWRSZXN1bHQsXG4gICAgICAgIG91dHB1dCxcbiAgICAgIH0pLmNhdGNoKGVycm9yKSxcbiAgICB9O1xuICB9KTtcblxuICByZXR1cm4gYmF0Y2hSZXN1bHQ7XG59XG4iLCAiaW1wb3J0IGN5cHJlc3MgZnJvbSBcImN5cHJlc3NcIjtcbmltcG9ydCBEZWJ1ZyBmcm9tIFwiZGVidWdcIjtcbmltcG9ydCB7IEN5cHJlc3NSZXN1bHQsIFZhbGlkYXRlZEN1cnJlbnRzUGFyYW1ldGVycyB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0U3RyaXBwZWRDeXByZXNzT3B0aW9ucyB9IGZyb20gXCIuL2NvbmZpZ1wiO1xuXG5jb25zdCBkZWJ1ZyA9IERlYnVnKFwiY3VycmVudHM6Y3lwcmVzc1wiKTtcbmludGVyZmFjZSBSdW5DeXByZXNzU3BlY0ZpbGUge1xuICBzcGVjOiBzdHJpbmc7XG59XG4vKipcbiAqIFJ1biBDeXByZXNzIHRlc3RzLCB3ZSBuZWVkIHRvIHBhc3MgZG93biB0aGUgc3RyaXBwZWQgb3B0aW9ucyBhcyBpZiB3ZSd2ZSByZWNlaXZlZCB0aGVtIGZyb20gdGhlIENMSVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuU3BlY0ZpbGUoXG4gIHsgc3BlYyB9OiBSdW5DeXByZXNzU3BlY0ZpbGUsXG4gIGN5cHJlc3NSdW5PcHRpb25zOiBWYWxpZGF0ZWRDdXJyZW50c1BhcmFtZXRlcnNcbikge1xuICBjb25zdCBydW5BUElPcHRpb25zID0gZ2V0U3RyaXBwZWRDeXByZXNzT3B0aW9ucyhjeXByZXNzUnVuT3B0aW9ucyk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAuLi5ydW5BUElPcHRpb25zLFxuICAgIGNvbmZpZzoge1xuICAgICAgLi4ucnVuQVBJT3B0aW9ucy5jb25maWcsXG4gICAgICB0cmFzaEFzc2V0c0JlZm9yZVJ1bnM6IGZhbHNlLFxuICAgIH0sXG4gICAgZW52OiB7XG4gICAgICAuLi5ydW5BUElPcHRpb25zLmVudixcbiAgICAgIGN1cnJlbnRzX3dzOiB0cnVlLFxuICAgIH0sXG4gICAgc3BlYyxcbiAgfTtcbiAgZGVidWcoXCJydW5uaW5nIGN5cHJlc3Mgd2l0aCBvcHRpb25zICVvXCIsIG9wdGlvbnMpO1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjeXByZXNzLnJ1bihvcHRpb25zKTtcblxuICBkZWJ1ZyhcImN5cHJlc3MgcnVuIHJlc3VsdCAlb1wiLCByZXN1bHQpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgY29uc3QgcnVuU3BlY0ZpbGVTYWZlID0gYXN5bmMgKFxuICB7IHNwZWMgfTogUnVuQ3lwcmVzc1NwZWNGaWxlLFxuICBjeXByZXNzUnVuT3B0aW9uczogVmFsaWRhdGVkQ3VycmVudHNQYXJhbWV0ZXJzXG4pOiBQcm9taXNlPEN5cHJlc3NSZXN1bHQ+ID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgcnVuU3BlY0ZpbGUoeyBzcGVjIH0sIGN5cHJlc3NSdW5PcHRpb25zKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBkZWJ1ZyhcImN5cHJlc3MgcnVuIGV4Y2VwdGlvbiAlb1wiLCBlcnJvcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogXCJmYWlsZWRcIixcbiAgICAgIGZhaWx1cmVzOiAxLFxuICAgICAgbWVzc2FnZTogYEN5cHJlc3MgcHJvY2VzcyBjcmFzaGVkIHdpdGggYW4gZXJyb3I6XFxuJHtcbiAgICAgICAgKGVycm9yIGFzIEVycm9yKS5tZXNzYWdlXG4gICAgICB9XFxuJHsoZXJyb3IgYXMgRXJyb3IpLnN0YWNrfX1gLFxuICAgIH07XG4gIH1cbn07XG4iLCAiZXhwb3J0ICogZnJvbSBcIi4vZ2V0U3BlY0ZpbGVzXCI7XG4iLCAiaW1wb3J0IHsgVmFsaWRhdGVkQ3VycmVudHNQYXJhbWV0ZXJzIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBNZXJnZWRDb25maWcgfSBmcm9tIFwiLi4vY29uZmlnL2NvbmZpZ1wiO1xuaW1wb3J0IHsgd2FybiB9IGZyb20gXCIuLi9sb2dcIjtcbmltcG9ydCB7IGZpbmRTcGVjcyB9IGZyb20gXCIuL3NwZWNNYXRjaGVyXCI7XG5cbmNvbnN0IGdldFNwZWNQYXR0ZXJuID0gKFxuICBjb25maWdQYXR0ZXJuOiBNZXJnZWRDb25maWdbXCJzcGVjUGF0dGVyblwiXSxcbiAgZXhwbGljaXQ/OiBzdHJpbmdbXVxuKSA9PiBleHBsaWNpdCB8fCBjb25maWdQYXR0ZXJuO1xuXG5leHBvcnQgY29uc3QgZ2V0U3BlY0ZpbGVzID0gYXN5bmMgKHtcbiAgY29uZmlnLFxuICBwYXJhbXMsXG59OiB7XG4gIGNvbmZpZzogTWVyZ2VkQ29uZmlnO1xuICBwYXJhbXM6IFZhbGlkYXRlZEN1cnJlbnRzUGFyYW1ldGVycztcbn0pID0+IHtcbiAgY29uc3Qgc3BlY1BhdHRlcm4gPSBnZXRTcGVjUGF0dGVybihjb25maWcuc3BlY1BhdHRlcm4sIHBhcmFtcy5zcGVjKTtcbiAgLy8gZmluZCB0aGUgc3BlYyBmaWxlcyBhY2NvcmRpbmcgdG8gdGhlIHJlc29sdmVkIGNvbmZpZ3VyYXRpb25cbiAgY29uc3Qgc3BlY3MgPSBhd2FpdCBmaW5kU3BlY3Moe1xuICAgIHByb2plY3RSb290OiBjb25maWcucHJvamVjdFJvb3QsXG4gICAgdGVzdGluZ1R5cGU6IHBhcmFtcy50ZXN0aW5nVHlwZSxcbiAgICBzcGVjUGF0dGVybixcbiAgICBjb25maWdTcGVjUGF0dGVybjogY29uZmlnLnNwZWNQYXR0ZXJuLFxuICAgIGV4Y2x1ZGVTcGVjUGF0dGVybjogY29uZmlnLmV4Y2x1ZGVTcGVjUGF0dGVybixcbiAgICBhZGRpdGlvbmFsSWdub3JlUGF0dGVybjogY29uZmlnLmFkZGl0aW9uYWxJZ25vcmVQYXR0ZXJuLFxuICB9KTtcbiAgaWYgKHNwZWNzLmxlbmd0aCA9PT0gMCkge1xuICAgIHdhcm4oXCJObyBzcGVjIGZpbGVzIGZvdW5kIHRvIGV4ZWN1dGUuIENvbmZpZ3VyYXRpb246ICVPXCIsIHtcbiAgICAgIHNwZWNQYXR0ZXJuLFxuICAgICAgY29uZmlnU3BlY1BhdHRlcm46IGNvbmZpZy5zcGVjUGF0dGVybixcbiAgICAgIGV4Y2x1ZGVTcGVjUGF0dGVybjogW1xuICAgICAgICBjb25maWcuZXhjbHVkZVNwZWNQYXR0ZXJuLFxuICAgICAgICBjb25maWcuYWRkaXRpb25hbElnbm9yZVBhdHRlcm4sXG4gICAgICBdLmZsYXQoMiksXG4gICAgICB0ZXN0aW5nVHlwZTogcGFyYW1zLnRlc3RpbmdUeXBlLFxuICAgIH0pO1xuICAgIHJldHVybiB7IHNwZWNzOiBbXSwgc3BlY1BhdHRlcm4gfTtcbiAgfVxuICByZXR1cm4geyBzcGVjcywgc3BlY1BhdHRlcm4gfTtcbn07XG4iLCAiaW1wb3J0IERlYnVnIGZyb20gXCJkZWJ1Z1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcblxuaW1wb3J0IGNvbW1vblBhdGhQcmVmaXggZnJvbSBcImNvbW1vbi1wYXRoLXByZWZpeFwiO1xuaW1wb3J0IGdsb2JieSwgeyBHbG9iYnlPcHRpb25zIH0gZnJvbSBcImdsb2JieVwiO1xuaW1wb3J0IF8gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IG9zIGZyb20gXCJvc1wiO1xuaW1wb3J0IHtcbiAgRmluZFNwZWNzLFxuICBTcGVjVHlwZSxcbiAgU3BlY1dpdGhSZWxhdGl2ZVJvb3QsXG4gIFRlc3RpbmdUeXBlLFxufSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHRvQXJyYXksIHRvUG9zaXggfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuY29uc3QgZGVidWcgPSBEZWJ1ZyhcImN1cnJlbnRzOnNwZWNzXCIpO1xuXG50eXBlIEdsb2JQYXR0ZXJuID0gc3RyaW5nIHwgc3RyaW5nW107XG5cbi8qKlxuICogUmVwbGljYXRlIGhvdyBjeXByZXNzIGlzIGRpc2NvdmVyaW5nIHNwZWMgZmlsZXNcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jeXByZXNzLWlvL2N5cHJlc3MvYmxvYi9iYzllZGI0NDUyM2Q2MmNhOTM0ODI3YjhlODcwZjM4Zjg2NjM0Y2E0L3BhY2thZ2VzL2RhdGEtY29udGV4dC9zcmMvc291cmNlcy9Qcm9qZWN0RGF0YVNvdXJjZS50cyNMMjUwXG4gKiBodHRwczovL2dpdGh1Yi5jb20vY3lwcmVzcy1pby9jeXByZXNzL2Jsb2IvYmM5ZWRiNDQ1MjNkNjJjYTkzNDgyN2I4ZTg3MGYzOGY4NjYzNGNhNC9wYWNrYWdlcy9kYXRhLWNvbnRleHQvc3JjL2FjdGlvbnMvUHJvamVjdEFjdGlvbnMudHMjTDQxN1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmluZFNwZWNzKHtcbiAgcHJvamVjdFJvb3QsXG4gIHRlc3RpbmdUeXBlLFxuICBzcGVjUGF0dGVybixcbiAgY29uZmlnU3BlY1BhdHRlcm4sXG4gIGV4Y2x1ZGVTcGVjUGF0dGVybixcbiAgYWRkaXRpb25hbElnbm9yZVBhdHRlcm4sXG59OiBGaW5kU3BlY3M8c3RyaW5nW10gfCBzdHJpbmc+KTogUHJvbWlzZTxTcGVjV2l0aFJlbGF0aXZlUm9vdFtdPiB7XG4gIGNvbmZpZ1NwZWNQYXR0ZXJuID0gdG9BcnJheShjb25maWdTcGVjUGF0dGVybik7XG4gIHNwZWNQYXR0ZXJuID0gdG9BcnJheShzcGVjUGF0dGVybik7XG4gIGV4Y2x1ZGVTcGVjUGF0dGVybiA9IHRvQXJyYXkoZXhjbHVkZVNwZWNQYXR0ZXJuKSB8fCBbXTtcblxuICAvLyBleGNsdWRlIGFsbCBzcGVjcyBtYXRjaGluZyBlMmUgaWYgaW4gY29tcG9uZW50IHRlc3RpbmdcbiAgYWRkaXRpb25hbElnbm9yZVBhdHRlcm4gPSB0b0FycmF5KGFkZGl0aW9uYWxJZ25vcmVQYXR0ZXJuKSB8fCBbXTtcblxuICBkZWJ1ZyhcImV4cGxvcmluZyBzcGVjIGZpbGVzIGZvciBleGVjdXRpb24gJU9cIiwge1xuICAgIHRlc3RpbmdUeXBlLFxuICAgIHByb2plY3RSb290LFxuICAgIHNwZWNQYXR0ZXJuLFxuICAgIGNvbmZpZ1NwZWNQYXR0ZXJuLFxuICAgIGV4Y2x1ZGVTcGVjUGF0dGVybixcbiAgICBhZGRpdGlvbmFsSWdub3JlUGF0dGVybixcbiAgfSk7XG5cbiAgaWYgKCFzcGVjUGF0dGVybiB8fCAhY29uZmlnU3BlY1BhdHRlcm4pIHtcbiAgICB0aHJvdyBFcnJvcihcIkNvdWxkIG5vdCBmaW5kIGdsb2IgcGF0dGVybnMgZm9yIGV4cGxvcmluZyBzcGVjc1wiKTtcbiAgfVxuXG4gIGxldCBzcGVjQWJzb2x1dGVQYXRocyA9IGF3YWl0IGdldEZpbGVzQnlHbG9iKHByb2plY3RSb290LCBzcGVjUGF0dGVybiwge1xuICAgIGFic29sdXRlOiB0cnVlLFxuICAgIGlnbm9yZTogWy4uLmV4Y2x1ZGVTcGVjUGF0dGVybiwgLi4uYWRkaXRpb25hbElnbm9yZVBhdHRlcm5dLFxuICB9KTtcblxuICAvLyBJZiB0aGUgc3BlY1BhdHRlcm4gYW5kIGNvbmZpZ1NwZWNQYXR0ZXJuIGFyZSBkaWZmZXJlbnQsXG4gIC8vIGl0IG1lYW5zIHRoZSB1c2VyIHBhc3NlZCBzb21ldGhpbmcgbm9uLWRlZmF1bHQgdmlhIC0tc3BlYyAocnVuIG1vZGUgb25seSlcbiAgLy8gaW4gdGhpcyBzY2VuYXJpbywgd2Ugd2FudCB0byBncmFiIGV2ZXJ5dGhpbmcgdGhhdCBtYXRjaGVzIGAtLXNwZWNgXG4gIC8vIHRoYXQgZmFsbHMgd2l0aGluIHRoZWlyIGRlZmF1bHQgc3BlY1BhdHRlcm4uIFRoZSByZWFzb24gaXMgc28gd2UgYXZvaWRcbiAgLy8gYXR0ZW1wdGluZyB0byBydW4gdGhpbmdzIHRoYXQgYXJlIG5vdCBzcGVjcywgZWcgc291cmNlIGNvZGUsIHZpZGVvcywgZXRjLlxuICAvL1xuICAvLyBFeGFtcGxlOiBkZXZlbG9wZXIgd2FudHMgdG8gcnVuIHRlc3RzIGFzc29jaWF0ZWQgd2l0aCB0aW1lcnMgaW4gcGFja2FnZXMvZHJpdmVyXG4gIC8vIFNvIHRoZXkgcnVuIHlhcm4gY3lwcmVzczpydW4gLS1zcGVjICoqL3RpbWVycypcbiAgLy8gd2UgZG8gKipub3QqKiB3YW50IHRvIGNhcHR1cmUgYHRpbWVycy50c2AgKHNvdXJjZSBjb2RlKSBvciBhIHZpZGVvIGluXG4gIC8vIGN5cHJlc3MvdmlkZW9zL3RpbWVycy5jeS50cy5tcDQsIHNvIHdlIHRha2UgdGhlIGludGVyc2VjdGlvbiBiZXR3ZWVuIHNwZWNQYXR0ZXJuXG4gIC8vIGFuZCAtLXNwZWMuXG4gIGlmICghXy5pc0VxdWFsKHNwZWNQYXR0ZXJuLCBjb25maWdTcGVjUGF0dGVybikpIHtcbiAgICBjb25zdCBkZWZhdWx0U3BlY0Fic29sdXRlUGF0aHMgPSBhd2FpdCBnZXRGaWxlc0J5R2xvYihcbiAgICAgIHByb2plY3RSb290LFxuICAgICAgY29uZmlnU3BlY1BhdHRlcm4sXG4gICAgICB7XG4gICAgICAgIGFic29sdXRlOiB0cnVlLFxuICAgICAgICBpZ25vcmU6IFsuLi5leGNsdWRlU3BlY1BhdHRlcm4sIC4uLmFkZGl0aW9uYWxJZ25vcmVQYXR0ZXJuXSxcbiAgICAgIH1cbiAgICApO1xuXG4gICAgc3BlY0Fic29sdXRlUGF0aHMgPSBfLmludGVyc2VjdGlvbihcbiAgICAgIHNwZWNBYnNvbHV0ZVBhdGhzLFxuICAgICAgZGVmYXVsdFNwZWNBYnNvbHV0ZVBhdGhzXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBtYXRjaGVkU3BlY3Moe1xuICAgIHByb2plY3RSb290LFxuICAgIHRlc3RpbmdUeXBlLFxuICAgIHNwZWNBYnNvbHV0ZVBhdGhzLFxuICAgIHNwZWNQYXR0ZXJuLFxuICB9KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0RmlsZXNCeUdsb2IoXG4gIGN3ZDogc3RyaW5nLFxuICBnbG9iOiBHbG9iUGF0dGVybixcbiAgZ2xvYk9wdGlvbnM6IEdsb2JieU9wdGlvbnNcbikge1xuICBjb25zdCBnbG9icyA9IChbXSBhcyBzdHJpbmdbXSkuY29uY2F0KGdsb2IpLm1hcCgoZ2xvYlBhdHRlcm4pID0+IHtcbiAgICBjb25zdCB3b3JraW5nRGlyZWN0b3J5UHJlZml4ID0gcGF0aC5qb2luKGN3ZCwgcGF0aC5zZXApO1xuXG4gICAgLy8gSWYgdGhlIHBhdHRlcm4gaW5jbHVkZXMgdGhlIHdvcmtpbmcgZGlyZWN0b3J5LCB3ZSBzdHJpcCBpdCBmcm9tIHRoZSBwYXR0ZXJuLlxuICAgIC8vIFRoZSB3b3JraW5nIGRpcmVjdG9yeSBwYXRoIG1heSBpbmNsdWRlIGNoYXJhY3RlcnMgdGhhdCBjb25mbGljdCB3aXRoIGdsb2JcbiAgICAvLyBzeW50YXggKGJyYWNrZXRzLCBwYXJlbnRoZXNlcywgZXRjLikgYW5kIGNhdXNlIG91ciBzZWFyY2hlcyB0byBpbmFkdmVydGVudGx5IGZhaWwuXG4gICAgLy8gV2Ugc2NvcGUgb3VyIHNlYXJjaCB0byB0aGUgd29ya2luZyBkaXJlY3RvcnkgdXNpbmcgdGhlIGBjd2RgIGdsb2JieSBvcHRpb24uXG4gICAgaWYgKGdsb2JQYXR0ZXJuLnN0YXJ0c1dpdGgod29ya2luZ0RpcmVjdG9yeVByZWZpeCkpIHtcbiAgICAgIHJldHVybiBnbG9iUGF0dGVybi5yZXBsYWNlKHdvcmtpbmdEaXJlY3RvcnlQcmVmaXgsIFwiXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBnbG9iUGF0dGVybjtcbiAgfSk7XG5cbiAgY29uc3QgaWdub3JlR2xvYiA9IChnbG9iT3B0aW9ucz8uaWdub3JlID8/IFtdKS5jb25jYXQoXCIqKi9ub2RlX21vZHVsZXMvKipcIik7XG5cbiAgaWYgKG9zLnBsYXRmb3JtKCkgPT09IFwid2luMzJcIikge1xuICAgIC8vIGdsb2JieSBjYW4ndCB3b3JrIHdpdGggYmFja3dhcmRzIHNsYXNoZXNcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vc2luZHJlc29yaHVzL2dsb2JieS9pc3N1ZXMvMTc5XG4gICAgZGVidWcoXCJ1cGRhdGluZyBnbG9iIHBhdHRlcm5zIHRvIFBPU0lYXCIpO1xuICAgIGZvciAoY29uc3QgaSBpbiBnbG9icykge1xuICAgICAgY29uc3QgY3VyID0gZ2xvYnNbaV07XG5cbiAgICAgIGlmICghY3VyKSB0aHJvdyBuZXcgRXJyb3IoXCJ1bmRlZmluZWQgZ2xvYiByZWNlaXZlZFwiKTtcblxuICAgICAgZ2xvYnNbaV0gPSB0b1Bvc2l4KGN1cik7XG4gICAgfVxuICB9XG5cbiAgdHJ5IHtcbiAgICBkZWJ1ZyhcImdsb2JiaW5nIHBhdHRlcm4ocyk6ICVvXCIsIGdsb2JzKTtcbiAgICBkZWJ1ZyhcIndpdGhpbiBkaXJlY3Rvcnk6ICVzXCIsIGN3ZCk7XG5cbiAgICBjb25zdCBmaWxlcyA9IGF3YWl0IG1hdGNoR2xvYnMoZ2xvYnMsIHtcbiAgICAgIG9ubHlGaWxlczogdHJ1ZSxcbiAgICAgIGFic29sdXRlOiB0cnVlLFxuICAgICAgY3dkLFxuICAgICAgLi4uZ2xvYk9wdGlvbnMsXG4gICAgICBpZ25vcmU6IGlnbm9yZUdsb2IsXG4gICAgfSk7XG5cbiAgICByZXR1cm4gZmlsZXM7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBkZWJ1ZyhcImVycm9yIGluIGdldEZpbGVzQnlHbG9iICVvXCIsIGUpO1xuXG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbmNvbnN0IG1hdGNoR2xvYnMgPSBhc3luYyAoZ2xvYnM6IEdsb2JQYXR0ZXJuLCBnbG9iYnlPcHRpb25zOiBHbG9iYnlPcHRpb25zKSA9PiB7XG4gIHJldHVybiBhd2FpdCBnbG9iYnkoZ2xvYnMsIGdsb2JieU9wdGlvbnMpO1xufTtcblxuaW50ZXJmYWNlIE1hdGNoZWRTcGVjcyB7XG4gIHByb2plY3RSb290OiBzdHJpbmc7XG4gIHRlc3RpbmdUeXBlOiBUZXN0aW5nVHlwZTtcbiAgc3BlY0Fic29sdXRlUGF0aHM6IHN0cmluZ1tdO1xuICBzcGVjUGF0dGVybjogc3RyaW5nIHwgc3RyaW5nW107XG59XG5cbmZ1bmN0aW9uIG1hdGNoZWRTcGVjcyh7XG4gIHByb2plY3RSb290LFxuICB0ZXN0aW5nVHlwZSxcbiAgc3BlY0Fic29sdXRlUGF0aHMsXG59OiBNYXRjaGVkU3BlY3MpIHtcbiAgZGVidWcoXCJmb3VuZCBzcGVjcyAlb1wiLCBzcGVjQWJzb2x1dGVQYXRocyk7XG5cbiAgbGV0IGNvbW1vblJvb3QgPSBcIlwiO1xuXG4gIGlmIChzcGVjQWJzb2x1dGVQYXRocy5sZW5ndGggPT09IDEpIHtcbiAgICBjb21tb25Sb290ID0gcGF0aC5kaXJuYW1lKHNwZWNBYnNvbHV0ZVBhdGhzWzBdKTtcbiAgfSBlbHNlIHtcbiAgICBjb21tb25Sb290ID0gY29tbW9uUGF0aFByZWZpeChzcGVjQWJzb2x1dGVQYXRocyk7XG4gIH1cblxuICBjb25zdCBzcGVjcyA9IHNwZWNBYnNvbHV0ZVBhdGhzLm1hcCgoYWJzb2x1dGUpID0+IHtcbiAgICByZXR1cm4gdHJhbnNmb3JtU3BlYyh7XG4gICAgICBwcm9qZWN0Um9vdCxcbiAgICAgIGFic29sdXRlLFxuICAgICAgdGVzdGluZ1R5cGUsXG4gICAgICBjb21tb25Sb290LFxuICAgICAgcGxhdGZvcm06IG9zLnBsYXRmb3JtKCksXG4gICAgICBzZXA6IHBhdGguc2VwLFxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gc3BlY3M7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNmb3JtU3BlYyB7XG4gIHByb2plY3RSb290OiBzdHJpbmc7XG4gIGFic29sdXRlOiBzdHJpbmc7XG4gIHRlc3RpbmdUeXBlOiBUZXN0aW5nVHlwZTtcbiAgY29tbW9uUm9vdDogc3RyaW5nO1xuICBwbGF0Zm9ybTogTm9kZUpTLlBsYXRmb3JtO1xuICBzZXA6IHN0cmluZztcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtU3BlYyh7XG4gIHByb2plY3RSb290LFxuICBhYnNvbHV0ZSxcbiAgdGVzdGluZ1R5cGUsXG4gIGNvbW1vblJvb3QsXG4gIHBsYXRmb3JtLFxuICBzZXAsXG59OiBUcmFuc2Zvcm1TcGVjKSB7XG4gIGlmIChwbGF0Zm9ybSA9PT0gXCJ3aW4zMlwiKSB7XG4gICAgYWJzb2x1dGUgPSB0b1Bvc2l4KGFic29sdXRlLCBzZXApO1xuICAgIHByb2plY3RSb290ID0gdG9Qb3NpeChwcm9qZWN0Um9vdCwgc2VwKTtcbiAgfVxuXG4gIGNvbnN0IHJlbGF0aXZlID0gcGF0aC5yZWxhdGl2ZShwcm9qZWN0Um9vdCwgYWJzb2x1dGUpO1xuICBjb25zdCBwYXJzZWRGaWxlID0gcGF0aC5wYXJzZShhYnNvbHV0ZSk7XG4gIGNvbnN0IGZpbGVFeHRlbnNpb24gPSBwYXRoLmV4dG5hbWUoYWJzb2x1dGUpO1xuXG4gIGNvbnN0IHNwZWNGaWxlRXh0ZW5zaW9uID1cbiAgICBbXCIuc3BlY1wiLCBcIi50ZXN0XCIsIFwiLXNwZWNcIiwgXCItdGVzdFwiLCBcIi5jeVwiXVxuICAgICAgLm1hcCgoZXh0KSA9PiBleHQgKyBmaWxlRXh0ZW5zaW9uKVxuICAgICAgLmZpbmQoKGV4dCkgPT4gYWJzb2x1dGUuZW5kc1dpdGgoZXh0KSkgfHwgZmlsZUV4dGVuc2lvbjtcblxuICBjb25zdCBwYXJ0cyA9IGFic29sdXRlLnNwbGl0KHByb2plY3RSb290KTtcbiAgbGV0IG5hbWUgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXSB8fCBcIlwiO1xuXG4gIGlmIChuYW1lLnN0YXJ0c1dpdGgoXCIvXCIpKSB7XG4gICAgbmFtZSA9IG5hbWUuc2xpY2UoMSk7XG4gIH1cblxuICBjb25zdCBMRUFESU5HX1NMQVNIID0gL15cXC98L2c7XG4gIGNvbnN0IHJlbGF0aXZlVG9Db21tb25Sb290ID0gYWJzb2x1dGVcbiAgICAucmVwbGFjZShjb21tb25Sb290LCBcIlwiKVxuICAgIC5yZXBsYWNlKExFQURJTkdfU0xBU0gsIFwiXCIpO1xuXG4gIHJldHVybiB7XG4gICAgZmlsZUV4dGVuc2lvbixcbiAgICBiYXNlTmFtZTogcGFyc2VkRmlsZS5iYXNlLFxuICAgIGZpbGVOYW1lOiBwYXJzZWRGaWxlLmJhc2UucmVwbGFjZShzcGVjRmlsZUV4dGVuc2lvbiwgXCJcIiksXG4gICAgc3BlY0ZpbGVFeHRlbnNpb24sXG4gICAgcmVsYXRpdmVUb0NvbW1vblJvb3QsXG4gICAgc3BlY1R5cGU6ICh0ZXN0aW5nVHlwZSA9PT0gXCJjb21wb25lbnRcIlxuICAgICAgPyBcImNvbXBvbmVudFwiXG4gICAgICA6IFwiaW50ZWdyYXRpb25cIikgYXMgU3BlY1R5cGUsXG4gICAgbmFtZSxcbiAgICByZWxhdGl2ZSxcbiAgICBhYnNvbHV0ZSxcbiAgfTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBS00sa0JBTU87QUFYYjtBQUFBO0FBS0EsSUFBTSxtQkFBbUIsTUFDdkIsT0FBTyxhQUFhLGNBQ2hCLElBQUksSUFBSSxVQUFVLFVBQVUsRUFBRSxPQUM3QixTQUFTLGlCQUFpQixTQUFTLGNBQWMsT0FDbEQsSUFBSSxJQUFJLFdBQVcsU0FBUyxPQUFPLEVBQUU7QUFFcEMsSUFBTSxnQkFBZ0MsaUNBQWlCO0FBQUE7QUFBQTs7O0FDWDlELGtCQUVhLGtCQWNBLFVBRVQsU0FDUyxlQUNBO0FBcEJiO0FBQUE7QUFBQTtBQUFBO0FBQUEsbUJBQXlDO0FBRWxDLElBQU0sbUJBQW1CLENBQUMsUUFBNkI7QUFDNUQsVUFBSSxLQUFDLDJCQUFhLEdBQUcsR0FBRztBQUN0QixlQUFPO0FBQUEsTUFDVDtBQUNBLFVBQUksSUFBSSxTQUFTLGdCQUFnQjtBQUMvQixlQUFPO0FBQUEs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LE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUE7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQTtBQUFBLElBQ0YsQ0FBQztBQUFBO0FBQUEsSUFFRCxXQUFXLFFBQVE7QUFBQTtBQUFBLE1BRWpCO0FBQUE7QUFBQSxNQUNBO0FBQUE7QUFBQSxNQUNBO0FBQUE7QUFBQSxNQUNBO0FBQUE7QUFBQSxNQUNBO0FBQUE7QUFBQSxNQUNBO0FBQUE7QUFBQSxNQUNBO0FBQUE7QUFBQTtBQUFBLE1BRUE7QUFBQTtBQUFBLE1BQ0E7QUFBQTtBQUFBLE1BQ0E7QUFBQTtBQUFBLE1BQ0E7QUFBQTtBQUFBLE1BQ0E7QUFBQTtBQUFBLE1BQ0E7QUFBQTtBQUFBLE1BQ0E7QUFBQTtBQUFBLE1BQ0E7QUFBQTtBQUFBO0FBQUEsTUFFQTtBQUFBO0FBQUEsTUFDQTtBQUFBO0FBQUEsTUFDQTtBQUFBO0FBQUEsTUFDQTtBQUFBO0FBQUEsTUFDQTtBQUFBO0FBQUEsTUFDQTtBQUFBO0FBQUEsSUFDRixDQUFDO0FBQUEsSUFDRCxVQUFVO0FBQUEsSUFDVixnQkFBZ0IsUUFBUTtBQUFBLE1BQ3RCO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxJQUNGLENBQUM7QUFBQSxJQUNELFFBQVEsUUFBUTtBQUFBLE1BQ2Q7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsSUFDRixDQUFDO0FBQUEsSUFDRCxTQUFTO0FBQUE7QUFBQSxJQUVULFNBQVMsUUFBUTtBQUFBLE1BQ2Y7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLElBQ0YsQ0FBQztBQUFBO0FBQUEsSUFFRCxTQUFTLFFBQVE7QUFBQSxNQUNmO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBO0FBQUEsSUFDRixDQUFDO0FBQUEsRUFDSDtBQUNGO0FBSUEsSUFBTSx3QkFBd0IsTUFBK0I7QUFDM0QsUUFBTSxFQUFFLElBQUksSUFBSTtBQUVoQixTQUFPO0FBQUEsSUFDTCxVQUFVO0FBQUEsTUFDUixLQUFLLElBQUk7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsTUFNVCxRQUNFLElBQUksMENBQTBDLElBQUk7QUFBQSxNQUNwRCxTQUFTO0FBQUEsUUFDUDtBQUFBLFFBQ0EsSUFBSTtBQUFBLFFBQ0osSUFBSTtBQUFBLE1BQ047QUFBQSxNQUNBLFlBQVksSUFBSTtBQUFBLE1BQ2hCLGFBQWEsSUFBSTtBQUFBO0FBQUE7QUFBQSxJQUduQjtBQUFBLElBQ0EsY0FBYztBQUFBLE1BQ1osS0FBSyxJQUFJO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxNQUtULGNBQWMsSUFBSTtBQUFBO0FBQUEsSUFFcEI7QUFBQSxJQUNBLE9BQU87QUFBQSxNQUNMLEtBQUssSUFBSTtBQUFBLE1BQ1QsUUFBUSxJQUFJO0FBQUEsTUFDWixTQUFTLElBQUk7QUFBQSxNQUNiLFlBQVksSUFBSTtBQUFBLE1BQ2hCLGFBQWEsSUFBSTtBQUFBLElBQ25CO0FBQUEsSUFDQSxRQUFRO0FBQUEsTUFDTixLQUFLLElBQUk7QUFBQSxNQUNULFFBQVEsSUFBSTtBQUFBO0FBQUEsTUFFWixZQUFZLElBQUk7QUFBQTtBQUFBLE1BRWhCLGNBQWMsSUFBSTtBQUFBO0FBQUEsSUFFcEI7QUFBQSxJQUNBLFdBQVc7QUFBQSxNQUNULEtBQUssSUFBSTtBQUFBLE1BQ1QsUUFBUSxJQUFJO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBTWQ7QUFBQSxJQUNBLFdBQVc7QUFBQSxNQUNULEtBQUssSUFBSTtBQUFBLE1BQ1QsUUFBUSxJQUFJO0FBQUEsTUFDWixTQUFTLElBQUk7QUFBQSxNQUNiLFlBQVksSUFBSTtBQUFBLE1BQ2hCLGFBQWEsSUFBSTtBQUFBLE1BQ2pCLGNBQWMsSUFBSTtBQUFBLE1BQ2xCLGVBQWUsSUFBSTtBQUFBLElBQ3JCO0FBQUEsSUFDQSxRQUFRO0FBQUEsTUFDTixLQUFLLElBQUk7QUFBQSxNQUNULFFBQVEsSUFBSTtBQUFBO0FBQUEsTUFFWixZQUFZLElBQUk7QUFBQTtBQUFBLE1BRWhCLGNBQWMsSUFBSTtBQUFBO0FBQUEsSUFFcEI7QUFBQSxJQUNBLGVBQWU7QUFBQSxNQUNiLEtBQUssSUFBSTtBQUFBLE1BQ1QsUUFBUSxJQUFJO0FBQUEsTUFDWixTQUFTLElBQUk7QUFBQSxNQUNiLFlBQVksSUFBSTtBQUFBLE1BQ2hCLGFBQWEsSUFBSTtBQUFBO0FBQUE7QUFBQSxJQUduQjtBQUFBLElBQ0EsYUFBYTtBQUFBLE1BQ1gsS0FBSyxJQUFJO0FBQUEsTUFDVCxRQUFRLElBQUk7QUFBQSxNQUNaLFNBQVMsSUFBSTtBQUFBLE1BQ2IsWUFBWSxJQUFJO0FBQUEsTUFDaEIsYUFBYSxJQUFJO0FBQUE7QUFBQTtBQUFBLElBR25CO0FBQUEsSUFDQSxXQUFXO0FBQUEsTUFDVCxLQUFLLElBQUk7QUFBQSxNQUNULFFBQVEsSUFBSTtBQUFBLE1BQ1osU0FBUyxJQUFJO0FBQUEsTUFDYixZQUFZLElBQUk7QUFBQSxJQUNsQjtBQUFBLElBQ0EsT0FBTztBQUFBLE1BQ0wsS0FBSyxJQUFJO0FBQUE7QUFBQSxNQUVULFFBQVEsSUFBSTtBQUFBLE1BQ1osU0FBUyxJQUFJO0FBQUEsTUFDYixZQUFZLElBQUk7QUFBQSxNQUNoQixhQUFhLElBQUk7QUFBQSxNQUNqQixjQUFjLElBQUk7QUFBQSxNQUNsQixlQUFlLElBQUk7QUFBQSxJQUNyQjtBQUFBLElBQ0EsZUFBZTtBQUFBLE1BQ2IsS0FBSyxJQUFJO0FBQUEsTUFDVCxRQUFRLElBQUksYUFBYSxJQUFJO0FBQUEsTUFDN0IsZUFBZSxJQUFJO0FBQUEsTUFDbkIsY0FBYyxJQUFJO0FBQUEsTUFDbEIsWUFBWSxJQUFJO0FBQUEsSUFDbEI7QUFBQSxJQUNBLFFBQVE7QUFBQSxNQUNOLEtBQUssSUFBSTtBQUFBLE1BQ1QsUUFBUSxJQUFJO0FBQUEsTUFDWixTQUFTLElBQUk7QUFBQSxNQUNiLFlBQVksSUFBSTtBQUFBLE1BQ2hCLGFBQWEsSUFBSTtBQUFBLE1BQ2pCLGNBQWMsSUFBSTtBQUFBLE1BQ2xCLGVBQWUsSUFBSTtBQUFBLElBQ3JCO0FBQUEsSUFDQSxhQUFhO0FBQUEsTUFDWCxLQUFLLElBQUk7QUFBQSxNQUNULFFBQVEsSUFBSTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQU1kO0FBQUEsSUFDQSxTQUFTO0FBQUEsTUFDUCxLQUFLLElBQUk7QUFBQSxNQUNULFFBQVEsSUFBSTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQU1kO0FBQUE7QUFBQSxJQUVBLFdBQVc7QUFBQSxNQUNULEtBQUssSUFBSTtBQUFBLE1BQ1QsUUFBUSxJQUFJO0FBQUE7QUFBQTtBQUFBO0FBQUEsTUFJWixjQUFjLElBQUk7QUFBQTtBQUFBLElBRXBCO0FBQUEsSUFDQSxXQUFXO0FBQUEsTUFDVCxLQUFLLElBQUk7QUFBQSxNQUNULFFBQVEsSUFBSTtBQUFBLE1BQ1osU0FBUyxJQUFJO0FBQUEsTUFDYixZQUFZLElBQUk7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUlsQjtBQUFBLElBQ0EsTUFBTTtBQUFBLElBQ04sVUFBVTtBQUFBLElBQ1YsZ0JBQWdCO0FBQUEsTUFDZCxLQUFLLElBQUk7QUFBQSxNQUNULFFBQVEsSUFBSTtBQUFBLE1BQ1osU0FBUyxJQUFJO0FBQUEsTUFDYixZQUFZLElBQUk7QUFBQSxJQUNsQjtBQUFBLElBQ0EsUUFBUTtBQUFBLE1BQ04sS0FBSyxJQUFJLDJCQUEyQixJQUFJO0FBQUE7QUFBQSxNQUV4QyxRQUFRLElBQUksOEJBQThCLElBQUk7QUFBQTtBQUFBO0FBQUEsTUFHOUMsU0FBUyxJQUFJO0FBQUE7QUFBQTtBQUFBLElBR2Y7QUFBQSxJQUNBLFNBQVM7QUFBQSxJQUNULFNBQVM7QUFBQSxNQUNQLEtBQUssSUFBSTtBQUFBLE1BQ1QsUUFBUSxJQUFJO0FBQUEsTUFDWixjQUFjLElBQUk7QUFBQSxJQUNwQjtBQUFBLElBQ0EsU0FBUztBQUFBLE1BQ1AsS0FBSyxJQUFJO0FBQUEsTUFDVCxRQUFRLElBQUk7QUFBQSxNQUNaLFNBQVMsSUFBSTtBQUFBLElBQ2Y7QUFBQSxFQUNGO0FBQ0Y7QUF3QkEsSUFBTSxPQUFPLENBQUMsT0FBNEQ7QUFDeEUsUUFBTSxlQUFlLGNBQWM7QUFDbkMsTUFBSSxDQUFDO0FBQWMsV0FBTyxDQUFDO0FBRTNCLFNBQU8sZUFBQUEsUUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLElBQUksWUFBWSxFQUFFLE1BQU07QUFDL0M7QUFRQSxTQUFTLHNCQUFzQixZQUEyQjtBQUN4RCxNQUFJLGNBQWMsNkJBQTZCLEVBQUUsU0FBUyxVQUFVO0FBQ2xFLFdBQU87QUFFVCxRQUFNLElBQUk7QUFBQSxJQUNSO0FBQUEsRUFDRjtBQUNGO0FBUU8sU0FBUywrQkFBK0I7QUFDN0MsU0FBTyxlQUFBQyxRQUFFLE1BQU0sa0JBQWtCLENBQUMsRUFBRSxPQUFPLGVBQUFBLFFBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNO0FBQ3BFO0FBSU8sU0FBUyxnQkFBNEI7QUFDMUMsU0FBTyxvQkFBb0IsS0FBSztBQUNsQztBQU1PLFNBQVMsY0FBYztBQUM1QixTQUFPLEtBQUssaUJBQWlCO0FBQy9CO0FBRU8sU0FBUyxrQkFBa0I7QUFDaEMsU0FBTyxLQUFLLHFCQUFxQjtBQUNuQztBQUVPLFNBQVMsTUFBTSxXQUFvQjtBQUN4QyxRQUFNLFNBQVMsWUFBWTtBQUMzQixRQUFNLFdBQVcsY0FBYztBQUMvQixNQUFJLENBQUM7QUFBVywwQkFBc0IsUUFBUTtBQUU5QyxFQUFBQyxPQUFNLDRCQUE0QixRQUFRO0FBQzFDLEVBQUFBLE9BQU0sMEJBQTBCLE1BQU07QUFDdEMsU0FBTztBQUFBLElBQ0w7QUFBQSxJQUNBO0FBQUEsRUFDRjtBQUNGO0FBRU8sU0FBUyxrQkFBa0IsY0FBOEI7QUFDOUQsRUFBQUEsT0FBTSwwQkFBMEI7QUFDaEMsRUFBQUEsT0FBTSxZQUFZO0FBRWxCLFFBQU0sa0JBQWtCLGdCQUFnQjtBQUV4QyxFQUFBQSxPQUFNLHVEQUF1RCxlQUFlO0FBTTVFLFFBQU0sV0FBVyxlQUFBRCxRQUFFO0FBQUEsSUFDakI7QUFBQSxJQUNBLENBQ0UsTUFDQSxPQUNBLFFBQ0c7QUFDSCxhQUFRLEtBQUssR0FBRyxJQUFJLGVBQUFBLFFBQUUsVUFBVSxTQUFTLGdCQUFnQixHQUFHLEdBQUcsSUFBSTtBQUFBLElBQ3JFO0FBQUEsRUFDRjtBQUVBLEVBQUFDLE9BQU0sc0RBQXNEO0FBQzVELEVBQUFBLE9BQU0sUUFBUTtBQUVkLFNBQU87QUFDVDs7O0FDcnRCQTs7O0FDQUE7QUFBQSxJQUFBQyxnQkFBa0I7QUFDbEIsSUFBQUMsZUFBaUI7OztBQ0RqQjtBQUFBLGlCQUEyQjtBQUUzQixJQUFBQyxnQkFBa0I7QUFDbEIsbUJBQWtDO0FBQ2xDLGdCQUFlO0FBQ2Y7OztBQ0xBO0FBQUEseUJBQXFCO0FBRWQsSUFBTSxpQkFBaUIsWUFBWTtBQUN4QyxRQUFNLEVBQUUsTUFBQUMsTUFBSyxJQUFJLFVBQU0seUJBQUs7QUFDNUIsU0FBT0E7QUFDVDs7O0FERUE7QUFDQTs7O0FFUkE7QUFJQSxJQUFBQyxnQkFBa0I7QUFDbEIsSUFBQUMsaUJBQWM7QUFDZCxvQkFBK0I7QUFDL0IsSUFBTUMsYUFBUSxjQUFBQyxTQUFNLGVBQWU7QUFHbkMsSUFBTSxtQkFBZSw4QkFBZSw4QkFBOEIsRUFBRTtBQUU3RCxTQUFTLGlCQUFpQjtBQUFBLEVBQy9CO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDRixHQUlHO0FBQ0QsU0FBTyxlQUFBQyxRQUFFLE1BQU0sb0JBQW9CLE1BQU0sQ0FBQyxFQUN2QyxLQUFLLENBQUMsVUFBVTtBQUFBLElBQ2YsR0FBRztBQUFBO0FBQUEsSUFFSCxLQUFLO0FBQUEsTUFDSCxHQUFJLEtBQUssT0FBTyxDQUFDO0FBQUEsTUFDakIsb0JBQW9CO0FBQUEsTUFDcEIsZUFBZTtBQUFBLE1BQ2Ysd0JBQXdCLFFBQVEsSUFBSSxPQUFPLFNBQVMsV0FBVyxJQUMzRCxPQUNBO0FBQUEsSUFDTjtBQUFBLEVBQ0YsRUFBRSxFQUNELElBQUksQ0FBQyxTQUFTO0FBQ2IsSUFBQUYsT0FBTSxnQ0FBZ0MsSUFBSTtBQUFBLEVBQzVDLENBQUMsRUFDQSxLQUFLLGdCQUFnQixFQUNyQixJQUFJLENBQUMsU0FBUztBQUNiLElBQUFBLE9BQU0sMkNBQTJDLElBQUk7QUFBQSxFQUN2RCxDQUFDLEVBQ0EsT0FBTyxPQUFPLEVBQ2QsS0FBSyxDQUFDLFNBQVM7QUFDZCxXQUFPO0FBQUEsTUFDTCxHQUFHO0FBQUEsTUFDSDtBQUFBLE1BQ0EsYUFBYTtBQUFBLE1BQ2IsT0FBTyxnQkFBZ0IsY0FBYyxnQkFBZ0I7QUFBQSxJQUN2RDtBQUFBLEVBQ0YsQ0FBQyxFQUNBLE1BQU07QUFDWDtBQVdBLFNBQVMsb0JBQ1AsUUFDaUM7QUFDakMsUUFBTSxTQUFTLDBCQUEwQixNQUFNO0FBQy9DLFFBQU0sY0FDSixPQUFPLGdCQUFnQixjQUNuQjtBQUFBLElBQ0UsV0FBVztBQUFBLEVBQ2IsSUFDQSxDQUFDO0FBQ1AsU0FBTztBQUFBLElBQ0wsR0FBRyxlQUFBRSxRQUFFLEtBQUssUUFBUSxhQUFhO0FBQUEsSUFDL0IsR0FBRztBQUFBLEVBQ0w7QUFDRjtBQUVBLFNBQVMsaUJBQWlCLFNBQTRDO0FBQ3BFLFNBQU8sT0FBTyxRQUFRLE9BQU8sRUFDMUIsUUFBUSxDQUFDLENBQUMsS0FBSyxLQUFLLE1BQU07QUFDekIsVUFBTSxPQUFPLE9BQU8sR0FBRztBQUN2QixRQUFJLE9BQU8sVUFBVSxXQUFXO0FBQzlCLGFBQU8sVUFBVSxPQUFPLENBQUMsS0FBSyxNQUFNLElBQUksQ0FBQztBQUFBLElBQzNDO0FBRUEsUUFBSSxlQUFBQSxRQUFFLFNBQVMsS0FBSyxHQUFHO0FBQ3JCLGFBQU8sQ0FBQyxLQUFLLFFBQVEsc0JBQXNCLEtBQUssQ0FBQztBQUFBLElBQ25EO0FBR0EsV0FBTyxDQUFDLEtBQUssUUFBUSxNQUFNLFNBQVMsQ0FBQztBQUFBLEVBQ3ZDLENBQUMsRUFDQSxPQUFPLE9BQU87QUFDbkI7QUFFQSxTQUFTLHNCQUFzQixPQUFXO0FBQ3hDLFNBQU8sS0FBSyxVQUFVLEtBQUs7QUFDN0I7QUFFQSxJQUFNLFNBQVMsQ0FBQyxNQUFjLEVBQUUsUUFBUSxVQUFVLENBQUMsTUFBTSxNQUFNLEVBQUUsWUFBWSxDQUFDOzs7QUZ6RjlFLElBQU1DLGFBQVEsY0FBQUMsU0FBTSxlQUFlO0FBRTVCLElBQU0sY0FBYyxPQUN6QixNQUNBLFdBQ0c7QUFDSCxFQUFBRCxPQUFNLG9CQUFvQjtBQUMxQixRQUFNLGVBQWUsTUFBTSxlQUFlO0FBRTFDLFFBQU0sYUFBYSxVQUFNLHVCQUFXRSxTQUFRLFFBQVEsU0FBUyxDQUFDO0FBQzlELEVBQUFGLE9BQU0sbUNBQW1DLFVBQVU7QUFHbkQsUUFBTSxPQUFPLGlCQUFpQixFQUFFLE1BQU0sY0FBYyxPQUFPLENBQUM7QUFDNUQsRUFBQUEsT0FBTSxpQ0FBaUMsSUFBSTtBQUMzQyxRQUFNLEVBQUUsUUFBQUcsU0FBUSxPQUFPLElBQUksTUFBTSxZQUFZLFlBQVksSUFBSTtBQUU3RCxNQUFJLENBQUMsVUFBQUMsUUFBRyxXQUFXLFlBQVksR0FBRztBQUNoQyxVQUFNLElBQUk7QUFBQSxNQUNSLDZDQUE2QztBQUFBLElBQy9DO0FBQUEsRUFDRjtBQUNBLE1BQUk7QUFDRixVQUFNLElBQUksVUFBQUEsUUFBRyxhQUFhLGNBQWMsT0FBTztBQUMvQyxRQUFJLENBQUMsR0FBRztBQUNOLFlBQU0sSUFBSSxNQUFNLG9DQUFvQztBQUFBLElBQ3REO0FBQ0EsSUFBQUosT0FBTSw2QkFBNkIsY0FBYyxDQUFDO0FBQ2xELFdBQU8sS0FBSyxNQUFNLENBQUM7QUFBQSxFQUNyQixTQUFTLEtBQVA7QUFDQSxJQUFBQSxPQUFNLG9DQUFvQyxHQUFHO0FBQzdDLFNBQUssS0FBSyxtQkFBbUIsR0FBR0csT0FBTTtBQUN0QyxTQUFLLEtBQUssbUJBQW1CLEdBQUcsTUFBTTtBQUV0QyxVQUFNLElBQUksZ0JBQWdCO0FBQUE7QUFBQTtBQUFBLENBRzdCO0FBQUEsRUFDQztBQUNGO0FBRUEsZUFBZSxZQUFZLFlBQW9CLE1BQXlCO0FBQ3RFLE1BQUlBLFVBQVM7QUFDYixNQUFJLFNBQVM7QUFDYixNQUFJO0FBQ0YsY0FBTSxhQUFBRSxTQUFNLFlBQVksQ0FBQyxPQUFPLEdBQUcsSUFBSSxHQUFHO0FBQUEsTUFDeEMsT0FBTztBQUFBLE1BQ1AsS0FBSztBQUFBLFFBQ0gsR0FBRyxRQUFRO0FBQUE7QUFBQSxRQUVYLG9CQUFvQjtBQUFBLFFBQ3BCLG9CQUFvQjtBQUFBLE1BQ3RCO0FBQUEsSUFDRixDQUFDO0FBQUEsRUFDSCxTQUFTLEtBQVA7QUFDQSxJQUFBTCxPQUFNLDJEQUEyRCxHQUFHO0FBQ3BFLElBQUFHLFVBQVUsSUFBbUI7QUFDN0IsYUFBVSxJQUFtQjtBQUFBLEVBQy9CO0FBQ0EsU0FBTyxFQUFFLFFBQUFBLFNBQVEsT0FBTztBQUMxQjs7O0FEbkVBO0FBQ0E7OztBSUxBO0FBQUEsa0JBQWlCO0FBRVYsU0FBUyxRQUFRLEtBQXlCO0FBQy9DLFNBQU8sTUFBTyxPQUFPLFFBQVEsV0FBVyxDQUFDLEdBQUcsSUFBSSxNQUFPLENBQUM7QUFDMUQ7QUFFTyxTQUFTLFFBQVFHLE9BQWMsTUFBYyxZQUFBQyxRQUFLLEtBQUs7QUFDNUQsU0FBT0QsTUFBSyxNQUFNLEdBQUcsRUFBRSxLQUFLLFlBQUFDLFFBQUssTUFBTSxHQUFHO0FBQzVDO0FBRU8sSUFBTSxnQkFBZ0IsTUFBTTtBQUNqQyxRQUFNLE1BQU07QUFDWixRQUFNLE1BQU07QUFDWixTQUFPLEtBQUssTUFBTSxLQUFLLE9BQU8sS0FBSyxNQUFNLE1BQU0sRUFBRSxJQUFJO0FBQ3ZEOzs7QUpOQSxJQUFNQyxhQUFRLGNBQUFDLFNBQU0saUJBQWlCO0FBZ0JyQyxJQUFJLFVBQWlDO0FBQzlCLFNBQVMsb0JBQW9DO0FBQ2xELE1BQUksU0FBUztBQUNYLFdBQU87QUFBQSxFQUNUO0FBRUEsUUFBTSxpQkFBaUIsa0JBQWtCO0FBQ3pDLEVBQUFELE9BQU0sMENBQTBDLGNBQWM7QUFFOUQsUUFBTSxnQkFBZ0M7QUFBQSxJQUNwQyxLQUFLO0FBQUEsTUFDSCxXQUFXO0FBQUEsSUFDYjtBQUFBLElBQ0EsV0FBVztBQUFBLE1BQ1QsV0FBVztBQUFBLElBQ2I7QUFBQSxJQUNBLGlCQUFpQjtBQUFBLEVBQ25CO0FBRUEsTUFBSTtBQUNGLFVBQU0sV0FBV0UsU0FBUSxjQUFjO0FBQ3ZDLGNBQVU7QUFBQSxNQUNSLEdBQUc7QUFBQSxNQUNILEdBQUc7QUFBQSxJQUNMO0FBQ0EsV0FBTztBQUFBLEVBQ1QsU0FBUyxHQUFQO0FBQ0EsU0FBSyxrQ0FBa0MsY0FBYztBQUNyRCxJQUFBRixPQUFNLHVCQUF1QixDQUFDO0FBQzlCLGNBQVU7QUFDVixXQUFPO0FBQUEsRUFDVDtBQUNGO0FBR0EsZUFBc0IsZ0JBQWdCLFFBQXFDO0FBQ3pFLEVBQUFBLE9BQU0sMkJBQTJCO0FBQ2pDLFFBQU0sd0JBTVUsTUFBTSxZQUFZLGNBQWMsR0FBRyxNQUFNO0FBRXpELEVBQUFBLE9BQU0sOEJBQThCLHFCQUFxQjtBQUd6RCxRQUFNLGdCQUFnQixzQkFBc0IsU0FBUyxLQUFLO0FBQzFELE1BQUksMEJBQW9DLENBQUM7QUFDekMsTUFBSSxPQUFPLGdCQUFnQixlQUFlLGVBQWU7QUFFdkQsOEJBQTBCO0FBQUEsRUFDNUI7QUFFQSxRQUFNLFNBQVM7QUFBQSxJQUNiLGFBQWEsdUJBQXVCLGVBQWUsUUFBUSxJQUFJO0FBQUEsSUFDL0QsV0FBVyxPQUFPO0FBQUEsSUFDbEIsYUFBYSx1QkFBdUIsZUFBZTtBQUFBLElBQ25EO0FBQUE7QUFBQSxNQUVFLHVCQUF1QixTQUFTLG1CQUFtQixTQUFTLENBQUM7QUFBQTtBQUFBLElBQy9EO0FBQUEsSUFDQSxVQUFVO0FBQUEsRUFDWjtBQUNBLEVBQUFBLE9BQU0scUJBQXFCLE1BQU07QUFDakMsU0FBTztBQUlUO0FBRUEsU0FBUyxrQkFBa0IsbUJBQW1CLE1BQU07QUFDbEQsU0FBTyxhQUFBRyxRQUFLLFFBQVEsb0JBQW9CLFFBQVEsSUFBSSxHQUFHLG9CQUFvQjtBQUM3RTs7O0FLbEdBO0FBS0EsSUFBQUMsZ0JBQWtCO0FBQ2xCLElBQUFDLGlCQUFjO0FBQ2Q7QUFDQTtBQUVBLElBQU1DLGFBQVEsY0FBQUMsU0FBTSx5QkFBeUI7QUFNdEMsU0FBUyxzQkFDZCxRQUN1QjtBQUN2QixRQUFNLGlCQUFpQixrQkFBa0I7QUFFekMsUUFBTSxrQkFDSixPQUFPLG1CQUNQLFFBQVEsSUFBSSxvQkFDWixlQUFlO0FBRWpCLFFBQU0sWUFDSixPQUFPLGFBQ1AsUUFBUSxJQUFJLHVCQUNaLGVBQWU7QUFFakIsUUFBTSxZQUNKLE9BQU8sYUFDUCxRQUFRLElBQUksdUJBQ1osZUFBZTtBQUVqQixRQUFNLGNBQWMsT0FBTyxlQUFlO0FBRTFDLFFBQU0sWUFDSixnQkFBZ0IsUUFDWixlQUFlLElBQUksWUFDbkIsZUFBZSxVQUFVO0FBRy9CLFNBQU87QUFBQSxJQUNMLEdBQUc7QUFBQSxJQUNIO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLEVBQ0Y7QUFDRjtBQUVPLElBQU0saUJBQWlCO0FBQUE7QUFBQTtBQUFBO0FBS3ZCLElBQU0sdUJBQXVCO0FBQUE7QUFBQTtBQUFBO0FBSzdCLElBQU0sOEJBQThCO0FBRXBDLElBQU0saUJBQWlCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFNdkIsU0FBUyxlQUNkLFNBQzZCO0FBQzdCLFFBQU0sU0FBUyxzQkFBc0IsT0FBTztBQUM1QyxNQUFJLENBQUMsT0FBTyxpQkFBaUI7QUFDM0IsVUFBTSxJQUFJLGdCQUFnQixvQkFBb0I7QUFBQSxFQUNoRDtBQUNBLE1BQUksQ0FBQyxPQUFPLFdBQVc7QUFDckIsVUFBTSxJQUFJLGdCQUFnQixjQUFjO0FBQUEsRUFDMUM7QUFDQSxNQUFJLENBQUMsT0FBTyxXQUFXO0FBQ3JCLFVBQU0sSUFBSSxnQkFBZ0IsY0FBYztBQUFBLEVBQzFDO0FBR0EsTUFBSTtBQUNGLFFBQUksSUFBSSxPQUFPLGVBQWU7QUFBQSxFQUNoQyxTQUFTLEtBQVA7QUFDQSxVQUFNLElBQUk7QUFBQSxNQUNSLEdBQUcsaUNBQWlDLE9BQU87QUFBQSxJQUM3QztBQUFBLEVBQ0Y7QUFFQSxRQUFNLHFCQUF5RDtBQUFBLElBQzdEO0FBQUEsSUFDQTtBQUFBLEVBQ0Y7QUFDQSxxQkFBbUIsUUFBUSxDQUFDLFFBQVE7QUFDbEMsUUFBSSxPQUFPLE9BQU8sR0FBRyxNQUFNLGFBQWE7QUFDdEM7QUFBQSxRQUNFO0FBQUEsUUFDQTtBQUFBLFFBQ0EsbUJBQW1CLEtBQUssSUFBSTtBQUFBLE1BQzlCO0FBQ0EsWUFBTSxJQUFJLE1BQU0sNEJBQTRCO0FBQUEsSUFDOUM7QUFBQSxFQUNGLENBQUM7QUFDRCxFQUFBQyxPQUFNLG9DQUFvQyxNQUFNO0FBQ2hELFNBQU87QUFDVDtBQU1PLFNBQVMsMEJBQ2QsUUFDaUM7QUFDakMsU0FBTyxlQUFBQyxRQUFFO0FBQUEsSUFDUCxlQUFBQSxRQUFFLEtBQUssUUFBUTtBQUFBLE1BQ2I7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsSUFDRixDQUFDO0FBQUEsSUFDRDtBQUFBLEVBQ0Y7QUFDRjs7O0FDM0lBO0FBQ0EseUJBQWdCO0FBR1QsSUFBTSxhQUFhLE9BQU8sZ0JBQXdCO0FBQ3ZELFFBQU0sYUFBYSxNQUFNLG1CQUFBQyxRQUFJLFdBQVcsV0FBVztBQUNuRCxTQUFPLGtCQUFrQjtBQUFBLElBQ3ZCLFFBQVEsV0FBVztBQUFBLElBQ25CLGNBQWMsV0FBVztBQUFBLElBQ3pCLGFBQWEsV0FBVztBQUFBLElBQ3hCLFlBQVksV0FBVztBQUFBLElBQ3ZCLFNBQVMsV0FBVztBQUFBLElBQ3BCLEtBQUssV0FBVztBQUFBLEVBQ2xCLENBQUM7QUFDSDs7O0FoQlBBQztBQUNBOzs7QWlCUkE7OztBQ0FBO0FBQUEsSUFBQUMsZ0JBQWtCO0FBRWxCO0FBRUEsSUFBTUMsYUFBUSxjQUFBQyxTQUFNLGtCQUFrQjtBQUUvQixTQUFTLGFBQ2QsU0FDQSxvQkFBdUMsQ0FBQyxHQUNVO0FBQ2xELEVBQUFEO0FBQUEsSUFDRTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsRUFDRjtBQUVBLE1BQUksU0FBUyxrQkFBa0IsS0FBSyxDQUFDLE1BQU0sRUFBRSxTQUFTLE9BQU87QUFFN0QsTUFBSSxRQUFRO0FBQ1YsSUFBQUEsT0FBTSxrQ0FBa0MsTUFBTTtBQUM5QyxXQUFPO0FBQUEsTUFDTCxhQUFhLE9BQU87QUFBQSxNQUNwQixnQkFBZ0IsT0FBTztBQUFBLElBQ3pCO0FBQUEsRUFDRjtBQUdBLFdBQVMsa0JBQWtCLEtBQUssQ0FBQyxNQUFNLEVBQUUsU0FBUyxPQUFPO0FBQ3pELE1BQUksUUFBUTtBQUNWLElBQUFBLE9BQU0sa0NBQWtDLE1BQU07QUFDOUMsV0FBTztBQUFBLE1BQ0wsYUFBYSxPQUFPLGVBQWUsT0FBTztBQUFBLE1BQzFDLGdCQUFnQixPQUFPO0FBQUEsSUFDekI7QUFBQSxFQUNGO0FBRUEsT0FBSyw2Q0FBNkM7QUFHbEQsU0FBTztBQUFBLElBQ0wsYUFBYTtBQUFBLElBQ2IsZ0JBQWdCO0FBQUEsRUFDbEI7QUFDRjs7O0FDM0NBO0FBQUEsSUFBQUUsZ0JBQWtCO0FBQ2xCLG1CQUFrQjtBQUNsQixnQkFBMkQ7QUFDM0QsSUFBQUMsZUFBMEI7QUFDMUIsSUFBTUMsYUFBUSxjQUFBQyxTQUFNLG1CQUFtQjtBQUV2QyxJQUFNLGVBQWUsWUFBWTtBQUMvQixVQUFJLG9CQUFTLE1BQU0sU0FBUztBQUMxQixRQUFJO0FBQ0YsWUFBTSxVQUFVLFVBQU0sd0JBQVUsYUFBQUMsT0FBSyxFQUFFO0FBQ3ZDLFVBQUksVUFBVSxXQUFXLGFBQWEsU0FBUztBQUM3QyxlQUFPLENBQUMsUUFBUSxNQUFNLFFBQVEsT0FBTyxFQUFFLEtBQUssS0FBSztBQUFBLE1BQ25ELE9BQU87QUFDTCxtQkFBTyxtQkFBUTtBQUFBLE1BQ2pCO0FBQUEsSUFDRixRQUFFO0FBQ0EsaUJBQU8sbUJBQVE7QUFBQSxJQUNqQjtBQUFBLEVBQ0Y7QUFDQSxhQUFPLG1CQUFRO0FBQ2pCO0FBRU8sSUFBTSxrQkFBa0IsWUFBWTtBQUN6QyxRQUFNLFlBQVksTUFBTSxhQUFhO0FBQ3JDLFFBQU0sU0FBUztBQUFBLElBQ2IsWUFBUSxvQkFBUztBQUFBLElBQ2pCO0FBQUEsSUFDQSxZQUFRLGdCQUFLO0FBQUEsSUFDYixVQUFVO0FBQUEsTUFDUixVQUFNLG1CQUFRO0FBQUEsTUFDZCxXQUFPLG9CQUFTO0FBQUEsSUFDbEI7QUFBQSxFQUNGO0FBQ0EsRUFBQUYsT0FBTSxxQkFBcUIsTUFBTTtBQUNqQyxTQUFPO0FBQ1Q7OztBRi9CQSxlQUFzQixZQUFZO0FBQUEsRUFDaEM7QUFBQSxFQUNBO0FBQ0YsR0FHRztBQUNELFNBQU87QUFBQSxJQUNMLEdBQUksTUFBTSxnQkFBZ0I7QUFBQSxJQUMxQixHQUFHLGFBQWEsV0FBVyxZQUFZLE9BQU8sVUFBVSxRQUFRO0FBQUEsRUFDbEU7QUFDRjs7O0FHZkE7OztBQ0FBO0FBQ0EsSUFBQUcsaUJBQWtCO0FBQ2xCLElBQUFDLGlCQUFjO0FBQ2QsSUFBQUMsaUJBQXVCO0FBUXZCLElBQU1DLGNBQVEsZUFBQUMsU0FBTSxrQkFBa0I7QUFFL0IsSUFBTSxrQkFBa0IsQ0FDN0IsV0FDa0Q7QUFDbEQsU0FBTyxPQUFPLFdBQVc7QUFDM0I7QUFFTyxJQUFNLHdCQUF3QixDQUNuQyxRQUF5QyxDQUFDLE1BQ2pCO0FBQ3pCLFNBQU8sTUFBTTtBQUFBLElBQVEsQ0FBQyxNQUFNLE1BQzFCLEtBQUssU0FBUztBQUFBLE1BQVEsQ0FBQyxHQUFHLE9BQ3hCLEVBQUUsWUFBWSxRQUFRLENBQUMsT0FBTztBQUFBLFFBQzVCLEdBQUc7QUFBQSxRQUNILFFBQVEsSUFBSTtBQUFBLFFBQ1osa0JBQWtCO0FBQUEsUUFDbEIsa0JBQWMsdUJBQU87QUFBQSxNQUN2QixFQUFFO0FBQUEsSUFDSjtBQUFBLEVBQ0Y7QUFDRjtBQUVPLElBQU0sV0FBVyxDQUFDLFVBQWlEO0FBQ3hFLFNBQU87QUFBQSxJQUNMLEdBQUc7QUFBQSxJQUNILG1CQUFtQixNQUFNO0FBQUEsSUFDekIsb0JBQW9CLE1BQU07QUFBQSxJQUMxQixrQkFBa0IsTUFBTTtBQUFBLEVBQzFCO0FBQ0Y7QUFFTyxJQUFNLGlCQUFpQixDQUFDLFlBQThDO0FBQzNFLFNBQU87QUFBQSxJQUNMLEdBQUc7QUFBQSxJQUNILE9BQU8sUUFBUTtBQUFBLElBQ2YsbUJBQW1CLFFBQVE7QUFBQSxJQUMzQixvQkFBb0IsUUFBUTtBQUFBLEVBQzlCO0FBQ0Y7QUFFTyxJQUFNLDJCQUEyQixDQUN0QyxjQUNpQztBQUNqQyxRQUFNLFdBQVcsQ0FBQztBQUNsQixNQUFJLFVBQVUsU0FBUyxDQUFDLFVBQVUsT0FBTyxRQUFRO0FBQy9DLGFBQVMsS0FBSyx5QkFBeUIsVUFBVSxPQUFPLFVBQVUsS0FBSyxDQUFDO0FBQUEsRUFDMUU7QUFDQSxTQUFPO0FBQUEsSUFDTCxPQUFPLFNBQVMsVUFBVSxLQUFLO0FBQUEsSUFDL0IsZUFBZSxVQUFVO0FBQUEsSUFDekIsV0FBVyxVQUFVLFNBQVM7QUFBQSxJQUM5QixPQUFPLENBQUMsQ0FBQyxVQUFVO0FBQUE7QUFBQSxJQUNuQixhQUFhLHNCQUFzQixVQUFVLFNBQVMsQ0FBQyxDQUFDO0FBQUEsSUFDeEQsT0FDRSxVQUFVLE9BQU8sSUFBSSxDQUFDLE1BQU0sT0FBTztBQUFBLE1BQ2pDLGNBQWMsS0FBSztBQUFBLE1BQ25CLE9BQU8sS0FBSztBQUFBLE1BQ1osT0FBTyxVQUFVO0FBQUEsTUFDakIsVUFBVSxLQUFLLFVBQVUsSUFBSSxjQUFjLEtBQUssQ0FBQztBQUFBLE1BQ2pELFVBQVUsSUFBSTtBQUFBLElBQ2hCLEVBQUUsS0FBSztBQUFBLEVBQ1g7QUFDRjtBQUVBLFNBQVMseUJBQ1BDLFFBQ0EsT0FDQTtBQUNBLFNBQU87QUFBQSxJQUNMLE9BQU8sQ0FBQyxTQUFTO0FBQUEsSUFDakIsTUFBTTtBQUFBLElBQ04sY0FBY0EsT0FBTSxNQUFNLElBQUksRUFBRSxDQUFDO0FBQUEsSUFDakMsT0FBTztBQUFBLElBQ1AsT0FBTyxDQUFDO0FBQUEsSUFDUixVQUFVO0FBQUEsTUFDUixlQUFlO0FBQUEsUUFDYixPQUFPO0FBQUEsUUFDUCxVQUFVO0FBQUEsUUFDVixPQUFPO0FBQUEsVUFDTCxNQUFNO0FBQUEsVUFDTixTQUFTQSxPQUFNLE1BQU0sSUFBSSxFQUFFLENBQUM7QUFBQSxVQUM1QixPQUFPQTtBQUFBLFFBQ1Q7QUFBQSxRQUNBLGFBQWEsQ0FBQztBQUFBLFFBQ2QsV0FBVyxNQUFNO0FBQUEsUUFDakIsZ0JBQWdCO0FBQUEsTUFDbEIsQ0FBQztBQUFBLElBQ0g7QUFBQSxJQUNBLFVBQVU7QUFBQSxFQUNaO0FBQ0Y7QUFFTyxJQUFNLDBCQUEwQixDQUNyQyxXQUNBLFdBQzRCO0FBQzVCLFFBQU0sV0FBVyxDQUFDO0FBQ2xCLE1BQUksVUFBVSxTQUFTLENBQUMsVUFBVSxPQUFPLFFBQVE7QUFDL0MsYUFBUyxLQUFLLHlCQUF5QixVQUFVLE9BQU8sVUFBVSxLQUFLLENBQUM7QUFBQSxFQUMxRTtBQUNBLFNBQU87QUFBQSxJQUNMO0FBQUEsSUFDQSxPQUNFLFVBQVUsT0FBTyxJQUFJLENBQUMsTUFBTSxPQUFPO0FBQUEsTUFDakMsT0FBTyxLQUFLO0FBQUEsTUFDWixRQUFRO0FBQUEsTUFDUixNQUFNLEtBQUs7QUFBQSxNQUNYLFVBQVUsSUFBSTtBQUFBLE1BQ2QsU0FBUyxDQUFDO0FBQUEsSUFDWixFQUFFLEtBQUs7QUFBQSxJQUNULE9BQU8sVUFBVTtBQUFBLEVBQ25CO0FBQ0Y7QUFFTyxJQUFNLHVCQUF1QixDQUNsQyxPQUNBLFdBQ3dDO0FBQ3hDLE1BQUksQ0FBQyxNQUFNLFFBQVE7QUFDakIsV0FBTyx1QkFBdUIsTUFBTTtBQUFBLEVBQ3RDO0FBRUEsUUFBTSxVQUFVLE1BQU07QUFBQSxJQUNwQixDQUNFLEtBQ0E7QUFBQSxNQUNFO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsSUFDRixPQUNJO0FBQUEsTUFDSixlQUFlLElBQUksZ0JBQWdCO0FBQUEsTUFDbkMsYUFBYSxJQUFJLGNBQWM7QUFBQSxNQUMvQixjQUFjLElBQUksZUFBZTtBQUFBLE1BQ2pDLGFBQWEsSUFBSSxjQUFjO0FBQUEsTUFDL0IsY0FBYyxJQUFJLGVBQWU7QUFBQSxNQUNqQyxhQUFhLElBQUksY0FBYztBQUFBLE1BQy9CLFlBQVksSUFBSSxhQUFhO0FBQUEsSUFDL0I7QUFBQSxJQUNBO0FBQUEsRUFDRjtBQUNBLFFBQU0sY0FBYyxNQUFNLENBQUM7QUFDM0IsUUFBTSxhQUFhLE1BQU0sSUFBSSxDQUFDLE1BQU0sRUFBRSxjQUFjLEVBQUUsS0FBSztBQUMzRCxRQUFNLFdBQVcsTUFBTSxJQUFJLENBQUMsTUFBTSxFQUFFLFlBQVksRUFBRSxLQUFLO0FBQ3ZELFFBQU0sT0FBTyxNQUFNLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUs7QUFDM0MsU0FBTztBQUFBLElBQ0wsR0FBRztBQUFBLElBQ0g7QUFBQSxJQUNBLGdCQUFnQixlQUFBQyxRQUFFLE1BQU0sVUFBVTtBQUFBLElBQ2xDLGNBQWMsZUFBQUEsUUFBRSxLQUFLLFFBQVE7QUFBQSxJQUM3QixHQUFHLGVBQUFBLFFBQUU7QUFBQSxNQUNIO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLElBQ0Y7QUFBQSxJQUNBLFFBQVE7QUFBQSxFQUNWO0FBQ0Y7QUFFTyxTQUFTLHVCQUNkLFFBQ3FDO0FBQ3JDLFNBQU87QUFBQSxJQUNMLEdBQUc7QUFBQSxJQUNILFFBQVE7QUFBQSxJQUNSLGlCQUFnQixvQkFBSSxLQUFLLEdBQUUsWUFBWTtBQUFBLElBQ3ZDLGVBQWMsb0JBQUksS0FBSyxHQUFFLFlBQVk7QUFBQSxJQUNyQyxNQUFNLENBQUM7QUFBQTtBQUFBLElBRVA7QUFBQSxFQUNGO0FBQ0Y7QUFDQSxJQUFNLGFBQWE7QUFBQSxFQUNqQixlQUFlO0FBQUEsRUFDZixhQUFhO0FBQUEsRUFDYixjQUFjO0FBQUEsRUFDZCxhQUFhO0FBQUEsRUFDYixjQUFjO0FBQUEsRUFDZCxhQUFhO0FBQUEsRUFDYixZQUFZO0FBQ2Q7QUFFTyxTQUFTLHFCQUFxQjtBQUFBLEVBQ25DO0FBQUEsRUFDQSxPQUFBRDtBQUFBLEVBQ0E7QUFDRixHQUl3QztBQUN0QyxRQUFNLFNBQVEsb0JBQUksS0FBSyxHQUFFLFlBQVk7QUFDckMsUUFBTSxPQUFNLG9CQUFJLEtBQUssR0FBRSxZQUFZO0FBQ25DLFNBQU87QUFBQSxJQUNMO0FBQUEsSUFDQSxRQUFRO0FBQUEsSUFDUixpQkFBZ0Isb0JBQUksS0FBSyxHQUFFLFlBQVk7QUFBQSxJQUN2QyxlQUFjLG9CQUFJLEtBQUssR0FBRSxZQUFZO0FBQUEsSUFDckMsZUFBZTtBQUFBLElBQ2YsYUFBYTtBQUFBLElBQ2IsYUFBYTtBQUFBLElBQ2IsYUFBYTtBQUFBLElBQ2IsY0FBYztBQUFBLElBQ2QsY0FBYztBQUFBLElBQ2QsWUFBWTtBQUFBLElBQ1osYUFBYTtBQUFBLElBQ2IsZ0JBQWdCO0FBQUEsSUFDaEIsYUFBYTtBQUFBLElBQ2IsUUFBUTtBQUFBLElBQ1IsV0FBVztBQUFBLElBQ1gsZ0JBQWdCO0FBQUEsSUFDaEIsTUFBTSxNQUFNLElBQUksQ0FBQyxPQUFPO0FBQUEsTUFDdEIsT0FBTztBQUFBLFFBQ0wsUUFBUTtBQUFBLFFBQ1IsT0FBTztBQUFBLFFBQ1AsUUFBUTtBQUFBLFFBQ1IsU0FBUztBQUFBLFFBQ1QsU0FBUztBQUFBLFFBQ1QsVUFBVTtBQUFBLFFBQ1YsV0FBVztBQUFBLFFBQ1gsU0FBUztBQUFBLFFBQ1QsVUFBVTtBQUFBLE1BQ1o7QUFBQSxNQUNBLFVBQVU7QUFBQSxNQUNWLGVBQWUsQ0FBQztBQUFBLE1BQ2hCLE9BQU8sQ0FBQztBQUFBLE1BQ1IsT0FBQUE7QUFBQSxNQUNBLE9BQU87QUFBQSxNQUNQLE1BQU07QUFBQSxRQUNKLE1BQU07QUFBQSxRQUNOLFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLHNCQUFzQjtBQUFBLE1BQ3hCO0FBQUEsTUFDQSxPQUFPO0FBQUEsUUFDTDtBQUFBLFVBQ0UsT0FBTyxDQUFDLFNBQVM7QUFBQSxVQUNqQixPQUFPO0FBQUEsVUFDUCxNQUFNO0FBQUEsVUFDTixjQUFjQTtBQUFBLFVBQ2QsVUFBVTtBQUFBLFlBQ1I7QUFBQSxjQUNFLE9BQU87QUFBQSxjQUNQLFdBQVc7QUFBQSxjQUNYLFVBQVU7QUFBQSxjQUNWLGdCQUFnQjtBQUFBLGNBQ2hCLGFBQWEsQ0FBQztBQUFBLGNBQ2QsT0FBTztBQUFBLGdCQUNMLE1BQU07QUFBQSxnQkFDTixTQUFTQTtBQUFBLGdCQUNULE9BQU87QUFBQSxjQUNUO0FBQUEsWUFDRjtBQUFBLFVBQ0Y7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUFBLE1BQ0EsbUJBQW1CO0FBQUEsTUFDbkIsYUFBYTtBQUFBLElBQ2YsRUFBRTtBQUFBLEVBQ0o7QUFDRjtBQUVPLFNBQVMsbUJBQ2QsV0FDQSxPQUNBLFFBQ3FDO0FBQ3JDLE1BQUksQ0FBQyxnQkFBZ0IsU0FBUyxHQUFHO0FBQy9CLFdBQU8scUJBQXFCO0FBQUEsTUFDMUI7QUFBQSxNQUNBLE9BQU8sVUFBVTtBQUFBLE1BQ2pCO0FBQUEsSUFDRixDQUFDO0FBQUEsRUFDSDtBQUNBLFNBQU87QUFDVDtBQUVPLFNBQVMsa0JBQ2QsTUFDQSxXQUNBO0FBQ0EsUUFBTUUsT0FBTSxVQUFVLEtBQUssS0FBSyxDQUFDLE1BQU0sRUFBRSxLQUFLLGFBQWEsSUFBSTtBQUMvRCxNQUFJLENBQUNBLE1BQUs7QUFDUjtBQUFBLEVBQ0Y7QUFDQSxRQUFNLFFBQVEsU0FBU0EsS0FBSSxLQUFLO0FBRWhDLFNBQU87QUFBQSxJQUNMLEdBQUc7QUFBQSxJQUNILE1BQU0sQ0FBQ0EsSUFBRztBQUFBLElBQ1YsYUFBYTtBQUFBLElBQ2IsZUFBZSxNQUFNO0FBQUEsSUFDckIsWUFBWSxNQUFNO0FBQUEsSUFDbEIsYUFBYSxNQUFNO0FBQUEsSUFDbkIsYUFBYSxNQUFNO0FBQUEsSUFDbkIsY0FBYyxNQUFNO0FBQUEsSUFDcEIsY0FBYyxNQUFNO0FBQUEsSUFDcEIsZ0JBQWdCLE1BQU07QUFBQSxJQUN0QixjQUFjLE1BQU07QUFBQSxFQUN0QjtBQUNGOzs7QUNqVUE7QUFBQSxJQUFBQyxpQkFBYztBQUNkLElBQUFDLG9CQUFxQjtBQUNyQixtQkFBc0I7QUFDdEI7QUFFQSxJQUFNLGNBQWMsSUFBSSxRQUFHO0FBQzNCLElBQU0sY0FBYyxNQUFNLFFBQUc7QUFFdEIsSUFBTSxlQUFlLENBQUMsTUFBMkM7QUFDdEUsUUFBTSxtQkFBbUIsRUFBRSxLQUFLO0FBQ2hDLFFBQU0sbUJBQW1CLGVBQUFDLFFBQUU7QUFBQSxJQUN6QixFQUFFLEtBQUssT0FBTyxDQUFDLE1BQU0sRUFBRSxNQUFNLFdBQVcsRUFBRSxNQUFNLFVBQVUsQ0FBQyxFQUFFLElBQUksTUFBTSxDQUFDO0FBQUEsRUFDMUU7QUFDQSxRQUFNLFlBQVksbUJBQW1CO0FBRXJDLFFBQU0sVUFBVSxZQUNaLElBQUksR0FBRyx1QkFBdUIseUJBQXlCLElBQ3ZELG1CQUFtQixJQUNuQixzQkFDQTtBQUVKLFFBQU0sT0FBTyxFQUFFLEtBQUssSUFBSSxDQUFDQyxPQUFNO0FBQUEsSUFDN0JBLEdBQUUsTUFBTSxXQUFXQSxHQUFFLE1BQU0sVUFBVSxJQUFJLGNBQWM7QUFBQSxJQUN2REEsR0FBRSxLQUFLO0FBQUEsSUFDUCxTQUFLLGtCQUFBQyxTQUFTRCxHQUFFLE1BQU0sUUFBUSxDQUFDO0FBQUEsSUFDL0IsTUFBTUEsR0FBRSxNQUFNLFNBQVMsQ0FBQztBQUFBLElBQ3hCQSxHQUFFLE1BQU0sU0FBUyxNQUFNQSxHQUFFLE1BQU0sTUFBTSxJQUFJLEtBQUssR0FBRztBQUFBLElBQ2pEQSxHQUFFLE1BQU0sV0FBVyxJQUFJQSxHQUFFLE1BQU0sUUFBUSxJQUFJLEtBQUssR0FBRztBQUFBLElBQ25EQSxHQUFFLE1BQU0sVUFBVSxLQUFLQSxHQUFFLE1BQU0sT0FBTyxJQUFJLEtBQUssR0FBRztBQUFBLElBQ2xEQSxHQUFFLE1BQU0sVUFBVSxJQUFJQSxHQUFFLE1BQU0sT0FBTyxJQUFJLEtBQUssR0FBRztBQUFBLEVBQ25ELENBQUM7QUFFRCxhQUFPO0FBQUEsSUFDTDtBQUFBLE1BQ0U7QUFBQSxRQUNFO0FBQUE7QUFBQSxRQUNBLEtBQUssTUFBTTtBQUFBLFFBQ1g7QUFBQSxRQUNBLEtBQUssT0FBTztBQUFBLFFBQ1osS0FBSyxTQUFTO0FBQUEsUUFDZCxLQUFLLFNBQVM7QUFBQSxRQUNkLEtBQUssU0FBUztBQUFBLFFBQ2QsS0FBSyxTQUFTO0FBQUEsTUFDaEI7QUFBQSxNQUNBLEdBQUc7QUFBQSxNQUNIO0FBQUEsUUFDRSxZQUFZLGNBQWM7QUFBQTtBQUFBLFFBQzFCO0FBQUEsUUFDQSxTQUFLLGtCQUFBQyxTQUFTLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztBQUFBLFFBQ25DLG1CQUFtQixJQUFJLE1BQU0sRUFBRSxjQUFjLENBQUMsSUFBSSxLQUFLLEdBQUc7QUFBQSxRQUMxRCxFQUFFLGNBQWMsTUFBTSxFQUFFLFdBQVcsSUFBSSxLQUFLLEdBQUc7QUFBQSxRQUMvQyxFQUFFLGNBQWMsSUFBSSxFQUFFLFdBQVcsSUFBSSxLQUFLLEdBQUc7QUFBQSxRQUM3QyxFQUFFLGVBQWUsS0FBSyxFQUFFLFlBQVksSUFBSSxLQUFLLEdBQUc7QUFBQSxRQUNoRCxFQUFFLGVBQWUsSUFBSSxFQUFFLFlBQVksSUFBSSxLQUFLLEdBQUc7QUFBQSxNQUNqRDtBQUFBLElBQ0Y7QUFBQSxJQUNBO0FBQUEsTUFDRTtBQUFBLE1BQ0EsZUFBZTtBQUFBLFFBQ2IsT0FBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBLFNBQVM7QUFBQSxRQUNQLEVBQUUsV0FBVyxRQUFRLE9BQU8sRUFBRTtBQUFBLFFBQzlCLEVBQUUsV0FBVyxRQUFRLE9BQU8sR0FBRztBQUFBLFFBQy9CLEVBQUUsV0FBVyxRQUFRO0FBQUEsUUFDckIsRUFBRSxXQUFXLFFBQVE7QUFBQSxRQUNyQixFQUFFLFdBQVcsUUFBUTtBQUFBLFFBQ3JCLEVBQUUsV0FBVyxRQUFRO0FBQUEsUUFDckIsRUFBRSxXQUFXLFFBQVE7QUFBQSxRQUNyQixFQUFFLFdBQVcsUUFBUTtBQUFBLE1BQ3ZCO0FBQUE7QUFBQSxNQUVBLG9CQUFvQixDQUFDLFdBQVcsYUFBYTtBQUMzQyxlQUNFLGNBQWMsS0FDZCxjQUFjLEtBQ2QsY0FBYyxXQUFXLEtBQ3pCLGNBQWM7QUFBQSxNQUVsQjtBQUFBLE1BQ0Esa0JBQWtCLENBQUMsV0FBVyxhQUFhO0FBQ3pDLGVBQU8sY0FBYyxLQUFLLGFBQWE7QUFBQSxNQUN6QztBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQ0Y7QUFFQSxJQUFNLFNBQVMsZUFBQUYsUUFBRTtBQUFBLEVBQ2Y7QUFBQSxJQUNFLFNBQVM7QUFBQSxJQUNULFNBQVM7QUFBQSxJQUNULFNBQVM7QUFBQSxJQUNULFVBQVU7QUFBQSxJQUVWLFlBQVk7QUFBQSxJQUNaLFlBQVk7QUFBQSxJQUNaLFlBQVk7QUFBQSxJQUNaLGFBQWE7QUFBQSxJQUViLFVBQVU7QUFBQSxJQUNWLFdBQVc7QUFBQSxJQUNYLFVBQVU7QUFBQSxJQUVWLFVBQVU7QUFBQSxJQUNWLFVBQVU7QUFBQSxJQUNWLFdBQVc7QUFBQSxJQUNYLFVBQVU7QUFBQSxFQUNaO0FBQUEsRUFDQSxDQUFDLE1BQU0sS0FBSyxDQUFDO0FBQ2Y7OztBQzdHQTtBQUFBLElBQUFHLGlCQUFrQjs7O0FDQWxCO0FBQUEsSUFBQUMsaUJBQWtCOzs7QUNBbEI7QUFBTyxJQUFNLE9BQ1gsQ0FDRSxJQUNBLFNBQ0EsY0FFRixVQUFVLFNBQVk7QUFDcEIsTUFBSTtBQUNGLFVBQU0sSUFBSSxNQUFNLEdBQUcsR0FBRyxJQUFJO0FBQzFCLGNBQVU7QUFDVixXQUFPO0FBQUEsRUFDVCxTQUFTLEdBQVA7QUFDQSxZQUFRLENBQUM7QUFBQSxFQUNYO0FBQ0Y7OztBRFZGOzs7QUVKQTtBQUFBLElBQUFDLGlCQUFrQjtBQUNsQixJQUFBQyxhQUFlO0FBQ2ZDO0FBQ0EsSUFBTSxXQUFXLFdBQUFDLFFBQUcsU0FBUztBQUM3QixJQUFNQyxjQUFRLGVBQUFDLFNBQU0saUJBQWlCO0FBRTlCLFNBQVMsWUFBWUMsT0FBYyxLQUFhO0FBQ3JELFNBQU8sV0FBV0EsT0FBTSxLQUFLLFdBQVc7QUFDMUM7QUFFTyxTQUFTLFlBQVlBLE9BQWMsS0FBYTtBQUNyRCxTQUFPLFdBQVdBLE9BQU0sS0FBSyxXQUFXO0FBQzFDO0FBR0EsZUFBZSxXQUFXQSxPQUFjLEtBQWEsTUFBbUI7QUFDdEUsRUFBQUYsUUFBTSwrQkFBK0JFLE9BQU0sR0FBRztBQUM5QyxRQUFNLElBQUksTUFBTSxTQUFTQSxLQUFJO0FBQzdCLFFBQU0sWUFBWTtBQUFBLElBQ2hCO0FBQUEsSUFDQSxRQUFRO0FBQUEsSUFDUixNQUFNO0FBQUEsSUFDTixTQUFTO0FBQUEsTUFDUCxnQkFBZ0I7QUFBQSxJQUNsQjtBQUFBLEVBQ0YsQ0FBQztBQUNIOzs7QUZwQkEsSUFBTUMsY0FBUSxlQUFBQyxTQUFNLG9CQUFvQjtBQU94QyxlQUFzQixnQkFBZ0I7QUFBQSxFQUNwQztBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNGLEdBQW9CO0FBR2xCLEVBQUFELFFBQU0sMkJBQTJCO0FBQUEsSUFDL0I7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxFQUNGLENBQUM7QUFFRCxRQUFNLGdCQUFnQixZQUFZLElBQUksS0FBSyxZQUFZO0FBQ3ZELE1BQUksaUJBQWlCLEdBQUc7QUFFdEI7QUFBQSxFQUNGO0FBR0EsTUFBSSxrQkFBa0IsV0FBVztBQUMvQixVQUFNO0FBQUEsTUFDSjtBQUFBLE1BQ0EsQ0FBQyxNQUFNQSxRQUFNLHdDQUF3QyxXQUFXLENBQUM7QUFBQSxNQUNqRSxNQUFNQSxRQUFNLHFCQUFxQixTQUFTO0FBQUEsSUFDNUMsRUFBRSxXQUFXLGNBQWM7QUFBQSxFQUM3QjtBQUVBLE1BQUkscUJBQXFCLFFBQVE7QUFDL0IsVUFBTSxRQUFRO0FBQUEsTUFDWixZQUFZLElBQUksQ0FBQyxlQUFlO0FBQzlCLGNBQU0sTUFBTSxxQkFBcUI7QUFBQSxVQUMvQixDQUFDLFNBQVMsS0FBSyxpQkFBaUIsV0FBVztBQUFBLFFBQzdDLEdBQUc7QUFDSCxZQUFJLENBQUMsS0FBSztBQUNSLFVBQUFBO0FBQUEsWUFDRTtBQUFBLFlBQ0E7QUFBQSxZQUNBO0FBQUEsVUFDRjtBQUNBLGVBQUssNkNBQTZDLFdBQVcsSUFBSTtBQUNqRSxpQkFBTyxRQUFRLFFBQVE7QUFBQSxRQUN6QjtBQUNBLGVBQU87QUFBQSxVQUNMO0FBQUEsVUFDQSxDQUFDLE1BQ0NBO0FBQUEsWUFDRTtBQUFBLFlBQ0EsV0FBVztBQUFBLFlBQ1g7QUFBQSxVQUNGO0FBQUEsVUFDRixNQUFNQSxRQUFNLHFCQUFxQixXQUFXLElBQUk7QUFBQSxRQUNsRCxFQUFFLFdBQVcsTUFBTSxHQUFHO0FBQUEsTUFDeEIsQ0FBQztBQUFBLElBQ0g7QUFBQSxFQUNGO0FBQ0Y7QUFFTyxJQUFNLG1CQUFtQjtBQUFBLEVBQzlCO0FBQUEsRUFDQSxNQUFNO0FBQUEsRUFBQztBQUFBLEVBQ1AsTUFBTTtBQUFBLEVBQUM7QUFDVDs7O0FEcEVBOzs7QUlUQTtBQUFBO0FBRU8sSUFBTSxhQUFhLE1BQ3hCLENBQUMsQ0FBQyxRQUFRLElBQUksZ0NBQ2QsY0FBYyxNQUFNOzs7QUpPdEI7QUFFQSxJQUFNRSxjQUFRLGVBQUFDLFNBQU0sa0JBQWtCO0FBRXRDLGVBQXNCLHFCQUFxQjtBQUFBLEVBQ3pDO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0YsR0FLRztBQUNELFFBQU1DLE9BQU0sVUFBVSxLQUFLLEtBQUssQ0FBQyxNQUFNLEVBQUUsS0FBSyxhQUFhLElBQUk7QUFDL0QsTUFBSSxDQUFDQSxNQUFLO0FBQ1IsU0FBSyw2Q0FBNkMsSUFBSTtBQUN0RDtBQUFBLEVBQ0Y7QUFDQSxTQUFPO0FBQUEsSUFDTDtBQUFBLElBQ0E7QUFBQTtBQUFBLE1BRUUsR0FBRztBQUFBLE1BQ0gsTUFBTSxDQUFDQSxJQUFHO0FBQUEsSUFDWjtBQUFBLElBQ0E7QUFBQSxFQUNGO0FBQ0Y7QUFFQSxlQUFzQixzQkFDcEIsWUFDQSxTQUNBQyxTQUNBO0FBQ0EsUUFBTUQsT0FBTSxRQUFRLEtBQUssQ0FBQztBQUMxQixNQUFJLENBQUNBLE1BQUs7QUFDUixVQUFNLElBQUksTUFBTSxpQ0FBaUM7QUFBQSxFQUNuRDtBQUNBLFFBQU0sa0JBQWtCLHlCQUF5QkEsSUFBRztBQUNwRCxRQUFNLGdCQUFnQix3QkFBd0JBLE1BQUssUUFBUSxNQUFNO0FBRWpFLFFBQU0sRUFBRSxnQkFBZ0IscUJBQXFCLElBQUksTUFBTTtBQUFBLElBQ3JEO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxFQUNGO0FBRUEsRUFBQUYsUUFBTSwrQ0FBK0MsWUFBWTtBQUFBLElBQy9EO0FBQUEsSUFDQTtBQUFBLEVBQ0YsQ0FBQztBQUVELFNBQU8sUUFBUSxJQUFJO0FBQUEsSUFDakIsZ0JBQWdCO0FBQUEsTUFDZDtBQUFBLE1BQ0EsV0FBV0UsS0FBSTtBQUFBLE1BQ2Y7QUFBQSxNQUNBLGFBQWEsZ0JBQWdCO0FBQUEsSUFDL0IsQ0FBQztBQUFBLElBQ0QsaUJBQWlCLFlBQVksaUJBQWlCLElBQUlDLE9BQU07QUFBQSxFQUMxRCxDQUFDO0FBQ0g7QUFFQSxlQUFlLGNBQ2IsWUFDQSxlQUNBLGlCQUNBO0FBQ0EsRUFBQUgsUUFBTSxvQ0FBb0MsVUFBVTtBQUNwRCxNQUFJLFdBQVcsR0FBRztBQUNoQixXQUFPLDRCQUE0QixZQUFZO0FBQUEsTUFDN0MsT0FBTztBQUFBLE1BQ1AsU0FBUztBQUFBLElBQ1gsQ0FBQztBQUFBLEVBQ0g7QUFHQSxRQUFNLGlCQUFpQixZQUFZLGFBQWE7QUFDaEQsU0FBTyxzQkFBc0IsWUFBWSxlQUFlO0FBQzFEOzs7QUs1RkE7QUFHQTtBQUlBLElBQUFJLGlCQUFrQjs7O0FDUGxCO0FBQUEscUJBQW9CO0FBQ3BCLElBQUFDLGlCQUFrQjtBQUlsQixJQUFNQyxjQUFRLGVBQUFDLFNBQU0sa0JBQWtCO0FBT3RDLGVBQXNCLFlBQ3BCLEVBQUUsS0FBSyxHQUNQLG1CQUNBO0FBQ0EsUUFBTSxnQkFBZ0IsMEJBQTBCLGlCQUFpQjtBQUVqRSxRQUFNLFVBQVU7QUFBQSxJQUNkLEdBQUc7QUFBQSxJQUNILFFBQVE7QUFBQSxNQUNOLEdBQUcsY0FBYztBQUFBLE1BQ2pCLHVCQUF1QjtBQUFBLElBQ3pCO0FBQUEsSUFDQSxLQUFLO0FBQUEsTUFDSCxHQUFHLGNBQWM7QUFBQSxNQUNqQixhQUFhO0FBQUEsSUFDZjtBQUFBLElBQ0E7QUFBQSxFQUNGO0FBQ0EsRUFBQUQsUUFBTSxtQ0FBbUMsT0FBTztBQUNoRCxRQUFNLFNBQVMsTUFBTSxlQUFBRSxRQUFRLElBQUksT0FBTztBQUV4QyxFQUFBRixRQUFNLHlCQUF5QixNQUFNO0FBQ3JDLFNBQU87QUFDVDtBQUVPLElBQU0sa0JBQWtCLE9BQzdCLEVBQUUsS0FBSyxHQUNQLHNCQUMyQjtBQUMzQixNQUFJO0FBQ0YsV0FBTyxNQUFNLFlBQVksRUFBRSxLQUFLLEdBQUcsaUJBQWlCO0FBQUEsRUFDdEQsU0FBU0csUUFBUDtBQUNBLElBQUFILFFBQU0sNEJBQTRCRyxNQUFLO0FBQ3ZDLFdBQU87QUFBQSxNQUNMLFFBQVE7QUFBQSxNQUNSLFVBQVU7QUFBQSxNQUNWLFNBQVM7QUFBQSxFQUNOQSxPQUFnQjtBQUFBLEVBQ2JBLE9BQWdCO0FBQUEsSUFDeEI7QUFBQSxFQUNGO0FBQ0Y7OztBRHRDQTtBQWZBO0FBa0JBLElBQU1DLGNBQVEsZUFBQUMsU0FBTSxpQkFBaUI7QUFFckMsZUFBc0IsWUFDcEI7QUFBQSxFQUNFO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBLFVBQUFDO0FBQUEsRUFDQTtBQUNGLEdBR0EsUUFDQTtBQUNBLFFBQU0sVUFBeUIsQ0FBQztBQUNoQyxRQUFNLGNBQThCLENBQUM7QUFDckMsTUFBSSxVQUFVO0FBRWQsU0FBTyxTQUFTO0FBQ2QsVUFBTSxXQUFXLE1BQU0sU0FBUztBQUFBLE1BQzlCLFNBQVM7QUFBQSxRQUNQO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxRQUNBLFVBQUFBO0FBQUEsTUFDRjtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsSUFDRixDQUFDO0FBQ0QsUUFBSSxDQUFDLFNBQVMsUUFBUTtBQUNwQixNQUFBRixRQUFNLDJDQUEyQyxZQUFZLE1BQU07QUFDbkUsZ0JBQVU7QUFDVjtBQUFBLElBQ0Y7QUFDQSxhQUFTLFFBQVEsQ0FBQyxTQUFTO0FBQ3pCLFVBQUksS0FBSyxRQUFRLGFBQWE7QUFDNUIsZ0JBQVEsS0FBSyxRQUFRLElBQUksSUFBSSxLQUFLLFFBQVE7QUFBQSxNQUM1QztBQUNBLGtCQUFZLEtBQUssS0FBSyxXQUFXO0FBQUEsSUFDbkMsQ0FBQztBQUFBLEVBQ0g7QUFFQSxRQUFNLFFBQVEsV0FBVyxXQUFXO0FBQ3BDLFNBQU87QUFDVDtBQUVBLGVBQWUsU0FBUztBQUFBLEVBQ3RCO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDRixHQVNHO0FBQ0QsTUFBSSxRQUFRO0FBQUEsSUFDVixPQUFPLENBQUM7QUFBQSxJQUNSLGtCQUFrQjtBQUFBLElBQ2xCLGdCQUFnQjtBQUFBLEVBQ2xCO0FBRUEsTUFBSSxXQUFXLEdBQUc7QUFDaEIsSUFBQUEsUUFBTSw2QkFBNkIsT0FBTyxTQUFTO0FBQ25ELFlBQVEsTUFBTSx1QkFBdUI7QUFBQSxNQUNuQyxHQUFHO0FBQUEsTUFDSCxXQUFXLE9BQU87QUFBQSxJQUNwQixDQUFDO0FBQUEsRUFDSCxPQUFPO0FBQ0wsVUFBTSxXQUFXLE1BQU0sZUFBZSxPQUFPO0FBRTdDLFFBQUksU0FBUyxTQUFTLFFBQVEsU0FBUyxlQUFlLE1BQU07QUFDMUQsWUFBTSxNQUFNLEtBQUs7QUFBQSxRQUNmLE1BQU0sU0FBUztBQUFBLFFBQ2YsWUFBWSxTQUFTO0FBQUEsTUFDdkIsQ0FBQztBQUFBLElBQ0g7QUFDQSxVQUFNLG1CQUFtQixTQUFTO0FBQ2xDLFVBQU0saUJBQWlCLFNBQVM7QUFBQSxFQUNsQztBQUVBLE1BQUksTUFBTSxNQUFNLFdBQVcsR0FBRztBQUM1QixXQUFPLENBQUM7QUFBQSxFQUNWO0FBRUEsVUFBUTtBQUNSO0FBQUEsSUFDRTtBQUFBLElBQ0EsTUFBTSxNQUFNLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssSUFBSTtBQUFBLElBQ3hDLE1BQU07QUFBQSxJQUNOLE1BQU07QUFBQSxFQUNSO0FBRUEsUUFBTSxZQUFZLE1BQU07QUFBQSxJQUN0QixFQUFFLE1BQU0sTUFBTSxNQUFNLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssR0FBRyxFQUFFO0FBQUEsSUFDakQ7QUFBQSxFQUNGO0FBQ0EsUUFBTSxtQkFBbUI7QUFBQSxJQUN2QjtBQUFBLElBQ0EsTUFBTSxNQUFNLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSTtBQUFBLElBQzdCO0FBQUEsRUFDRjtBQUVBLFFBQU0sUUFBUSxrREFBa0Q7QUFFaEUsUUFBTSxTQUFTLGtCQUFrQjtBQUNqQyxlQUFhO0FBRWIsUUFBTSxjQUFjLE1BQU0sTUFBTSxJQUFJLENBQUMsU0FBUztBQUM1QyxVQUFNLGNBQWMsa0JBQWtCLEtBQUssTUFBTSxnQkFBZ0I7QUFDakUsUUFBSSxDQUFDLGFBQWE7QUFDaEIsV0FBSyx3Q0FBd0MsS0FBSyxJQUFJO0FBQUEsSUFDeEQ7QUFFQSxXQUFPO0FBQUEsTUFDTCxTQUFTO0FBQUEsUUFDUCxNQUFNLEtBQUs7QUFBQSxRQUNYO0FBQUEsTUFDRjtBQUFBLE1BQ0EsYUFBYSxxQkFBcUI7QUFBQSxRQUNoQyxHQUFHO0FBQUEsUUFDSCxXQUFXO0FBQUEsUUFDWDtBQUFBLE1BQ0YsQ0FBQyxFQUFFLE1BQU0sS0FBSztBQUFBLElBQ2hCO0FBQUEsRUFDRixDQUFDO0FBRUQsU0FBTztBQUNUOzs7QUV0SkE7OztBQ0FBO0FBRUE7OztBQ0ZBO0FBQUEsSUFBQUcsaUJBQWtCO0FBQ2xCLElBQUFDLGVBQWlCO0FBRWpCLGdDQUE2QjtBQUM3QixvQkFBc0M7QUFDdEMsSUFBQUMsaUJBQWM7QUFDZCxJQUFBQyxhQUFlO0FBU2YsSUFBTUMsY0FBUSxlQUFBQyxTQUFNLGdCQUFnQjtBQVNwQyxlQUFzQixVQUFVO0FBQUEsRUFDOUI7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNGLEdBQWtFO0FBQ2hFLHNCQUFvQixRQUFRLGlCQUFpQjtBQUM3QyxnQkFBYyxRQUFRLFdBQVc7QUFDakMsdUJBQXFCLFFBQVEsa0JBQWtCLEtBQUssQ0FBQztBQUdyRCw0QkFBMEIsUUFBUSx1QkFBdUIsS0FBSyxDQUFDO0FBRS9ELEVBQUFELFFBQU0seUNBQXlDO0FBQUEsSUFDN0M7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLEVBQ0YsQ0FBQztBQUVELE1BQUksQ0FBQyxlQUFlLENBQUMsbUJBQW1CO0FBQ3RDLFVBQU0sTUFBTSxrREFBa0Q7QUFBQSxFQUNoRTtBQUVBLE1BQUksb0JBQW9CLE1BQU0sZUFBZSxhQUFhLGFBQWE7QUFBQSxJQUNyRSxVQUFVO0FBQUEsSUFDVixRQUFRLENBQUMsR0FBRyxvQkFBb0IsR0FBRyx1QkFBdUI7QUFBQSxFQUM1RCxDQUFDO0FBYUQsTUFBSSxDQUFDLGVBQUFFLFFBQUUsUUFBUSxhQUFhLGlCQUFpQixHQUFHO0FBQzlDLFVBQU0sMkJBQTJCLE1BQU07QUFBQSxNQUNyQztBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsUUFDRSxVQUFVO0FBQUEsUUFDVixRQUFRLENBQUMsR0FBRyxvQkFBb0IsR0FBRyx1QkFBdUI7QUFBQSxNQUM1RDtBQUFBLElBQ0Y7QUFFQSx3QkFBb0IsZUFBQUEsUUFBRTtBQUFBLE1BQ3BCO0FBQUEsTUFDQTtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBRUEsU0FBTyxhQUFhO0FBQUEsSUFDbEI7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxFQUNGLENBQUM7QUFDSDtBQUVBLGVBQWUsZUFDYixLQUNBLE1BQ0EsYUFDQTtBQUNBLFFBQU0sUUFBUyxDQUFDLEVBQWUsT0FBTyxJQUFJLEVBQUUsSUFBSSxDQUFDLGdCQUFnQjtBQUMvRCxVQUFNLHlCQUF5QixhQUFBQyxRQUFLLEtBQUssS0FBSyxhQUFBQSxRQUFLLEdBQUc7QUFNdEQsUUFBSSxZQUFZLFdBQVcsc0JBQXNCLEdBQUc7QUFDbEQsYUFBTyxZQUFZLFFBQVEsd0JBQXdCLEVBQUU7QUFBQSxJQUN2RDtBQUVBLFdBQU87QUFBQSxFQUNULENBQUM7QUFFRCxRQUFNLGNBQWMsYUFBYSxVQUFVLENBQUMsR0FBRyxPQUFPLG9CQUFvQjtBQUUxRSxNQUFJLFdBQUFDLFFBQUcsU0FBUyxNQUFNLFNBQVM7QUFHN0IsSUFBQUosUUFBTSxpQ0FBaUM7QUFDdkMsZUFBVyxLQUFLLE9BQU87QUFDckIsWUFBTSxNQUFNLE1BQU0sQ0FBQztBQUVuQixVQUFJLENBQUM7QUFBSyxjQUFNLElBQUksTUFBTSx5QkFBeUI7QUFFbkQsWUFBTSxDQUFDLElBQUksUUFBUSxHQUFHO0FBQUEsSUFDeEI7QUFBQSxFQUNGO0FBRUEsTUFBSTtBQUNGLElBQUFBLFFBQU0sMkJBQTJCLEtBQUs7QUFDdEMsSUFBQUEsUUFBTSx3QkFBd0IsR0FBRztBQUVqQyxVQUFNLFFBQVEsTUFBTSxXQUFXLE9BQU87QUFBQSxNQUNwQyxXQUFXO0FBQUEsTUFDWCxVQUFVO0FBQUEsTUFDVjtBQUFBLE1BQ0EsR0FBRztBQUFBLE1BQ0gsUUFBUTtBQUFBLElBQ1YsQ0FBQztBQUVELFdBQU87QUFBQSxFQUNULFNBQVMsR0FBUDtBQUNBLElBQUFBLFFBQU0sOEJBQThCLENBQUM7QUFFckMsV0FBTyxDQUFDO0FBQUEsRUFDVjtBQUNGO0FBRUEsSUFBTSxhQUFhLE9BQU8sT0FBb0Isa0JBQWlDO0FBQzdFLFNBQU8sVUFBTSxjQUFBSyxTQUFPLE9BQU8sYUFBYTtBQUMxQztBQVNBLFNBQVMsYUFBYTtBQUFBLEVBQ3BCO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDRixHQUFpQjtBQUNmLEVBQUFMLFFBQU0sa0JBQWtCLGlCQUFpQjtBQUV6QyxNQUFJLGFBQWE7QUFFakIsTUFBSSxrQkFBa0IsV0FBVyxHQUFHO0FBQ2xDLGlCQUFhLGFBQUFHLFFBQUssUUFBUSxrQkFBa0IsQ0FBQyxDQUFDO0FBQUEsRUFDaEQsT0FBTztBQUNMLHFCQUFhLDBCQUFBRyxTQUFpQixpQkFBaUI7QUFBQSxFQUNqRDtBQUVBLFFBQU0sUUFBUSxrQkFBa0IsSUFBSSxDQUFDLGFBQWE7QUFDaEQsV0FBTyxjQUFjO0FBQUEsTUFDbkI7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBLFVBQVUsV0FBQUYsUUFBRyxTQUFTO0FBQUEsTUFDdEIsS0FBSyxhQUFBRCxRQUFLO0FBQUEsSUFDWixDQUFDO0FBQUEsRUFDSCxDQUFDO0FBRUQsU0FBTztBQUNUO0FBV0EsU0FBUyxjQUFjO0FBQUEsRUFDckI7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBLFVBQUFJO0FBQUEsRUFDQTtBQUNGLEdBQWtCO0FBQ2hCLE1BQUlBLGNBQWEsU0FBUztBQUN4QixlQUFXLFFBQVEsVUFBVSxHQUFHO0FBQ2hDLGtCQUFjLFFBQVEsYUFBYSxHQUFHO0FBQUEsRUFDeEM7QUFFQSxRQUFNLFdBQVcsYUFBQUosUUFBSyxTQUFTLGFBQWEsUUFBUTtBQUNwRCxRQUFNLGFBQWEsYUFBQUEsUUFBSyxNQUFNLFFBQVE7QUFDdEMsUUFBTSxnQkFBZ0IsYUFBQUEsUUFBSyxRQUFRLFFBQVE7QUFFM0MsUUFBTSxvQkFDSixDQUFDLFNBQVMsU0FBUyxTQUFTLFNBQVMsS0FBSyxFQUN2QyxJQUFJLENBQUMsUUFBUSxNQUFNLGFBQWEsRUFDaEMsS0FBSyxDQUFDLFFBQVEsU0FBUyxTQUFTLEdBQUcsQ0FBQyxLQUFLO0FBRTlDLFFBQU0sUUFBUSxTQUFTLE1BQU0sV0FBVztBQUN4QyxNQUFJLE9BQU8sTUFBTSxNQUFNLFNBQVMsQ0FBQyxLQUFLO0FBRXRDLE1BQUksS0FBSyxXQUFXLEdBQUcsR0FBRztBQUN4QixXQUFPLEtBQUssTUFBTSxDQUFDO0FBQUEsRUFDckI7QUFFQSxRQUFNLGdCQUFnQjtBQUN0QixRQUFNLHVCQUF1QixTQUMxQixRQUFRLFlBQVksRUFBRSxFQUN0QixRQUFRLGVBQWUsRUFBRTtBQUU1QixTQUFPO0FBQUEsSUFDTDtBQUFBLElBQ0EsVUFBVSxXQUFXO0FBQUEsSUFDckIsVUFBVSxXQUFXLEtBQUssUUFBUSxtQkFBbUIsRUFBRTtBQUFBLElBQ3ZEO0FBQUEsSUFDQTtBQUFBLElBQ0EsVUFBVyxnQkFBZ0IsY0FDdkIsY0FDQTtBQUFBLElBQ0o7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLEVBQ0Y7QUFDRjs7O0FEN09BLElBQU0saUJBQWlCLENBQ3JCLGVBQ0EsYUFDRyxZQUFZO0FBRVYsSUFBTSxlQUFlLE9BQU87QUFBQSxFQUNqQztBQUFBLEVBQ0E7QUFDRixNQUdNO0FBQ0osUUFBTSxjQUFjLGVBQWUsT0FBTyxhQUFhLE9BQU8sSUFBSTtBQUVsRSxRQUFNLFFBQVEsTUFBTSxVQUFVO0FBQUEsSUFDNUIsYUFBYSxPQUFPO0FBQUEsSUFDcEIsYUFBYSxPQUFPO0FBQUEsSUFDcEI7QUFBQSxJQUNBLG1CQUFtQixPQUFPO0FBQUEsSUFDMUIsb0JBQW9CLE9BQU87QUFBQSxJQUMzQix5QkFBeUIsT0FBTztBQUFBLEVBQ2xDLENBQUM7QUFDRCxNQUFJLE1BQU0sV0FBVyxHQUFHO0FBQ3RCLFNBQUsscURBQXFEO0FBQUEsTUFDeEQ7QUFBQSxNQUNBLG1CQUFtQixPQUFPO0FBQUEsTUFDMUIsb0JBQW9CO0FBQUEsUUFDbEIsT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1QsRUFBRSxLQUFLLENBQUM7QUFBQSxNQUNSLGFBQWEsT0FBTztBQUFBLElBQ3RCLENBQUM7QUFDRCxXQUFPLEVBQUUsT0FBTyxDQUFDLEdBQUcsWUFBWTtBQUFBLEVBQ2xDO0FBQ0EsU0FBTyxFQUFFLE9BQU8sWUFBWTtBQUM5Qjs7O0EvQjFCQSxJQUFNSyxjQUFRLGVBQUFDLFNBQU0sY0FBYztBQUVsQyxlQUFzQixJQUFJLFFBQStCO0FBQ3ZELEVBQUFELFFBQU0saUJBQWlCLE1BQU07QUFFN0IsUUFBTSxrQkFBa0IsZUFBZSxNQUFNO0FBQzdDLGdCQUFjLGdCQUFnQixlQUFlO0FBRTdDLFFBQU07QUFBQSxJQUNKO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLEVBQ0YsSUFBSTtBQUVKLFFBQU0sU0FBUyxNQUFNLGdCQUFnQixlQUFlO0FBQ3BELFFBQU0sRUFBRSxPQUFPLFlBQVksSUFBSSxNQUFNLGFBQWE7QUFBQSxJQUNoRDtBQUFBLElBQ0EsUUFBUTtBQUFBLEVBQ1YsQ0FBQztBQUNELE1BQUksTUFBTSxXQUFXLEdBQUc7QUFDdEI7QUFBQSxFQUNGO0FBRUEsUUFBTUUsWUFBVyxNQUFNLFlBQVk7QUFBQSxJQUNqQztBQUFBLElBQ0EsU0FBUyxnQkFBZ0I7QUFBQSxFQUMzQixDQUFDO0FBRUQsVUFBUTtBQUVSLE9BQUssNEJBQTRCLE1BQU0sTUFBTTtBQUM3QztBQUFBLElBQ0UsU0FBUyxLQUFLLEtBQUssR0FBRyxLQUFLLGlCQUFpQixTQUFTLG9CQUNuRCxZQUFZLHNCQUNHO0FBQUEsRUFDbkI7QUFDQSxPQUFLLDhDQUE4QztBQUVuRCxRQUFNQyxPQUFNLE1BQU0sVUFBVTtBQUFBLElBQzFCLElBQUksTUFBTSxTQUFTO0FBQUEsSUFDbkIsT0FBTyxNQUFNLElBQUksQ0FBQyxTQUFTLEtBQUssUUFBUTtBQUFBLElBQ3hDLFFBQVEsTUFBTSxXQUFXLE9BQU8sV0FBVztBQUFBLElBQzNDO0FBQUEsSUFDQSxVQUFBRDtBQUFBLElBQ0EsVUFBVSxZQUFZO0FBQUEsSUFDdEI7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0EsYUFBYSxDQUFDLFdBQVcsRUFBRSxLQUFLLENBQUM7QUFBQSxJQUNqQyxNQUFNO0FBQUEsSUFDTjtBQUFBLElBQ0E7QUFBQSxFQUNGLENBQUM7QUFFRCxPQUFLLHNCQUFlLEtBQUtDLEtBQUksTUFBTSxDQUFDO0FBRXBDLFdBQVNBLEtBQUksS0FBSztBQUVsQixtQkFBaUI7QUFFakIsUUFBTSxVQUFVLE1BQU07QUFBQSxJQUNwQjtBQUFBLE1BQ0UsT0FBT0EsS0FBSTtBQUFBLE1BQ1gsU0FBU0EsS0FBSTtBQUFBLE1BQ2IsV0FBV0EsS0FBSTtBQUFBLE1BQ2YsVUFBQUQ7QUFBQSxNQUNBO0FBQUEsSUFDRjtBQUFBLElBQ0E7QUFBQSxFQUNGO0FBRUEsVUFBUTtBQUVSLFFBQU0sVUFBVSxxQkFBcUIsT0FBTyxPQUFPLE9BQU8sR0FBRyxNQUFNO0FBRW5FLFFBQU0sU0FBUyxvQkFBb0I7QUFDbkMsVUFBUSxJQUFJLGFBQWEsT0FBTyxDQUFDO0FBQ2pDLE9BQUssMkJBQW9CLEtBQUtDLEtBQUksTUFBTSxDQUFDO0FBRXpDLFNBQU87QUFDUCxTQUFPO0FBQ1Q7OztBRHpGTyxTQUFTQyxLQUFJLFFBQXdCO0FBQzFDLFNBQU8sSUFBWSxNQUFNO0FBQzNCOyIsCiAgIm5hbWVzIjogWyJ1dGlsIiwgImNoYWxrIiwgIl8iLCAiYXhpb3MiLCAiYXhpb3NSZXRyeSIsICJfY29uZmlnIiwgInByZXR0eU1pbGxpc2Vjb25kcyIsICJpbXBvcnRfYXhpb3MiLCAiaW1wb3J0X2xvZGFzaCIsICJEZWJ1ZyIsICJfIiwgImVycm9yIiwgImluaXRfaHR0cENsaWVudCIsICJpbXBvcnRfZGVidWciLCAiZGVidWciLCAiRGVidWciLCAibG9nIiwgInJlcXVpcmUiLCAiY3AiLCAicHJvY2VzcyIsICJpbml0X2h0dHBDbGllbnQiLCAicmVxdWlyZSIsICJydW4iLCAiaW1wb3J0X2RlYnVnIiwgImluaXRfaHR0cENsaWVudCIsICJpbXBvcnRfbG9kYXNoIiwgIl8iLCAicGxhdGZvcm0iLCAic3Rkb3V0IiwgImltcG9ydF9kZWJ1ZyIsICJpbXBvcnRfbG9kYXNoIiwgImRlYnVnIiwgImRlYnVnRm4iLCAiXyIsICJfIiwgImRlYnVnIiwgImltcG9ydF9kZWJ1ZyIsICJpbXBvcnRfcGF0aCIsICJpbXBvcnRfZGVidWciLCAicGF0aCIsICJpbXBvcnRfZGVidWciLCAiaW1wb3J0X2xvZGFzaCIsICJkZWJ1ZyIsICJEZWJ1ZyIsICJfIiwgImRlYnVnIiwgIkRlYnVnIiwgInJlcXVpcmUiLCAic3Rkb3V0IiwgImZzIiwgImV4ZWNhIiwgImZpbGUiLCAicGF0aCIsICJkZWJ1ZyIsICJEZWJ1ZyIsICJyZXF1aXJlIiwgInBhdGgiLCAiaW1wb3J0X2RlYnVnIiwgImltcG9ydF9sb2Rhc2giLCAiZGVidWciLCAiRGVidWciLCAiZGVidWciLCAiXyIsICJnaXQiLCAiaW5pdF9odHRwQ2xpZW50IiwgImltcG9ydF9kZWJ1ZyIsICJkZWJ1ZyIsICJEZWJ1ZyIsICJpbXBvcnRfZGVidWciLCAiaW1wb3J0X3V0aWwiLCAiZGVidWciLCAiRGVidWciLCAiZ2V0b3MiLCAiaW1wb3J0X2RlYnVnIiwgImltcG9ydF9sb2Rhc2giLCAiaW1wb3J0X25hbm9pZCIsICJkZWJ1ZyIsICJEZWJ1ZyIsICJlcnJvciIsICJfIiwgInJ1biIsICJpbXBvcnRfbG9kYXNoIiwgImltcG9ydF9wcmV0dHlfbXMiLCAiXyIsICJyIiwgInByZXR0eU1TIiwgImltcG9ydF9kZWJ1ZyIsICJpbXBvcnRfZGVidWciLCAiaW1wb3J0X2RlYnVnIiwgImltcG9ydF9mcyIsICJpbml0X2h0dHBDbGllbnQiLCAiZnMiLCAiZGVidWciLCAiRGVidWciLCAiZmlsZSIsICJkZWJ1ZyIsICJEZWJ1ZyIsICJkZWJ1ZyIsICJEZWJ1ZyIsICJydW4iLCAic3Rkb3V0IiwgImltcG9ydF9kZWJ1ZyIsICJpbXBvcnRfZGVidWciLCAiZGVidWciLCAiRGVidWciLCAiY3lwcmVzcyIsICJlcnJvciIsICJkZWJ1ZyIsICJEZWJ1ZyIsICJwbGF0Zm9ybSIsICJpbXBvcnRfZGVidWciLCAiaW1wb3J0X3BhdGgiLCAiaW1wb3J0X2xvZGFzaCIsICJpbXBvcnRfb3MiLCAiZGVidWciLCAiRGVidWciLCAiXyIsICJwYXRoIiwgIm9zIiwgImdsb2JieSIsICJjb21tb25QYXRoUHJlZml4IiwgInBsYXRmb3JtIiwgImRlYnVnIiwgIkRlYnVnIiwgInBsYXRmb3JtIiwgInJ1biIsICJydW4iXQp9Cg==